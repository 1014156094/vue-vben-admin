import{k as e,q as t,R as o,u as n,S as r,f as l,a,aA as s,N as i,bZ as c,r as u,p as f,L as d,M as p,b_ as m,ba as g,D as b,ai as h,Y as v,Z as y,b$ as w,c0 as O,b as L,a9 as x,c1 as H,ae as j,t as C,bd as S,v as P}from"./index.087827bd.js";import{C as F}from"./CloseOutlined.1a46c05c.js";import{c as k,u as M}from"./useContext.2506cc4d.js";import{u as B}from"./useTimeout.e40508cb.js";import{u as E}from"./useDebounce.9c7c5ce5.js";import{a as N,r as T}from"./resizeEvent.dd57c904.js";import{e as z,g as W}from"./tsxHelper.c465228b.js";import{a as $}from"./index.1982236a.js";import{p as A}from"./propTypes.81b46aad.js";import{s as R}from"./index.663602f0.js";import{u as q}from"./useWindowSizeFn.6bad7e86.js";var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"};function I(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var Y=function(n,r){var l=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){I(e,t,o[t])}))}return e}({},n,r.attrs);return e(o,t(l,{icon:D}),null)};Y.displayName="FullscreenExitOutlined",Y.inheritAttrs=!1;var X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"};function Z(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var G=function(n,r){var l=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),n.forEach((function(t){Z(e,t,o[t])}))}return e}({},n,r.attrs);return e(o,t(l,{icon:X}),null)};G.displayName="FullscreenOutlined",G.inheritAttrs=!1;const{t:_}=n(),J={visible:A.bool,draggable:A.bool.def(!0),centered:A.bool,cancelText:A.string.def(_("component.modal.cancelText")),okText:A.string.def(_("component.modal.okText")),closeFunc:Function},K=Object.assign({},J,{canFullscreen:A.bool.def(!0),wrapperFooterOffset:A.number.def(0),helpMessage:[String,Array],useWrapper:A.bool.def(!0),loading:A.bool,showCancelBtn:A.bool.def(!0),showOkBtn:A.bool.def(!0),wrapperProps:Object,afterClose:Function,bodyStyle:Object,closable:{type:Boolean,default:!0},closeIcon:Object,confirmLoading:Boolean,destroyOnClose:Boolean,footer:Object,getContainer:Function,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},maskStyle:Object,okType:{type:String,default:"primary"},okButtonProps:Object,cancelButtonProps:Object,title:{type:String},visible:Boolean,width:[String,Number],wrapClassName:{type:String},zIndex:{type:Number}});function Q(e){const t=(e,t)=>getComputedStyle(e)[t],o=o=>{if(!o)return;o.setAttribute("data-drag",l(e.draggable));const n=o.querySelector(".ant-modal-header"),r=o.querySelector(".ant-modal");n&&r&&l(e.draggable)&&(n.style.cursor="move",n.onmousedown=e=>{if(!e)return;const o=e.clientX,n=e.clientY,l=document.body.clientWidth,a=document.documentElement.clientHeight,s=r.offsetWidth,i=r.offsetHeight,c=r.offsetLeft,u=l-r.offsetLeft-s,f=r.offsetTop,d=a-r.offsetTop-i,p=t(r,"left"),m=t(r,"top");let g=+p,b=+m;p.includes("%")?(g=+document.body.clientWidth*(+p.replace(/%/g,"")/100),b=+document.body.clientHeight*(+m.replace(/%/g,"")/100)):(g=+p.replace(/px/g,""),b=+m.replace(/px/g,"")),document.onmousemove=function(e){let t=e.clientX-o,l=e.clientY-n;-t>c?t=-c:t>u&&(t=u),-l>f?l=-f:l>d&&(l=d),r.style.cssText+=`;left:${t+g}px;top:${l+b}px;`},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null}})};r((()=>{l(e.visible)&&l(e.draggable)&&B((()=>{(()=>{const n=document.querySelectorAll(".ant-modal-wrap");for(const r of Array.from(n)){if(!r)continue;const n=t(r,"display"),a=r.getAttribute("data-drag");"none"!==n&&(null===a||l(e.destroyOnClose))&&o(r)}})()}),30)}))}var U=a({name:"Modal",inheritAttrs:!1,props:K,setup(e,{attrs:t,slots:o}){const{visible:n,draggable:r,destroyOnClose:l}=s(e);return Q({visible:n,destroyOnClose:l,draggable:r}),()=>{const n={...t,...e};return i(c,{...n},z(o))}}});const V=Symbol();function ee(){return M(V)}var te=a({name:"ModalWrapper",props:{loading:A.bool,modalHeaderHeight:A.number.def(50),modalFooterHeight:A.number.def(54),minHeight:A.number.def(200),footerOffset:A.number.def(0),visible:A.bool,fullScreen:A.bool},emits:["heightChange","getExtHeight"],setup(e,{slots:t,emit:o}){const n=u(null),a=u(null),s=u(0);let c=()=>{};q(v),k({redoModalHeight:v},V);const h=f((()=>({minHeight:`${e.minHeight}px`,height:`${l(s)}px`,overflow:"auto"})));async function v(){if(!e.visible)return;const t=l(n);if(!t)return;const r=t.parentElement;if(r){r.style.padding="0",await b();try{const t=r.parentElement&&r.parentElement.parentElement;if(!t)return;const n=getComputedStyle(t).top,i=Number.parseInt(n);let c=window.innerHeight-2*i+(e.footerOffset||0)-e.modalFooterHeight-e.modalHeaderHeight;i<40&&(c-=26),await b();const u=l(a);if(!u)return;const f=u.$el.querySelector(".ant-spin-container");if(!f)return;const d=f.scrollHeight;e.fullScreen?s.value=window.innerHeight-e.modalFooterHeight-e.modalHeaderHeight:s.value=d>c?c:d+16+30,o("heightChange",l(s)),b((()=>{const e=u.$el;e&&(e.style.height=`${l(s)}px`)}))}catch(e){}}}return r((()=>{v()})),d((()=>e.fullScreen),(e=>{!e&&v()})),p((()=>{const{modalHeaderHeight:t,modalFooterHeight:r}=e;o("getExtHeight",t+r),function(){const e=l(n);if(!e)return;const t=e.querySelector(".ant-spin-container");if(!t)return;const[o,r]=function(e,t,o=100,n){let r=()=>{t()};const[l,a]=E(r,o,n);return r=o?l:r,[function(){N(e,r)},function(){T(e,r),a()}]}(t,(()=>{v()}));c=r,o()}()})),m((()=>{c&&c()})),()=>i("div",{ref:n,style:l(h)},i(g,{ref:a,spinning:e.loading},(()=>W(t))))}});var oe=a({name:"BasicModal",props:K,emits:["visible-change","height-change","cancel","ok","register"],setup(e,{slots:t,emit:o,attrs:n}){const a=u(!1),s=u(null),c=u(null),p=u(0),m=f((()=>({...e,...l(s)}))),{handleFullScreen:g,getWrapClassName:b,fullScreenRef:L}=function(e){const t=u(0),o=u(!1);return{getWrapClassName:f((()=>{const t=l(e.wrapClassName)||"";return l(o)?`fullscreen-modal ${t} `:l(t)})),handleFullScreen:function(n){n&&n.stopPropagation(),o.value=!l(o);const r=l(e.modalWrapperRef);if(!r)return;const a=r.$el;if(!a)return;const s=a.querySelector(".ant-spin-nested-loading");s&&(!l(t)&&l(o)&&(t.value=s.offsetHeight),l(o)?s.style.height=window.innerHeight-l(e.extHeightRef)+"px":s.style.height=`${l(t)}px`)},fullScreenRef:o}}({modalWrapperRef:c,extHeightRef:p,wrapClassName:h(m.value,"wrapClassName")}),x=f((()=>({...{...l(m),visible:l(a),title:void 0},wrapClassName:l(b)}))),H=f((()=>({...n,...l(x)})));async function j(t){if(null==t||t.stopPropagation(),e.closeFunc&&y(e.closeFunc)){const t=await e.closeFunc();a.value=!t}else a.value=!1,o("cancel")}r((()=>{a.value=!!e.visible})),d((()=>l(a)),(e=>{o("visible-change",e)}),{immediate:!1});const C={setModalProps:function(e){s.value=O(l(s)||{},e),Reflect.has(e,"visible")&&(a.value=!!e.visible)}};return w((e=>{o("register",C,e.uid)})),()=>i(U,{onCancel:j,...l(H)},{footer:()=>function(){const{showCancelBtn:e,cancelButtonProps:n,cancelText:r,showOkBtn:a,okType:s,okText:c,okButtonProps:u,confirmLoading:f}=l(x);return i(v,null,W(t,"insertFooter"),e&&i(R,{...n,onClick:j},(()=>r)),W(t,"centerdFooter"),a&&i(R,{type:s,loading:f,onClick:()=>{o("ok")},...u},(()=>c)),W(t,"appendFooter"))}(),closeIcon:()=>function(){const{canFullscreen:e}=l(x),t=l(L)?i(Y,{role:"full",onClick:g}):i(G,{role:"close",onClick:g});return i("div",{class:["custom-close-icon",{"can-full":e}]},e&&t,i(F,{onClick:j}))}(),title:()=>function(){const{helpMessage:e}=l(x),{title:o}=l(m);return i($,{helpMessage:e},(()=>t.title?W(t,"title"):o))}(),...z(t,["default"]),default:()=>function(){const{useWrapper:n,loading:r,wrapperProps:s}=l(x);if(!n)return W(t);const u=void 0===e.footer||e.footer?void 0:0;return i(te,{footerOffset:e.wrapperFooterOffset,fullScreen:l(L),ref:c,loading:r,visible:l(a),modalFooterHeight:u,...s,onGetExtHeight:e=>{p.value=e},onHeightChange:e=>{o("height-change",e)}},(()=>W(t)))}()})}});const ne=L({});function re(){if(!x())throw new Error("Please put useModal function in the setup function!");const e=u(null),t=u(!1),o=u("");const n=()=>{const t=l(e);if(!t)throw new Error("instance is undefined!");return t};return[function(n,r){o.value=r,m((()=>{e.value=null,t.value=!1,ne[l(o)]=null})),l(t)&&H()&&n===l(e)||(e.value=n)},{setModalProps:e=>{n().setModalProps(e)},openModal:(e=!0,t,r=!1)=>{if(n().setModalProps({visible:e}),!t)return;if(r)return ne[l(o)]=null,void(ne[l(o)]=t);j(C(ne[l(o)]),t)||(ne[l(o)]=t)}}]}const le=e=>{const t=u(null),o=x(),n=u("");if(!o)throw new Error("instance is undefined!");const a=()=>{const e=l(t);if(!e)throw new Error("instance is undefined!");return e};return r((()=>{const t=ne[l(n)];t&&e&&y(e)&&b((()=>{e(t)}))})),[(e,r)=>{S((()=>{t.value=null})),n.value=r,t.value=e,o.emit("register",e)},{changeLoading:(e=!0)=>{a().setModalProps({loading:e})},changeOkLoading:(e=!0)=>{a().setModalProps({confirmLoading:e})},closeModal:()=>{a().setModalProps({visible:!1})},setModalProps:e=>{a().setModalProps(e)}}]};P(oe);export{oe as B,Y as F,le as a,G as b,ee as c,re as u};