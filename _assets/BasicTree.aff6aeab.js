let e=document.createElement("style");e.innerHTML=".basic-tree{position:relative}.basic-tree-title{position:relative;display:inline-block;width:100%;padding-right:10px}.basic-tree-title:hover .basic-tree__action{visibility:visible}.basic-tree__content{display:inline-block;overflow:hidden}.basic-tree__actions{position:absolute;top:0;right:0;display:flex}.basic-tree__action{margin-left:4px;visibility:hidden}",document.head.appendChild(e);import{f as t,cM as s,cN as n,a as i,b as a,r as d,s as r,cH as c,ae as l,R as o}from"./index.247b4d5c.js";import"./xlsx.a48e520c.js";import"./Trigger.455696d5.js";import{o as y}from"./omit.c3408158.js";import"./_baseSlice.1123a25b.js";import"./index.b4629556.js";import"./types.e649c0d4.js";import"./index.a172b251.js";import"./index.510f2512.js";import"./index.0a240057.js";import"./index.f5b6f6ca.js";import"./CaretDownFilled.141f08ee.js";import"./FileOutlined.80510f65.js";import{T as p}from"./index.ade3f06a.js";import{D as u}from"./DownOutlined.5d128459.js";import{e as f}from"./tsxHelper.907e86d2.js";import"./index.81ea157a.js";import{u as K}from"./useExpose.e5b57157.js";import{u as h}from"./useContextMenu.f904f670.js";var m=i({name:"BasicTree",props:{replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value"],setup(e,{attrs:i,slots:m,emit:x}){const b=a({expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),k=d([]),[g]=h(),j=r((()=>{const{replaceFields:t}=e;return{children:"children",title:"title",key:"key",...t}})),v=r((()=>{const{actionList:t}=e;return{width:`calc(100% - ${18*t.length}px)`}})),_=r((()=>{let s={blockNode:!0,...i,...e,expandedKeys:b.expandedKeys,selectedKeys:b.selectedKeys,checkedKeys:b.checkedKeys,replaceFields:t(j),"onUpdate:expandedKeys":e=>{b.expandedKeys=e,x("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{b.selectedKeys=e,x("update:selectedKeys",e)},onCheck:e=>{b.checkedKeys=e,x("update:value",e)},onRightClick:D};return s=y(s,"treeData"),s})),B=r((()=>t(k))),{deleteNodeByKey:N,insertNodeByKey:C,filterByLevel:L,updateNodeByKey:w}=function(e,i){return{deleteNodeByKey:function s(n,a){if(!n)return;const d=a||t(e),{key:r,children:c}=t(i);if(c&&r)for(let e=0;e<d.length;e++){const t=d[e],i=t[c];if(t[r]===n){d.splice(e,1);break}i&&i.length&&s(n,t[c])}},insertNodeByKey:function({parentKey:a=null,node:d,push:r="push"}){const c=s(t(e));if(!a)return c[r](d),void(e.value=c);const{key:l,children:o}=t(i);o&&l&&(n(c,(e=>{e[l]===a&&(e[o]=e[o]||[],e[o][r](d))})),e.value=c)},filterByLevel:function s(n=1,a,d=1){if(!n)return[];const r=[],c=a||t(e)||[];for(let e=0;e<c.length;e++){const a=c[e],{key:l,children:o}=t(i),y=l?a[l]:"",p=o?a[o]:[];r.push(y),p&&p.length&&d<n&&(d+=1,r.push(...s(n,p,d)))}return r},updateNodeByKey:function s(n,a,d){if(!n)return;const r=d||t(e),{key:c,children:l}=t(i);if(l&&c)for(let e=0;e<r.length;e++){const t=r[e],i=t[l];if(t[c]===n){r[e]={...r[e],...a};break}i&&i.length&&s(n,a,t[l])}}}}(k,j);function A({data:s}){return s?s.map((s=>{const{title:n,key:i,children:a}=t(j),d=y(s,"title"),r=s;return o(p.TreeNode,{...d,key:null==r?void 0:r[i]},{title:()=>o("span",{class:"basic-tree-title"},o("span",{class:"basic-tree__content",style:t(v)},n&&r[n]),o("span",{class:"basic-tree__actions"}," ",function(t){const{actionList:s}=e;if(s&&0!==s.length)return s.map(((e,s)=>o("span",{key:s,class:"basic-tree__action"},e.render(t))))}(s))),default:()=>A({data:a?r[a]:[]})})})):null}async function D({event:t,node:s}){const{rightMenuList:n=[],beforeRightClick:i}=e;let a=[];a=i&&c(i)?await i(s):n,a.length&&g({event:t,items:a})}return l((()=>{k.value=e.treeData,b.expandedKeys=e.expandedKeys,b.selectedKeys=e.selectedKeys,b.checkedKeys=e.checkedKeys})),K({setExpandedKeys:function(e){b.expandedKeys=e},getExpandedKeys:function(){return b.expandedKeys},setSelectedKeys:function(e){b.selectedKeys=e},getSelectedKeys:function(){return b.selectedKeys},setCheckedKeys:function(e){b.checkedKeys=e},getCheckedKeys:function(){return b.checkedKeys},insertNodeByKey:C,deleteNodeByKey:N,updateNodeByKey:w,filterByLevel:e=>{b.expandedKeys=L(e)}}),()=>o(p,{...t(_),class:"basic-tree"},{switcherIcon:()=>o(u,null),default:()=>A({data:t(B)}),...f(m)})}});export default m;