let e=document.createElement("style");e.innerHTML=".basic-tree{position:relative}.basic-tree-title{position:relative;display:inline-block;width:100%;padding-right:10px}.basic-tree-title:hover .basic-tree__action{visibility:visible}.basic-tree__content{display:inline-block;overflow:hidden}.basic-tree__actions{position:absolute;top:0;right:0;display:flex}.basic-tree__action{margin-left:4px;visibility:hidden}",document.head.appendChild(e);import{f as t,cX as s,cY as n,a as i,b as d,r as a,s as c,cA as r,ad as l,V as o}from"./index.b40ad814.js";import"./xlsx.a48e520c.js";import"./Trigger.89356da9.js";import{o as y}from"./omit.b740cc6c.js";import"./_baseSlice.1123a25b.js";import"./index.61481b9e.js";import"./types.21061cc2.js";import"./index.a172b251.js";import"./index.dc65dc5d.js";import"./index.26143528.js";import"./index.74f71be9.js";import"./CaretDownFilled.1920ec3e.js";import"./FileOutlined.bf9767b9.js";import{T as p}from"./index.076442ce.js";import{D as u}from"./DownOutlined.5c039c25.js";import{e as f}from"./tsxHelper.bf0a56cb.js";import"./index.53deb937.js";import{u as K}from"./useExpose.a5ae0acd.js";import{u as h}from"./useContextMenu.a22eee93.js";var b=i({name:"BasicTree",props:{replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value"],setup(e,{attrs:i,slots:b,emit:m}){const x=d({expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),k=a([]),[g]=h(),j=c((()=>{const{replaceFields:t}=e;return{children:"children",title:"title",key:"key",...t}})),v=c((()=>{const{actionList:t}=e;return{width:`calc(100% - ${18*t.length}px)`}})),_=c((()=>{let s={blockNode:!0,...i,...e,expandedKeys:x.expandedKeys,selectedKeys:x.selectedKeys,checkedKeys:x.checkedKeys,replaceFields:t(j),"onUpdate:expandedKeys":e=>{x.expandedKeys=e,m("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{x.selectedKeys=e,m("update:selectedKeys",e)},onCheck:e=>{x.checkedKeys=e,m("update:value",e)},onRightClick:D};return s=y(s,"treeData"),s})),B=c((()=>t(k))),{deleteNodeByKey:N,insertNodeByKey:C,filterByLevel:L,updateNodeByKey:w}=function(e,i){return{deleteNodeByKey:function s(n,d){if(!n)return;const a=d||t(e),{key:c,children:r}=t(i);if(r&&c)for(let e=0;e<a.length;e++){const t=a[e],i=t[r];if(t[c]===n){a.splice(e,1);break}i&&i.length&&s(n,t[r])}},insertNodeByKey:function({parentKey:d=null,node:a,push:c="push"}){const r=s(t(e));if(!d)return r[c](a),void(e.value=r);const{key:l,children:o}=t(i);o&&l&&(n(r,(e=>{e[l]===d&&(e[o]=e[o]||[],e[o][c](a))})),e.value=r)},filterByLevel:function s(n=1,d,a=1){if(!n)return[];const c=[],r=d||t(e)||[];for(let e=0;e<r.length;e++){const d=r[e],{key:l,children:o}=t(i),y=l?d[l]:"",p=o?d[o]:[];c.push(y),p&&p.length&&a<n&&(a+=1,c.push(...s(n,p,a)))}return c},updateNodeByKey:function s(n,d,a){if(!n)return;const c=a||t(e),{key:r,children:l}=t(i);if(l&&r)for(let e=0;e<c.length;e++){const t=c[e],i=t[l];if(t[r]===n){c[e]={...c[e],...d};break}i&&i.length&&s(n,d,t[l])}}}}(k,j);function A({data:s}){return s?s.map((s=>{const{title:n,key:i,children:d}=t(j),a=y(s,"title"),c=s;return o(p.TreeNode,{...a,key:null==c?void 0:c[i]},{title:()=>o("span",{class:"basic-tree-title"},o("span",{class:"basic-tree__content",style:t(v)},n&&c[n]),o("span",{class:"basic-tree__actions"}," ",function(t){const{actionList:s}=e;if(s&&0!==s.length)return s.map(((e,s)=>o("span",{key:s,class:"basic-tree__action"},e.render(t))))}(s))),default:()=>A({data:d?c[d]:[]})})})):null}async function D({event:t,node:s}){const{rightMenuList:n=[],beforeRightClick:i}=e;let d=[];d=i&&r(i)?await i(s):n,d.length&&g({event:t,items:d})}return l((()=>{k.value=e.treeData,x.expandedKeys=e.expandedKeys,x.selectedKeys=e.selectedKeys,x.checkedKeys=e.checkedKeys})),K({setExpandedKeys:function(e){x.expandedKeys=e},getExpandedKeys:function(){return x.expandedKeys},setSelectedKeys:function(e){x.selectedKeys=e},getSelectedKeys:function(){return x.selectedKeys},setCheckedKeys:function(e){x.checkedKeys=e},getCheckedKeys:function(){return x.checkedKeys},insertNodeByKey:C,deleteNodeByKey:N,updateNodeByKey:w,filterByLevel:e=>{x.expandedKeys=L(e)}}),()=>o(p,{...t(_),class:"basic-tree"},{switcherIcon:()=>o(u,null),default:()=>A({data:t(B)}),...f(b)})}});export default b;