import{k as e,v as t,cB as n,a as o,s as l,cA as a,i as s,o as r,j as i,m as c,w as u,p as d,n as f,I as m,N as g,r as p,b as h,u as b,ad as y,a6 as v,ac as w,aH as S,V as C,f as k,cX as R,d7 as x,cV as O,db as F,t as I,c5 as j,O as K,F as _,Q as P,q as T,aq as A,dd as L,c_ as z,aT as D,aI as H,aJ as E,x as B,ab as M}from"./index.ef3db6d5.js";import{P as N,a as $}from"./index.deb1177b.js";import{S as V}from"./index.1a9c0d02.js";import{o as q}from"./omit.973d6ffa.js";import{s as G}from"./index.5586c30e.js";import{D as X}from"./index.d6ae3dfa.js";import{M as U}from"./index.209318a5.js";import{T as J}from"./index.23afc8d6.js";import{C as Q}from"./index.668cd44f.js";import{D as W}from"./index.eb4ddc20.js";import{I as Y}from"./index.2cd1edc8.js";import{S as Z}from"./index.99070219.js";import{C as ee}from"./CheckOutlined.952b8817.js";import{C as te}from"./CloseOutlined.c517d8dc.js";import{F as ne,a as oe}from"./FullscreenOutlined.fcc47bab.js";import{L as le,c as ae}from"./functional.8f7dc448.js";import{R as se}from"./RedoOutlined.990d63dc.js";import{R as re}from"./RightOutlined.28ca736c.js";import{S as ie}from"./SettingOutlined.a5ad0862.js";import{u as ce}from"./useTimeout.ecacd159.js";import{g as ue}from"./tsxHelper.de9bad94.js";import{g as de}from"./domUtils.6607e034.js";import{B as fe,s as me}from"./index.5b29772c.js";import{u as ge}from"./useForm.86f9369f.js";import{u as pe}from"./index.17c0dda7.js";import{u as he}from"./useWindowSizeFn.4b33812b.js";import{u as be}from"./useFullScreen.b273f378.js";import{b as ye}from"./uuid.40269c00.js";import{u as ve}from"./useExpose.95c38320.js";import{s as we}from"./index.e63d61cb.js";var Se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M840 836H184c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h656c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm0-724H184c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h656c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM610.8 378c6 0 9.4-7 5.7-11.7L515.7 238.7a7.14 7.14 0 00-11.3 0L403.6 366.3a7.23 7.23 0 005.7 11.7H476v268h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.5c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7.4-11.7-5.7-11.7H548V378h62.8z"}}]},name:"column-height",theme:"outlined"};function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(o,l){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){Ce(e,t,n[t])}))}return e}({},o,l.attrs);return e(n,t(a,{icon:Se}),null)};ke.displayName="ColumnHeightOutlined",ke.inheritAttrs=!1;var Re={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"};function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe=function(o,l){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){xe(e,t,n[t])}))}return e}({},o,l.attrs);return e(n,t(a,{icon:Re}),null)};Oe.displayName="FormOutlined",Oe.inheritAttrs=!1;var Fe=o({name:"TableTitle",components:{BasicTitle:fe},props:{title:{type:[Function,String]},getSelectRows:{type:Function},helpMessage:{type:[String,Array]}},setup:e=>({tableTitle:l((()=>{const{title:t,getSelectRows:n=(()=>{})}=e;let o=t;return a(t)&&(o=t({selectRows:n()})),o}))})});Fe.render=function(e,t,n,o,l,a){const m=s("BasicTitle");return e.tableTitle?(r(),i(m,{key:0,class:"basic-table-title",helpMessage:e.helpMessage},{default:u((()=>[d(f(e.tableTitle),1)])),_:1},8,["helpMessage"])):c("v-if",!0)};const Ie=Symbol("table");var je=o({name:"TableSetting",components:{RedoOutlined:se,ColumnHeightOutlined:ke,FullscreenExitOutlined:ne,FullscreenOutlined:oe,SettingOutlined:ie,Popover:N,Tooltip:J,Divider:W,Dropdown:X,Checkbox:Q,CheckboxGroup:Q.Group,Menu:U,MenuItem:U.Item},props:{setting:{type:Object,default:{}}},setup(e){const t=m(Ie),{toggleFullscreen:n,isFullscreenRef:o}=be(t.wrapRef),a=p([t.getSize()]),s=p([]),r=h({indeterminate:!1,checkAll:!0,checkedList:[],defaultCheckList:[]}),{t:i}=b();y((()=>{t.getColumns().length&&function(){let e=[];t.getColumns({ignoreIndex:!0,ignoreAction:!0}).forEach((t=>{e.push({label:t.title,value:t.dataIndex||t.title})})),s.value.length||(s.value=e);const n=t.getColumns().map((e=>e.dataIndex||e.title));r.checkedList=n,r.defaultCheckList=n}()}));const c=l((()=>({redo:!0,size:!0,setting:!0,fullScreen:!0,...e.setting})));return{redo:()=>t.reload(),handleTitleClick:function({key:e}){a.value=[e],t.setProps({size:e})},selectedKeysRef:a,handleFullScreen:function(){n()},isFullscreenRef:o,onCheckAllChange:function(e){r.indeterminate=!1;const n=s.value.map((e=>e.value));e.target.checked?(r.checkedList=n,t.setColumns(n)):(r.checkedList=[],t.setColumns([]))},onChange:function(e){const n=s.value.length;r.indeterminate=!!e.length&&e.length<n,r.checkAll=e.length===n,t.setColumns(e)},plainOptions:s,reset:function(){r.checkAll||(r.checkedList=[...r.defaultCheckList],r.checkAll=!0,r.indeterminate=!1,t.setColumns(r.defaultCheckList))},getSetting:c,...v(r),t:i}}});const Ke={class:"table-settings"},_e={class:"table-settings__popover-title"};je.render=function(t,n,o,l,a,m){const g=s("Divider"),p=s("RedoOutlined"),h=s("Tooltip"),b=s("ColumnHeightOutlined"),y=s("MenuItem"),v=s("Menu"),C=s("Dropdown"),k=s("Checkbox"),R=s("CheckboxGroup"),x=s("a-button"),O=s("SettingOutlined"),F=s("Popover"),I=s("FullscreenOutlined"),j=s("FullscreenExitOutlined");return r(),i("div",Ke,[e(g,{type:"vertical"}),t.getSetting.redo?(r(),i(h,{key:0,placement:"top"},{title:u((()=>[e("span",null,f(t.t("component.table.settingRedo")),1)])),default:u((()=>[e(p,{onClick:t.redo},null,8,["onClick"])])),_:1})):c("v-if",!0),t.getSetting.size?(r(),i(h,{key:1,placement:"top"},{title:u((()=>[e("span",null,f(t.t("component.table.settingDens")),1)])),default:u((()=>[e(C,{placement:"bottomCenter",trigger:["click"]},{overlay:u((()=>[e(v,{onClick:t.handleTitleClick,selectable:"",selectedKeys:t.selectedKeysRef,"onUpdate:selectedKeys":n[1]||(n[1]=e=>t.selectedKeysRef=e)},{default:u((()=>[e(y,{key:"default"},{default:u((()=>[e("span",null,f(t.t("component.table.settingDensDefault")),1)])),_:1}),e(y,{key:"middle"},{default:u((()=>[e("span",null,f(t.t("component.table.settingDensMiddle")),1)])),_:1}),e(y,{key:"small"},{default:u((()=>[e("span",null,f(t.t("component.table.settingDensSmall")),1)])),_:1})])),_:1},8,["onClick","selectedKeys"])])),default:u((()=>[e(b)])),_:1})])),_:1})):c("v-if",!0),t.getSetting.setting?(r(),i(h,{key:2,placement:"top"},{title:u((()=>[e("span",null,f(t.t("component.table.settingColumn")),1)])),default:u((()=>[e(F,{placement:"bottomLeft",trigger:"click",overlayClassName:"table-settings__cloumn-list"},{content:u((()=>[e(R,{value:t.checkedList,"onUpdate:value":n[2]||(n[2]=e=>t.checkedList=e),onChange:t.onChange},{default:u((()=>[(r(!0),i(w,null,S(t.plainOptions,(t=>(r(),i("div",{key:t.value,class:"table-settings__check-item"},[e(k,{value:t.value},{default:u((()=>[d(f(t.label),1)])),_:2},1032,["value"])])))),128))])),_:1},8,["value","onChange"])])),title:u((()=>[e("div",_e,[e(k,{indeterminate:t.indeterminate,checked:t.checkAll,"onUpdate:checked":n[3]||(n[3]=e=>t.checkAll=e),onChange:t.onCheckAllChange},{default:u((()=>[d(f(t.t("component.table.settingColumnShow")),1)])),_:1},8,["indeterminate","checked","onChange"]),e(x,{size:"small",type:"link",onClick:t.reset},{default:u((()=>[d(f(t.t("component.table.settingReset")),1)])),_:1},8,["onClick"])])])),default:u((()=>[e(O)])),_:1})])),_:1})):c("v-if",!0),t.getSetting.fullScreen?(r(),i(h,{key:3,placement:"top"},{title:u((()=>[e("span",null,f(t.t("component.table.settingFullScreen")),1)])),default:u((()=>[t.isFullscreenRef?(r(),i(j,{key:1,onClick:t.handleFullScreen},null,8,["onClick"])):(r(),i(I,{key:0,onClick:t.handleFullScreen},null,8,["onClick"]))])),_:1})):c("v-if",!0)])};var Pe=(e,t,n,o,l)=>C(w,null,ue(n,"tableTitle")||e&&C(Fe,{helpMessage:t,title:e})||C("span",null,"Â "),C("div",{class:"basic-table-toolbar"},n.toolbar&&ue(n,"toolbar"),o&&C(je,{setting:l}))),Te=({scroll:e={},columnsRef:t,summaryFunc:n,rowKey:o="key",dataSourceRef:l,rowSelectionRef:s})=>{if(!n)return;const r=a(n)?n(k(l)):[],i=R(k(t)),c=i.findIndex((e=>"INDEX"===e.flag)),u=r.some((e=>Reflect.has(e,"_row"))),d=r.some((e=>Reflect.has(e,"_index")));return-1!==c&&(d?(i[c].customRender=({record:e})=>e._index,i[c].ellipsis=!1):Reflect.deleteProperty(i[c],"customRender")),k(s)&&u&&i.unshift({width:60,title:"selection",key:"selectionKey",align:"center",customRender:({record:e})=>e._row}),r.forEach(((e,t)=>{e[o]=t})),C($,{showHeader:!1,bordered:!1,pagination:!1,dataSource:r,rowKey:o,columns:i,tableLayout:"fixed",scroll:e})};const Ae=["10","50","80","100"],Le=~~Ae[0],ze={pageField:"page",sizeField:"pageSize",listField:"items",totalField:"total"};function De({page:e,type:t,originalElement:n}){return"prev"===t?0===e?null:C(le,null):"next"===t?1===e?null:C(re,null):n}const{t:He}=b();function Ee(e,t){const{key:n,dataIndex:o,children:l}=e;e.align=e.align||"center",t&&(n||(e.key=o),x(e.ellipsis)||Object.assign(e,{ellipsis:t})),l&&l.length&&Be(l,!!t)}function Be(e,t){e&&e.forEach((e=>{const{children:n}=e;Ee(e,t),Be(n,t)}))}function Me(e,t){const n=p(k(e).columns);let o=k(e).columns;const a=l((()=>{const o=k(n);return o?(function(e,t,n){const{showIndexColumn:o,indexColumnProps:l,ellipsis:a}=k(e);let s=!1;if(n.forEach((e=>{const{children:t}=e;Ee(e,!!a);const l=t&&t.length,r=n.findIndex((e=>"INDEX"===e.flag));o&&!l?s=-1===r:o||l||-1===r||n.splice(r,1)})),!s)return;const r=n.some((e=>"left"===e.fixed));n.unshift({flag:"INDEX",width:50,title:He("component.table.index"),align:"center",customRender:({index:e})=>{const n=k(t);if(x(n))return`${e+1}`;const{current:o=1,pageSize:l=Le}=n;return(o-1)*l+e+1},...r?{fixed:"left"}:{},...l})}(e,t,o),function(e,t){const{actionColumn:n}=k(e);if(!n)return;const o=t.findIndex((e=>"ACTION"===e.flag));-1===o&&t.push({...t[o],fixed:"right",...n,flag:"ACTION"})}(e,o),o):[]}));return y((()=>{const t=I(k(e).columns);n.value=t,o=t})),{getColumnsRef:a,getColumns:function(e){const{ignoreIndex:t,ignoreAction:n}=e||{};let o=I(k(a));return t&&(o=o.filter((e=>"INDEX"!==e.flag))),n&&(o=o.filter((e=>"ACTION"!==e.flag))),o},setColumns:function(e){if(!O(e))return;if(e.length<=0)return void(n.value=[]);const t=e[0];if(F(t))n.value=e;else{const t=o.filter((t=>(t.dataIndex||`${t.key}`)&&e.includes(`${t.key}`||t.dataIndex)));n.value=t}}}}function Ne(e,{getPaginationInfo:t,setPagination:n,setLoading:o,getFieldsValue:s},r){const i=p([]);function c(e){e&&Array.isArray(e)&&e.forEach((e=>{e.key||(e.key=ye()),e.children&&e.children.length&&c(e.children)}))}y((()=>{const{dataSource:t,api:n}=k(e);!n&&t&&(i.value=t)}));const u=l((()=>k(e).autoCreateKey&&!k(e).rowKey)),d=l((()=>{const{rowKey:t}=k(e);return k(u)?"key":t})),f=l((()=>{const e=k(i);if(!e||0===e.length)return[];if(k(u)){const t=e[0],n=e[e.length-1];t&&n&&(t.key&&n.key||k(i).forEach((e=>{e.key||(e.key=ye()),e.children&&e.children.length&&c(e.children)})))}return k(i)}));async function m(l){const{api:c,searchInfo:u,fetchSetting:d,beforeFetch:f,afterFetch:g,useSearchForm:p}=k(e);if(c&&a(c))try{o(!0);const{pageField:e,sizeField:h,listField:b,totalField:y}=d||ze;let v={};const{current:w=1,pageSize:S=Le}=k(t);x(t)?v={}:(v[e]=l&&l.page||w,v[h]=S);let C={...v,...p?s():{},...u,...l?l.searchInfo:{},...l?l.sortInfo:{},...l?l.filterInfo:{}};f&&a(f)&&(C=f(C)||C);const R=await c(C),O=Array.isArray(R);let F=O?R:j(R,b);const I=O?0:j(R,y),K=Math.ceil(I/S);w>K&&(n({current:K}),m(l)),g&&a(g)&&(F=g(F)||F),i.value=F,n({total:I||0}),l&&l.page&&n({current:l.page||1}),r("fetch-success",{items:k(F),total:I})}catch(e){r("fetch-error",e),i.value=[],n({total:0})}finally{o(!1)}}return K((()=>{ce((()=>{k(e).immediate&&m()}),0)})),{getDataSourceRef:f,getDataSource:function(){return f.value},getRowKey:d,setTableData:function(e){i.value=e},getAutoCreateKey:u,fetch:m,reload:async function(e){await m(e)}}}function $e(e,{setSelectedRowKeys:t,getSelectRowKeys:n,getAutoCreateKey:o,clearSelectedRowKeys:l,emit:s}){return{customRow:(r,i)=>({onClick:c=>{s("row-click",r,i,c),null==c||c.stopPropagation();const{rowSelection:u,rowKey:d,clickToRowSelect:f}=k(e);if(!u||!f)return;const m=n(),g=function(e,t,n){return!t||n?e.key:P(t)?e[t]:a(t)?e[t(e)]:null}(r,d,k(o));if(!g)return;if("checkbox"===u.type){if(!m.includes(g))return void t([...m,g]);const e=m.findIndex((e=>e===g));return m.splice(e,1),void t(m)}if("radio"===u.type){if(!m.includes(g))return m.length&&l(),void t([g]);l()}},onDblclick:e=>{s("row-dbClick",r,i,e)},onContextmenu:e=>{s("row-contextmenu",r,i,e)},onMouseenter:e=>{s("row-mouseenter",r,i,e)},onMouseleave:e=>{s("row-mouseleave",r,i,e)}})}}var Ve=o({props:{clickToRowSelect:T.bool.def(!0),tableSetting:{type:Object},inset:T.bool,sortFn:{type:Function,default:function(e){const{field:t,order:n}=e;return{field:t,order:n}}},showTableSetting:T.bool,autoCreateKey:T.bool.def(!0),striped:T.bool.def(!0),showSummary:T.bool,summaryFunc:{type:[Function,Array],default:null},canColDrag:T.bool.def(!0),api:{type:Function,default:null},beforeFetch:{type:Function,default:null},afterFetch:{type:Function,default:null},handleSearchInfoFn:{type:Function,default:null},fetchSetting:{type:Object,default:()=>ze},immediate:T.bool.def(!0),emptyDataIsShowTable:T.bool.def(!0),searchInfo:{type:Object,default:null},useSearchForm:T.bool,formConfig:{type:Object,default:null},columns:{type:[Array],default:null},showIndexColumn:T.bool.def(!0),indexColumnProps:{type:Object,default:null},actionColumn:{type:Object,default:null},ellipsis:T.bool.def(!0),canResize:T.bool.def(!0),clearSelectOnPageChange:T.bool,resizeHeightOffset:T.number.def(0),rowSelection:{type:Object,default:null},title:{type:[String,Function],default:null},titleHelpMessage:{type:[String,Array]},maxHeight:T.number,dataSource:{type:Array,default:null},rowKey:{type:[String,Function],default:""},bordered:T.bool,pagination:{type:[Object,Boolean],default:null},loading:T.bool,rowClassName:{type:Function},scroll:{type:Object,default:null}},components:{Table:$,BasicForm:G},emits:["fetch-success","fetch-error","selection-change","register","row-click","row-dbClick","row-contextmenu","row-mouseenter","row-mouseleave"],setup(e,{attrs:t,emit:n,slots:o}){const s=p(null),r=p(null),i=p(),[c,{getFieldsValue:u}]=ge(),d=l((()=>({...e,...k(i)}))),{getLoading:f,setLoading:m}=function(e){const t=p(k(e).loading);return y((()=>{t.value=k(e).loading})),{getLoading:l((()=>k(t))),setLoading:function(e){t.value=e}}}(d),{getPaginationInfo:h,getPagination:v,setPagination:w}=function(e){const t=p({}),{t:n}=b(),o=l((()=>{const{pagination:o}=k(e);return!(x(o)&&!o)&&{current:1,pageSize:Le,size:"small",defaultPageSize:Le,showTotal:e=>n("component.table.total",{total:e}),showSizeChanger:!0,pageSizeOptions:Ae,itemRender:De,showQuickJumper:!0,...x(o)?{}:o,...k(t)}}));return{getPagination:function(){return k(o)},getPaginationInfo:o,setPagination:function(e){const n=k(o);t.value={...x(n)?{}:n,...e}}}}(d),{getColumnsRef:S,getColumns:R,setColumns:O}=Me(d,h),{getDataSourceRef:F,getDataSource:I,setTableData:j,fetch:K,getRowKey:T,reload:D,getAutoCreateKey:H}=Ne(d,{getPaginationInfo:h,setLoading:m,setPagination:w,getFieldsValue:u},n),{getScrollRef:E,redoHeight:B}=function(e,t){const n=p(null),o=pe(),a=l((()=>{const{canResize:t,scroll:n}=k(e);return t&&!(n||{}).y}));function s(){k(a)&&_((()=>{c()}))}let r,i;async function c(){const{resizeHeightOffset:l,pagination:s,maxHeight:c}=k(e);if(!k(a))return;await _();const u=k(t);if(!u)return;const d=u.$el;if(!d)return;const f=d.querySelector(".ant-table-thead ");if(!f)return;const{bottomIncludeBody:m}=de(f);let g=2;x(s)||(r||(r=d.querySelector(".ant-pagination")),g+=r?r.offsetHeight||0:24);let p=0;x(s)||(i?p+=i.offsetHeight||0:i=d.querySelector(".ant-table-footer"));let h=0;f&&(h=f.offsetHeight);const b=m-(l||0)-32-4-g-p-h;setTimeout((()=>{var e,t;n.value=null!=(e=b>c?c:b)?e:b,null==(t=null==o?void 0:o.redoModalHeight)||t.call(o)}),0)}return y((()=>{s()})),he(c,100),{getScrollRef:l((()=>{const t=k(n),{canResize:o,scroll:l}=k(e);return{x:"100%",y:o?t:null,scrollToFirstRowOnChange:!1,...l}})),redoHeight:s}}(d,s),{getRowSelectionRef:M,getSelectRows:N,clearSelectedRowKeys:$,getSelectRowKeys:V,deleteSelectRowByKey:G,setSelectedRowKeys:X}=function(e,t){const n=p([]),o=p([]);return{getRowSelectionRef:l((()=>{const{rowSelection:l}=k(e);return l?{selectedRowKeys:k(n),hideDefaultSelections:!1,onChange:(e,l)=>{n.value=e,o.value=l,t("selection-change",{keys:e,rows:l})},...l}:null})),getSelectRows:function(){return k(o)},getSelectRowKeys:function(){return k(n)},setSelectedRowKeys:function(e){n.value=e},clearSelectedRowKeys:function(){o.value=[],n.value=[]},deleteSelectRowByKey:function(e){const t=k(n).findIndex((t=>t===e));-1!==t&&k(n).splice(t,1)}}}(d,n),{customRow:U}=$e(d,{setSelectedRowKeys:X,getSelectRowKeys:V,clearSelectedRowKeys:$,getAutoCreateKey:H,emit:n}),{getRowClassName:J}=(Q=d,{getRowClassName:function(e,t){const{striped:n,rowClassName:o}=k(Q);if(n)return o&&a(o)?o(e):(t||0)%2==1?"basic-table-row__striped":""}});var Q;const W=l((()=>{const{title:e,showTableSetting:t,titleHelpMessage:n,tableSetting:l}=k(d),a=!(o.tableTitle||e||o.toolbar||t);return a&&!P(e)?{}:{title:a?null:Pe.bind(null,e,n,o,t,l)}})),Y=l((()=>{const{showSummary:e}=k(d);let n={size:"middle",...o.expandedRowRender?{expandIcon:e=>C(me,{onClick:t=>{e.onExpand(e.record,t)},expand:e.expanded})}:{},...t,customRow:U,...k(d),...k(W),scroll:k(E),loading:k(f),tableLayout:"fixed",rowSelection:k(M),rowKey:k(T),columns:k(S),pagination:k(h),dataSource:k(F)};return o.expandedRowRender&&(n=q(n,"scroll")),e&&(n.footer=Te.bind(null,{scroll:scroll,columnsRef:S,summaryFunc:k(d).summaryFunc,dataSourceRef:F,rowSelectionRef:M})),n})),Z=l((()=>{const{formConfig:e}=k(d);return{showAdvancedButton:!0,...e,compact:!0}})),ee=l((()=>{const{emptyDataIsShowTable:e,useSearchForm:t}=k(d);return!(!e&&t)||!!k(F).length}));A((()=>k(F)),(()=>{k(d).showSummary&&_((()=>{const e=k(s);if(!e)return;const t=e.$el.querySelectorAll(".ant-table-body")[0];z({el:t,name:"scroll",listener:()=>{const n=e.$el.querySelector(".ant-table-footer .ant-table-body");n&&t&&(n.scrollLeft=t.scrollLeft)},wait:0,options:!0})}))}),{immediate:!0});const te={reload:D,getSelectRows:N,clearSelectedRowKeys:$,getSelectRowKeys:V,deleteSelectRowByKey:G,setPagination:w,setTableData:j,redoHeight:B,setSelectedRowKeys:X,setColumns:O,setLoading:m,getDataSource:I,setProps:function(e){i.value=L(k(i)||{},e)},getPaginationRef:v,getColumns:R,getSize:()=>k(Y).size};var ne;return ne={...te,wrapRef:r},g(Ie,ne),ve(te),n("register",te),{tableElRef:s,getBindValues:Y,getLoading:f,registerForm:c,handleSearchInfoChange:function(e){const{handleSearchInfoFn:t}=k(d);t&&a(t)&&(e=t(e)||e),K({searchInfo:e,page:1})},getFormProps:Z,getEmptyDataIsShowTable:ee,handleTableChange:function(e,t,n){const{clearSelectOnPageChange:o,sortFn:l}=k(d);if(o&&$(),w(e),n&&a(l)){const e=l(n);K({sortInfo:e})}else K()},getRowClassName:J,wrapRef:r,tableAction:te,redoHeight:B}}});Ve.render=function(n,o,l,a,d,f){const m=s("BasicForm"),g=s("Table");return r(),i("div",{ref:"wrapRef",class:["basic-table",{"table-form-container":n.getBindValues.useSearchForm,inset:n.getBindValues.inset}]},[n.getBindValues.useSearchForm?(r(),i(m,t({key:0,submitOnReset:!0},n.getFormProps,{submitButtonOptions:{loading:n.getLoading},tableAction:n.tableAction,onRegister:n.registerForm,onSubmit:n.handleSearchInfoChange,onAdvancedChange:n.redoHeight}),D({_:2},[S(Object.keys(n.$slots),(e=>({name:e,fn:u((t=>[B(n.$slots,`form-${e}`,t)]))})))]),1040,["submitButtonOptions","tableAction","onRegister","onSubmit","onAdvancedChange"])):c("v-if",!0),H(e(g,t({ref:"tableElRef"},n.getBindValues,{rowClassName:n.getRowClassName,onChange:n.handleTableChange}),D({_:2},[S(Object.keys(n.$slots),(e=>({name:e,fn:u((t=>[B(n.$slots,e,t)]))})))]),1040,["rowClassName","onChange"]),[[E,n.getEmptyDataIsShowTable]])],2)};var qe=o({name:"TableAction",props:{imgList:{type:Array,default:null},size:{type:Number,default:40}},setup:e=>({handlePreview:function(t){const{imgList:n}=e;ae({imageList:n,index:t})}})});const Ge={key:0,class:"basic-table-img__preview"};qe.render=function(e,t,n,o,l,a){return e.imgList&&e.imgList.length?(r(),i("div",Ge,[(r(!0),i(w,null,S(e.imgList,((t,n)=>(r(),i("img",{key:t,width:e.size,onClick:t=>e.handlePreview(n),src:t},null,8,["width","onClick","src"])))),128))])):c("v-if",!0)};const Xe=new Map;Xe.set("Input",M),Xe.set("InputPassword",M.Password),Xe.set("InputNumber",Y),Xe.set("Select",V),Xe.set("Switch",Z),Xe.set("Checkbox",Q),Xe.set("CheckboxGroup",Q.Group);const Ue="editable-cell",Je=o({name:"EditableCell",props:{value:{type:String,default:""},componentProps:{type:Object,default:null},dataKey:{type:String,default:""},dataIndex:{type:String,default:""},component:{type:String,default:"Input"},editable:{type:Boolean,default:!1},editRow:{type:Boolean,default:!1},record:{type:Object},placeholder:{type:String,default:""}},emits:["submit","cancel"],setup(e,{attrs:t,emit:n}){const o=p(null),l=p(!1),a=p(e.value),s=p(e.value);function r(e){e&&e.target&&Reflect.has(e.target,"value")&&(a.value=e.target.value),(P(e)||x(e))&&(a.value=e)}function i(){l.value=!0,_((()=>{const e=k(o);e&&e.focus()}))}function c(){l.value=!1,a.value=s.value,n("cancel")}function u(){const{dataKey:t,dataIndex:n}=e;t&&n&&(e.record&&(e.record[n]=k(a)),l.value=!1)}function d(){if(e.editRow)return;const{component:t}=e;t&&t.includes("Input")&&c()}return y((()=>{s.value=e.value,x(e.editable)&&(l.value=e.editable)})),e.record&&(O(e.record.submitCbs)?e.record.submitCbs.push(u):e.record.submitCbs=[u],O(e.record.cancelCbs)?e.record.cancelCbs.push(c):e.record.cancelCbs=[c],e.record.onCancel=()=>{var t,n;O(null==(t=e.record)?void 0:t.cancelCbs)&&(null==(n=e.record)||n.cancelCbs.forEach((e=>e())))},e.record.onSubmit=()=>{var t,n;O(null==(t=e.record)?void 0:t.submitCbs)&&(null==(n=e.record)||n.submitCbs.forEach((e=>e())))}),()=>{const{component:n,componentProps:s={}}=e,f=Xe.get(n);return C("div",{class:Ue},k(l)&&C(we,{onClickOutside:d},(()=>C("div",{class:`${Ue}__wrapper`},C(f,{placeholder:e.placeholder,...{...t,...s},style:{width:"calc(100% - 48px)"},ref:o,value:k(a),size:"small",onChange:r,onPressEnter:u}),!e.editRow&&C("div",{class:`${Ue}__action`},C(ee,{class:[`${Ue}__icon`,"mx-2"],onClick:u}),C(te,{class:[`${Ue}__icon `],onClick:c}))))),function(){const{value:t}=e;return e.editRow?k(l)?null:t:!k(l)&&C("div",{class:`${Ue}__normal`,onClick:i},t,C(Oe,{class:`${Ue}__normal-icon`}))}())}}});function Qe({dataIndex:e,component:t,componentProps:n={},placeholder:o}){return({text:l,record:a})=>C(Je,{...n,placeholder:o,value:l,record:a,dataKey:a.key,dataIndex:e,component:t})}function We({dataIndex:e,component:t,componentProps:n={},placeholder:o}){return({text:l,record:a})=>C(Je,{...n,value:l,placeholder:o,editRow:!0,editable:a.editable,dataKey:a.key,record:a,dataIndex:e,component:t})}var Ye=o({name:"EditTableHeaderIcon",components:{FormOutlined:Oe},props:{title:{type:String,default:""}}});Ye.render=function(t,n,o,l,a,c){const u=s("FormOutlined");return r(),i("span",null,[d(f(t.title)+" ",1),e(u,{class:"ml-2"})])};export{Oe as F,qe as a,Ye as b,We as c,Qe as r,Ve as s};