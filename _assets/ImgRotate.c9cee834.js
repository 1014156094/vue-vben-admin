let e=document.createElement("style");e.innerHTML=".ir-dv{position:relative;display:flex;flex-direction:column;align-items:center}.ir-dv-img__wrap{position:relative;overflow:hidden;border-radius:50%}.ir-dv-img__wrap img{width:100%;border-radius:50%}.ir-dv-img__wrap img.to-origin{transition:transform .3s}.ir-dv-img__tip{position:absolute;bottom:10px;left:0;z-index:1;display:block;width:100%;height:30px;font-size:12px;line-height:30px;color:#fff;text-align:center}.ir-dv-img__tip.success{background:rgba(85,209,135,.6)}.ir-dv-img__tip.error{background:rgba(237,111,111,.6)}.ir-dv-img__tip.normal{background:rgba(0,0,0,.3)}.ir-dv-drag__bar{margin-top:20px}",document.head.appendChild(e);import{a as i,r as t,b as r,u as s,aU as o,I as a,ay as n,f as m,cD as d}from"./index.9ddc54c2.js";import"./xlsx.a48e520c.js";import"./_baseSlice.1123a25b.js";import"./_stringToArray.943e7f6c.js";import"./upperFirst.d989a75d.js";import"./CheckOutlined.60746704.js";import"./DoubleRightOutlined.b3f2c282.js";import{u as g}from"./useTimeout.261f68e1.js";import"./tsxHelper.877239e6.js";import{h as c}from"./domUtils.34789ce4.js";import"./useExpose.71340b2e.js";import{r as p,B as l}from"./DragVerify.37950893.js";var u=i({name:"ImgRotateDargVerify",inheritAttrs:!1,props:p,emits:["success","change","update:value"],setup(e,{emit:i,attrs:p}){const u=t(null),h=r({showTip:!1,isPassing:!1,imgStyle:{},randomRotate:0,currentRotate:0,toOrigin:!1,startTime:0,endTime:0,draged:!1}),{t:f}=s();o((()=>h.isPassing),(e=>{if(e){const{startTime:t,endTime:r}=h;i("success",{isPassing:e,time:((r-t)/1e3).toFixed(1)}),i("change",e),i("update:value",e)}}));const v=a((()=>{const{imgWrapStyle:i,imgWidth:t}=e;return{width:`${t}px`,height:`${t}px`,...i}})),_=a((()=>{const{minDegree:i,maxDegree:t}=e;return i===t?Math.floor(1+1*Math.random())/10+1:1}));function x(){h.startTime=(new Date).getTime()}function b(i){h.draged=!0;const{imgWidth:t,height:r,maxDegree:s}=e,{moveX:o}=i,a=Math.ceil(o/(t-parseInt(r))*s*m(_));h.currentRotate=a,h.imgStyle=c("transform",`rotateZ(${h.randomRotate-a}deg)`)}function T(){const{minDegree:i,maxDegree:t}=e,r=Math.floor(i+Math.random()*(t-i));h.randomRotate=r,h.imgStyle=c("transform",`rotateZ(${r}deg)`)}function w(){const{randomRotate:i,currentRotate:t}=h,{diffDegree:r}=e;Math.abs(i-t)>=(r||20)?(h.imgStyle=c("transform",`rotateZ(${i}deg)`),h.toOrigin=!0,g((()=>{h.toOrigin=!1,h.showTip=!0}),300)):(h.isPassing=!0,h.endTime=(new Date).getTime()),h.showTip=!0}function y(){h.showTip=!1;const e=m(u);e&&(h.isPassing=!1,e.resume(),T())}const j=d();return j&&(j.resume=y),()=>{const{src:i}=e,{toOrigin:t,isPassing:r,startTime:s,endTime:o}=h,a=[];t&&a.push("to-origin");const d=(o-s)/1e3;return n("div",{class:"ir-dv"},n("div",{class:"ir-dv-img__wrap",style:m(v)},n("img",{src:i,onLoad:T,width:parseInt(e.width),class:a,style:h.imgStyle,onClick:()=>{y()}}),h.showTip&&n("span",{class:["ir-dv-img__tip",h.isPassing?"success":"error"]},h.isPassing?f("component.verify.time",{time:d.toFixed(1)}):f("component.verify.error")),!h.showTip&&!h.draged&&n("span",{class:["ir-dv-img__tip","normal"]},"t('redoTip')")),n(l,{class:"ir-dv-drag__bar",onMove:b,onEnd:w,onStart:x,ref:u,...{...p,...e},value:r,isSlot:!0}))}}});export default u;