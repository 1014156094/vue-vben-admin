let e=document.createElement("style");e.innerHTML=".basic-tree{position:relative}.basic-tree-title{position:relative;display:inline-block;width:100%;padding-right:10px}.basic-tree-title:hover .basic-tree__action{visibility:visible}.basic-tree__content{display:inline-block;overflow:hidden}.basic-tree__actions{position:absolute;top:0;right:0;display:flex}.basic-tree__action{margin-left:4px;visibility:hidden}",document.head.appendChild(e);import{k as t,J as n,cR as s,f as i,d5 as a,d6 as r,a as c,b as d,r as l,I as o,_ as y,aN as p,Y as u,az as f}from"./index.82957b1b.js";import"./xlsx.9d951958.js";import"./Trigger.98e610ea.js";import{o as h}from"./omit.f6a7e4f4.js";import"./_baseSlice.1123a25b.js";import"./index.6704e890.js";import"./RightOutlined.3c04d9c6.js";import"./types.231a34f8.js";import"./index.e2ac5270.js";import"./index.cf36961f.js";import"./index.78c9b85a.js";import"./CaretDownFilled.24d6d3f2.js";import{T as K}from"./index.b593e60f.js";import{e as b}from"./tsxHelper.265b5a74.js";import"./index.267a6ea8.js";import{u as m}from"./useExpose.a2f447f4.js";import{u as g}from"./useContextMenu.e3ebc7eb.js";var x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e,i){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){k(e,t,n[t])}))}return e}({},e,i.attrs);return t(s,n(a,{icon:x}),null)};v.displayName="DownOutlined",v.inheritAttrs=!1;var j=c({name:"BasicTree",props:{replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value","get"],setup(e,{attrs:t,slots:n,emit:s}){const c=d({expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),x=l([]),[k]=g(),j=o((()=>{const{replaceFields:t}=e;return{children:"children",title:"title",key:"key",...t}})),_=o((()=>{const{actionList:t}=e;return{width:`calc(100% - ${18*t.length}px)`}})),B=o((()=>{let n={blockNode:!0,...t,...e,expandedKeys:c.expandedKeys,selectedKeys:c.selectedKeys,checkedKeys:c.checkedKeys,replaceFields:i(j),"onUpdate:expandedKeys":e=>{c.expandedKeys=e,s("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{c.selectedKeys=e,s("update:selectedKeys",e)},onCheck:e=>{c.checkedKeys=e,s("update:value",e)},onRightClick:D};return n=h(n,"treeData"),n})),w=o((()=>i(x))),{deleteNodeByKey:N,insertNodeByKey:O,filterByLevel:L,updateNodeByKey:C}=function(e,t){return{deleteNodeByKey:function n(s,a){if(!s)return;const r=a||i(e),{key:c,children:d}=i(t);if(d&&c)for(let e=0;e<r.length;e++){const t=r[e],i=t[d];if(t[c]===s){r.splice(e,1);break}i&&i.length&&n(s,t[d])}},insertNodeByKey:function({parentKey:n=null,node:s,push:c="push"}){const d=a(i(e));if(!n)return d[c](s),void(e.value=d);const{key:l,children:o}=i(t);o&&l&&(r(d,(e=>{e[l]===n&&(e[o]=e[o]||[],e[o][c](s))})),e.value=d)},filterByLevel:function n(s=1,a,r=1){if(!s)return[];const c=[],d=a||i(e)||[];for(let e=0;e<d.length;e++){const a=d[e],{key:l,children:o}=i(t),y=l?a[l]:"",p=o?a[o]:[];c.push(y),p&&p.length&&r<s&&(r+=1,c.push(...n(s,p,r)))}return c},updateNodeByKey:function n(s,a,r){if(!s)return;const c=r||i(e),{key:d,children:l}=i(t);if(l&&d)for(let e=0;e<c.length;e++){const t=c[e],i=t[l];if(t[d]===s){c[e]={...c[e],...a};break}i&&i.length&&n(s,a,t[l])}}}}(x,j);function A({data:t}){return t?t.map((t=>{const{title:n,key:s,children:a}=i(j),r=h(t,"title"),c=t;return f(K.TreeNode,{...r,key:null==c?void 0:c[s]},{title:()=>f("span",{class:"basic-tree-title"},f("span",{class:"basic-tree__content",style:i(_)},n&&c[n]),f("span",{class:"basic-tree__actions"}," ",function(t){const{actionList:n}=e;if(n&&0!==n.length)return n.map(((e,n)=>f("span",{key:n,class:"basic-tree__action"},e.render(t))))}(t))),default:()=>A({data:a?c[a]:[]})})})):null}async function D({event:t,node:n}){const{rightMenuList:s=[],beforeRightClick:i}=e;let a=[];a=i&&y(i)?await i(n):s,a.length&&k({event:t,items:a})}p((()=>{x.value=e.treeData,c.expandedKeys=e.expandedKeys,c.selectedKeys=e.selectedKeys,c.checkedKeys=e.checkedKeys}));const E={setExpandedKeys:function(e){c.expandedKeys=e},getExpandedKeys:function(){return c.expandedKeys},setSelectedKeys:function(e){c.selectedKeys=e},getSelectedKeys:function(){return c.selectedKeys},setCheckedKeys:function(e){c.checkedKeys=e},getCheckedKeys:function(){return c.checkedKeys},insertNodeByKey:O,deleteNodeByKey:N,updateNodeByKey:C,filterByLevel:e=>{c.expandedKeys=L(e)}};return m(E),u((()=>{s("get",E)})),()=>f(K,{...i(B),class:"basic-tree"},{switcherIcon:()=>f(v,null),default:()=>A({data:i(w)}),...b(n)})}});export default j;