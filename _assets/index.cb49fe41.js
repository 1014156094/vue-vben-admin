import{a as e,b as t,r as n,I as i,aN as s,ay as o,c4 as r,f as a,dn as c,k as l,dp as m,aR as u}from"./index.5c6c90f9.js";import{C as d}from"./CloseOutlined.d97483db.js";import{L as g}from"./LeftOutlined.fb5a19ac.js";import{L as v}from"./LoadingOutlined.c197daea.js";import{R as f}from"./RightOutlined.68bb84f7.js";const p={show:{type:Boolean,default:!1},imageList:{type:[Array],default:null},index:{type:Number,default:0}};var w,_;(_=w||(w={}))[_.LOADING=0]="LOADING",_[_.DONE=1]="DONE",_[_.FAIL=2]="FAIL";const L="img-preview";var h=e({name:"ImagePreview",props:p,setup(e){const c=t({currentUrl:"",imgScale:1,imgRotate:0,imgTop:0,imgLeft:0,status:0,currentIndex:0,moveX:0,moveY:0,show:e.show}),l=n(null),m=n(null);function u(){!function(){const e=a(l);if(!e)return;e.onmousewheel=w,document.body.addEventListener("DOMMouseScroll",w),document.ondragstart=function(){return!1}}();const{index:t,imageList:n}=e;if(!n||!n.length)throw new Error("imageList is undefined");c.currentIndex=t,I(n[t])}function p(){c.imgScale=1,c.imgRotate=0,c.imgTop=0,c.imgLeft=0}function w(e){(e=e||window.event).delta=e.wheelDelta||-e.detail,e.preventDefault(),e.delta>0&&_(.015),e.delta<0&&_(-.015)}function _(e){c.imgScale<=.2&&e<0||(c.imgScale+=e)}function h(e){c.imgRotate+=e}function x(){const e=a(m);e&&(e.onmousemove=null)}function I(e){c.status=0;const t=new Image;t.src=e,t.onload=()=>{c.currentUrl=e,c.status=1},t.onerror=()=>{c.status=2}}function b(e){e&&e.stopPropagation(),c.show=!1,document.body.removeEventListener("DOMMouseScroll",w),document.ondragstart=null}function y(){p()}function C(e){e=e||window.event,c.moveX=e.clientX,c.moveY=e.clientY;const t=a(m);t&&(t.onmousemove=O)}function O(e){(e=e||window.event).preventDefault();const t=e.clientX-c.moveX,n=e.clientY-c.moveY;c.imgLeft+=t,c.imgTop+=n,c.moveX=e.clientX,c.moveY=e.clientY}const D=i((()=>{const{imgScale:e,imgRotate:t,imgTop:n,imgLeft:i}=c;return{transform:`scale(${e}) rotate(${t}deg)`,marginTop:`${n}px`,marginLeft:`${i}px`}})),k=i((()=>{const{imageList:t}=e;return t.length>1}));s((()=>{e.show&&u(),e.imageList&&p()}));const R=t=>a(k)?o("div",{class:["img-preview__arrow",t],onClick:()=>function(t){const{currentIndex:n}=c,{imageList:i}=e;"left"===t&&(c.currentIndex--,n<=0&&(c.currentIndex=i.length-1)),"right"===t&&(c.currentIndex++,n>=i.length-1&&(c.currentIndex=0)),I(i[c.currentIndex])}(t)},o("left"===t?g:f,null)):null;return()=>c.show&&o("div",{class:L,ref:l,onMouseup:x},o("div",{class:"img-preview-content"},o(r,{indicator:o(v,{style:"font-size: 24px",spin:!0}),spinning:!0,class:["img-preview-image",{hidden:0!==c.status}]}),o("img",{style:a(D),class:["img-preview-image",1===c.status?"":"hidden"],ref:m,src:c.currentUrl,onMousedown:C}),o("div",{class:"img-preview__close",onClick:b},o(d,{class:"img-preview__close-icon"})),(()=>{if(!a(k))return null;const{currentIndex:t}=c,{imageList:n}=e;return o("div",{class:"img-preview__index"},t+1," / ",n.length)})(),o("div",{class:"img-preview__controller"},o("div",{class:"img-preview__controller-item",onClick:()=>_(-.15)},o("img",{src:"./_assets/unscale.50a147e7.svg"})),o("div",{class:"img-preview__controller-item",onClick:()=>_(.15)},o("img",{src:"./_assets/scale.5b254733.svg"})),o("div",{class:"img-preview__controller-item",onClick:y},o("img",{src:"./_assets/resume.7a838909.svg"})),o("div",{class:"img-preview__controller-item",onClick:()=>h(-90)},o("img",{src:"./_assets/unrotate.a3dc2050.svg"})),o("div",{class:"img-preview__controller-item",onClick:()=>h(90)},o("img",{src:"./_assets/p-rotate.54a3ac67.svg"}))),R("left"),R("right")))}});let x=null;function I(e){if(!c)return;const{imageList:t,show:n=!0,index:i=0}=e,s={},o=document.createElement("div");s.imageList=t,s.show=n,s.index=i,x=l(h,s),m(x,o),document.body.appendChild(o)}u((()=>import("./index.8e4ba6d5.js")));export{I as c};