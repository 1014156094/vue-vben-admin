import{dm as r,a as e,r as i,u as o,X as t,R as s,d5 as a,dx as n,i as d,o as m,j as l,aM as p,aW as c,aq as f,ar as j,k as u,w as b,p as x,n as g}from"./index.82957b1b.js";import"./xlsx.9d951958.js";import"./useSortable.f9571e68.js";import"./index.a054df69.js";import"./Trigger.98e610ea.js";import"./omit.f6a7e4f4.js";import"./_baseSlice.1123a25b.js";import"./DownOutlined.aed85997.js";import"./CheckOutlined.1fa89dc8.js";import{f as E}from"./index.4d75401e.js";import"./index.449c490a.js";import"./colors.757dc4a4.js";import"./index.6704e890.js";import"./RightOutlined.3c04d9c6.js";import"./types.231a34f8.js";import"./index.b5588833.js";import"./_stringToArray.943e7f6c.js";import"./domUtils.3ebda32c.js";import"./index.e2ac5270.js";import"./index.8d103225.js";import"./UpOutlined.cd1bd02a.js";import"./LeftOutlined.c7fc7fef.js";import"./index.cf36961f.js";import"./index.f9a7bb78.js";import"./index.78c9b85a.js";import"./index.c8001e10.js";import"./index.cf4bc0ce.js";import"./index.dba233bb.js";import"./zh_CN.0242bd16.js";import"./index.fb30cf7f.js";import"./index.cf867a3c.js";import"./index.e410f5b7.js";import"./CaretDownFilled.24d6d3f2.js";import"./transButton.1b860824.js";import"./index.fe9d95e6.js";import"./CheckOutlined.2f0f2ab8.js";import"./CloseOutlined.96ea54bd.js";import{s as y}from"./index.ff074fe6.js";import"./FullscreenOutlined.42f0d2f2.js";import"./index.d364dd82.js";import"./RightOutlined.e5ee841f.js";import"./SettingOutlined.8836b328.js";import"./index.d658589e.js";import"./useTimeout.c9ec92d1.js";import"./tsxHelper.265b5a74.js";import"./index.d5115b9a.js";import"./animation.42dceed5.js";import"./useScrollTo.a7ef93d5.js";import"./index.fa2137f5.js";import"./useDescription.927c1fc7.js";import"./useAttrs.42205efa.js";import{a as R}from"./index.8cf17bff.js";import"./useWindowSizeFn.8b84c5f6.js";import"./index.267a6ea8.js";import"./uuid.40269c00.js";import"./download.3408c5a6.js";import"./useForm.045adca8.js";import"./useExpose.a2f447f4.js";import{u as C}from"./useTable.83b6c213.js";import{getColumns as T}from"./data.f22b9b6a.js";import h from"./DetailModal.66503db0.js";var w;(w||(w={})).Error="/error";var k=e({name:"ErrorHandler",components:{DetailModal:h,BasicTable:y,TableAction:E},setup(){const e=i(),d=i([]),{t:m}=o(),[l,{setTableData:p}]=C({title:m("sys.errorLog.tableTitle"),columns:T(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[c,{openModal:f}]=R();return t((()=>n.getErrorInfoState),(r=>{s((()=>{p(a(r))}))}),{immediate:!0}),{register:l,registerModal:c,handleDetail:function(r){e.value=r,f(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){d.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:async function(){await r.request({url:w.Error,method:"GET"})},imgListRef:d,rowInfoRef:e,t:m}}});const D={class:"p-4"};k.render=function(r,e,i,o,t,s){const a=d("DetailModal"),n=d("a-button"),E=d("TableAction"),y=d("BasicTable");return m(),l("div",D,[(m(!0),l(p,null,c(r.imgListRef,(r=>f((m(),l("img",{key:r,src:r},null,8,["src"])),[[j,!1]]))),128)),u(a,{info:r.rowInfoRef,onRegister:r.registerModal},null,8,["info","onRegister"]),u(y,{onRegister:r.register,class:"error-handle-table"},{toolbar:b((()=>[u(n,{onClick:r.fireVueError,type:"primary"},{default:b((()=>[x(g(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),u(n,{onClick:r.fireResourceError,type:"primary"},{default:b((()=>[x(g(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),u(n,{onClick:r.fireAjaxError,type:"primary"},{default:b((()=>[x(g(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:b((({record:e})=>[u(E,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default k;