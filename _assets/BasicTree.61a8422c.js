let e=document.createElement("style");e.innerHTML=".basic-tree{position:relative}.basic-tree-title{position:relative;display:inline-block;width:100%;padding-right:10px}.basic-tree-title:hover .basic-tree__action{visibility:visible}.basic-tree__content{display:inline-block;overflow:hidden}.basic-tree__actions{position:absolute;top:0;right:0;display:flex}.basic-tree__action{margin-left:4px;visibility:hidden}",document.head.appendChild(e);import{k as t,J as n,cQ as s,f as i,d4 as r,d5 as a,a as c,b as d,r as l,I as o,Z as y,aM as p,ay as u}from"./index.c5d8d2c2.js";import"./xlsx.9d951958.js";import"./Trigger.8423b189.js";import{o as f}from"./omit.613852c9.js";import"./_baseSlice.1123a25b.js";import"./index.5e68bb45.js";import"./RightOutlined.ac5b2c4e.js";import"./types.02846160.js";import"./index.ebbe171f.js";import"./index.2b179f06.js";import"./index.8a1a96c3.js";import"./CaretDownFilled.5b4eb00d.js";import{T as h}from"./index.cec61e84.js";import{e as K}from"./tsxHelper.87c58488.js";import"./index.00d20f2e.js";import{u as b}from"./useExpose.0843e844.js";import{u as m}from"./useContextMenu.2fbcff51.js";var x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e,i){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){g(e,t,n[t])}))}return e}({},e,i.attrs);return t(s,n(r,{icon:x}),null)};k.displayName="DownOutlined",k.inheritAttrs=!1;var v=c({name:"BasicTree",props:{replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value"],setup(e,{attrs:t,slots:n,emit:s}){const c=d({expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),x=l([]),[g]=m(),v=o((()=>{const{replaceFields:t}=e;return{children:"children",title:"title",key:"key",...t}})),j=o((()=>{const{actionList:t}=e;return{width:`calc(100% - ${18*t.length}px)`}})),_=o((()=>{let n={blockNode:!0,...t,...e,expandedKeys:c.expandedKeys,selectedKeys:c.selectedKeys,checkedKeys:c.checkedKeys,replaceFields:i(v),"onUpdate:expandedKeys":e=>{c.expandedKeys=e,s("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{c.selectedKeys=e,s("update:selectedKeys",e)},onCheck:e=>{c.checkedKeys=e,s("update:value",e)},onRightClick:A};return n=f(n,"treeData"),n})),B=o((()=>i(x))),{deleteNodeByKey:w,insertNodeByKey:N,filterByLevel:O,updateNodeByKey:L}=function(e,t){return{deleteNodeByKey:function n(s,r){if(!s)return;const a=r||i(e),{key:c,children:d}=i(t);if(d&&c)for(let e=0;e<a.length;e++){const t=a[e],i=t[d];if(t[c]===s){a.splice(e,1);break}i&&i.length&&n(s,t[d])}},insertNodeByKey:function({parentKey:n=null,node:s,push:c="push"}){const d=r(i(e));if(!n)return d[c](s),void(e.value=d);const{key:l,children:o}=i(t);o&&l&&(a(d,(e=>{e[l]===n&&(e[o]=e[o]||[],e[o][c](s))})),e.value=d)},filterByLevel:function n(s=1,r,a=1){if(!s)return[];const c=[],d=r||i(e)||[];for(let e=0;e<d.length;e++){const r=d[e],{key:l,children:o}=i(t),y=l?r[l]:"",p=o?r[o]:[];c.push(y),p&&p.length&&a<s&&(a+=1,c.push(...n(s,p,a)))}return c},updateNodeByKey:function n(s,r,a){if(!s)return;const c=a||i(e),{key:d,children:l}=i(t);if(l&&d)for(let e=0;e<c.length;e++){const t=c[e],i=t[l];if(t[d]===s){c[e]={...c[e],...r};break}i&&i.length&&n(s,r,t[l])}}}}(x,v);function C({data:t}){return t?t.map((t=>{const{title:n,key:s,children:r}=i(v),a=f(t,"title"),c=t;return u(h.TreeNode,{...a,key:null==c?void 0:c[s]},{title:()=>u("span",{class:"basic-tree-title"},u("span",{class:"basic-tree__content",style:i(j)},n&&c[n]),u("span",{class:"basic-tree__actions"}," ",function(t){const{actionList:n}=e;if(n&&0!==n.length)return n.map(((e,n)=>u("span",{key:n,class:"basic-tree__action"},e.render(t))))}(t))),default:()=>C({data:r?c[r]:[]})})})):null}async function A({event:t,node:n}){const{rightMenuList:s=[],beforeRightClick:i}=e;let r=[];r=i&&y(i)?await i(n):s,r.length&&g({event:t,items:r})}return p((()=>{x.value=e.treeData,c.expandedKeys=e.expandedKeys,c.selectedKeys=e.selectedKeys,c.checkedKeys=e.checkedKeys})),b({setExpandedKeys:function(e){c.expandedKeys=e},getExpandedKeys:function(){return c.expandedKeys},setSelectedKeys:function(e){c.selectedKeys=e},getSelectedKeys:function(){return c.selectedKeys},setCheckedKeys:function(e){c.checkedKeys=e},getCheckedKeys:function(){return c.checkedKeys},insertNodeByKey:N,deleteNodeByKey:w,updateNodeByKey:L,filterByLevel:e=>{c.expandedKeys=O(e)}}),()=>u(h,{...i(_),class:"basic-tree"},{switcherIcon:()=>u(k,null),default:()=>C({data:i(B)}),...K(n)})}});export default v;