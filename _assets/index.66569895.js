import{a as e,b as t,r as n,I as i,aN as s,ay as o,c8 as r,f as c,ds as a,k as l,dt as m,aU as u}from"./index.29c86768.js";import{C as d}from"./CloseOutlined.4823f3c8.js";import{L as g}from"./LeftOutlined.4f6a12c7.js";import{L as v}from"./LoadingOutlined.ec80bfa3.js";import{R as f}from"./RightOutlined.76f7bf3c.js";const p={show:{type:Boolean,default:!1},imageList:{type:[Array],default:null},index:{type:Number,default:0}};var w,_;(_=w||(w={}))[_.LOADING=0]="LOADING",_[_.DONE=1]="DONE",_[_.FAIL=2]="FAIL";const L="img-preview";var h=e({name:"ImagePreview",props:p,setup(e){const a=t({currentUrl:"",imgScale:1,imgRotate:0,imgTop:0,imgLeft:0,status:0,currentIndex:0,moveX:0,moveY:0,show:e.show}),l=n(null),m=n(null);function u(){!function(){const e=c(l);if(!e)return;e.onmousewheel=w,document.body.addEventListener("DOMMouseScroll",w),document.ondragstart=function(){return!1}}();const{index:t,imageList:n}=e;if(!n||!n.length)throw new Error("imageList is undefined");a.currentIndex=t,I(n[t])}function p(){a.imgScale=1,a.imgRotate=0,a.imgTop=0,a.imgLeft=0}function w(e){(e=e||window.event).delta=e.wheelDelta||-e.detail,e.preventDefault(),e.delta>0&&_(.015),e.delta<0&&_(-.015)}function _(e){a.imgScale<=.2&&e<0||(a.imgScale+=e)}function h(e){a.imgRotate+=e}function x(){const e=c(m);e&&(e.onmousemove=null)}function I(e){a.status=0;const t=new Image;t.src=e,t.onload=()=>{a.currentUrl=e,a.status=1},t.onerror=()=>{a.status=2}}function y(e){e&&e.stopPropagation(),a.show=!1,document.body.removeEventListener("DOMMouseScroll",w),document.ondragstart=null}function C(){p()}function O(e){e=e||window.event,a.moveX=e.clientX,a.moveY=e.clientY;const t=c(m);t&&(t.onmousemove=D)}function D(e){(e=e||window.event).preventDefault();const t=e.clientX-a.moveX,n=e.clientY-a.moveY;a.imgLeft+=t,a.imgTop+=n,a.moveX=e.clientX,a.moveY=e.clientY}const b=i((()=>{const{imgScale:e,imgRotate:t,imgTop:n,imgLeft:i}=a;return{transform:`scale(${e}) rotate(${t}deg)`,marginTop:`${n}px`,marginLeft:`${i}px`}})),k=i((()=>{const{imageList:t}=e;return t.length>1}));s((()=>{e.show&&u(),e.imageList&&p()}));const S=t=>c(k)?o("div",{class:["img-preview__arrow",t],onClick:()=>function(t){const{currentIndex:n}=a,{imageList:i}=e;"left"===t&&(a.currentIndex--,n<=0&&(a.currentIndex=i.length-1)),"right"===t&&(a.currentIndex++,n>=i.length-1&&(a.currentIndex=0)),I(i[a.currentIndex])}(t)},o("left"===t?g:f,null)):null;return()=>a.show&&o("div",{class:L,ref:l,onMouseup:x},o("div",{class:"img-preview-content"},o(r,{indicator:o(v,{style:"font-size: 24px",spin:!0}),spinning:!0,class:["img-preview-image",{hidden:0!==a.status}]}),o("img",{style:c(b),class:["img-preview-image",1===a.status?"":"hidden"],ref:m,src:a.currentUrl,onMousedown:O}),o("div",{class:"img-preview__close",onClick:y},o(d,{class:"img-preview__close-icon"})),(()=>{if(!c(k))return null;const{currentIndex:t}=a,{imageList:n}=e;return o("div",{class:"img-preview__index"},t+1," / ",n.length)})(),o("div",{class:"img-preview__controller"},o("div",{class:"img-preview__controller-item",onClick:()=>_(-.15)},o("img",{src:"./_assets/unscale.50a147e7.svg"})),o("div",{class:"img-preview__controller-item",onClick:()=>_(.15)},o("img",{src:"./_assets/scale.5b254733.svg"})),o("div",{class:"img-preview__controller-item",onClick:C},o("img",{src:"./_assets/resume.7a838909.svg"})),o("div",{class:"img-preview__controller-item",onClick:()=>h(-90)},o("img",{src:"./_assets/unrotate.a3dc2050.svg"})),o("div",{class:"img-preview__controller-item",onClick:()=>h(90)},o("img",{src:"./_assets/p-rotate.54a3ac67.svg"}))),S("left"),S("right")))}});let x=null;function I(e){if(!a)return;const{imageList:t,show:n=!0,index:i=0}=e,s={},o=document.createElement("div");s.imageList=t,s.show=n,s.index=i,x=l(h,s),m(x,o),document.body.appendChild(o)}u((()=>import("./index.5adce503.js")));export{I as c};