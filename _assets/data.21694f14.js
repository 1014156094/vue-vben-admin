import{f as e,c7 as t,d5 as s,a as n,b as a,r as d,v as l,a6 as c,a7 as r,a2 as i,by as y}from"./index.3e933661.js";import{o}from"./omit.e1a1ead6.js";import{D as u}from"./DownOutlined.aa15d04e.js";import{T as p}from"./index.62e11f00.js";import{u as f}from"./useExpose.a4960c9f.js";import{u as K}from"./useContextMenu.bf233443.js";var h=n({name:"BasicTree",props:{replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value"],setup(n,{attrs:h,slots:k,emit:m}){const x=a({expandedKeys:n.expandedKeys||[],selectedKeys:n.selectedKeys||[],checkedKeys:n.checkedKeys||[]}),g=d([]),[v]=K(),b=l((()=>{const{replaceFields:e}=n;return{children:"children",title:"title",key:"key",...e}})),B=l((()=>{const{actionList:e}=n;return{width:`calc(100% - ${18*e.length}px)`}})),N=l((()=>{let t={blockNode:!0,...h,...n,expandedKeys:x.expandedKeys,selectedKeys:x.selectedKeys,checkedKeys:x.checkedKeys,replaceFields:e(b),"onUpdate:expandedKeys":e=>{x.expandedKeys=e,m("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{x.selectedKeys=e,m("update:selectedKeys",e)},onCheck:e=>{x.checkedKeys=e,m("update:value",e)},onRightClick:w};return t=o(t,"treeData"),t})),L=l((()=>e(g))),{deleteNodeByKey:j,insertNodeByKey:C,filterByLevel:A,updateNodeByKey:_}=function(n,a){return{deleteNodeByKey:function t(s,d){if(!s)return;const l=d||e(n),{key:c,children:r}=e(a);if(r&&c)for(let e=0;e<l.length;e++){const n=l[e],a=n[r];if(n[c]===s){l.splice(e,1);break}a&&a.length&&t(s,n[r])}},insertNodeByKey:function({parentKey:d=null,node:l,push:c="push"}){const r=t(e(n));if(!d)return r[c](l),void(n.value=r);const{key:i,children:y}=e(a);y&&i&&(s(r,(e=>{e[i]===d&&(e[y]=e[y]||[],e[y][c](l))})),n.value=r)},filterByLevel:function t(s=1,d,l=1){if(!s)return[];const c=[],r=d||e(n)||[];for(let n=0;n<r.length;n++){const d=r[n],{key:i,children:y}=e(a),o=i?d[i]:"",u=y?d[y]:[];c.push(o),u&&u.length&&l<s&&(l+=1,c.push(...t(s,u,l)))}return c},updateNodeByKey:function t(s,d,l){if(!s)return;const c=l||e(n),{key:r,children:i}=e(a);if(i&&r)for(let e=0;e<c.length;e++){const n=c[e],a=n[i];if(n[r]===s){c[e]={...c[e],...d};break}a&&a.length&&t(s,d,n[i])}}}}(g,b);function D({data:t}){return t?t.map((t=>{const{title:s,key:a,children:d}=e(b),l=o(t,"title"),c=t;return i(p.TreeNode,{...l,key:null==c?void 0:c[a]},{title:()=>i("span",{class:"basic-tree-title"},i("span",{class:"basic-tree__content",style:e(B)},s&&c[s]),i("span",{class:"basic-tree__actions"}," ",function(e){const{actionList:t}=n;if(t&&0!==t.length)return t.map(((t,s)=>i("span",{key:s,class:"basic-tree__action"},t.render(e))))}(t))),default:()=>D({data:d?c[d]:[]})})})):null}async function w({event:e,node:t}){const{rightMenuList:s=[],beforeRightClick:a}=n;let d=[];d=a&&c(a)?await a(t):s,d.length&&v({event:e,items:d})}return r((()=>{g.value=n.treeData,x.expandedKeys=n.expandedKeys,x.selectedKeys=n.selectedKeys,x.checkedKeys=n.checkedKeys})),f({setExpandedKeys:function(e){x.expandedKeys=e},getExpandedKeys:function(){return x.expandedKeys},setSelectedKeys:function(e){x.selectedKeys=e},getSelectedKeys:function(){return x.selectedKeys},setCheckedKeys:function(e){x.checkedKeys=e},getCheckedKeys:function(){return x.checkedKeys},insertNodeByKey:C,deleteNodeByKey:j,updateNodeByKey:_,filterByLevel:e=>{x.expandedKeys=A(e)}}),()=>i(p,{...e(N),class:"basic-tree"},{switcherIcon:()=>i(u,null),default:()=>D({data:e(L)}),...y(k)})}});const k=[{title:"parent 1parent ",key:"0-0",icon:"home|svg",children:[{title:"leaf",key:"0-0-0"},{title:"leaf",key:"0-0-1",children:[{title:"leaf",key:"0-0-0-0"},{title:"leaf",key:"0-0-0-1"}]}]},{title:"parent 2",key:"1-1",icon:"home|svg",children:[{title:"leaf",key:"1-1-0"},{title:"leaf",key:"1-1-1"}]},{title:"parent 3",key:"2-2",icon:"home|svg",children:[{title:"leaf",key:"2-2-0"},{title:"leaf",key:"2-2-1"}]}];export{h as B,k as t};