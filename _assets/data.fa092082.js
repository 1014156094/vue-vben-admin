import{f as e,cd as t,dF as s,a as n,b as a,r as d,v as c,aK as l,ai as i,cU as r,T as y,c$ as o}from"./index.fa77065c.js";import{o as u}from"./omit.439d1869.js";import{D as p}from"./DownOutlined.3a561222.js";import{T as f}from"./index.c89db05d.js";import{u as K}from"./useContextMenu.10e28f91.js";var h=n({name:"BasicTree",props:{replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value"],setup(n,{attrs:h,slots:k,emit:x}){const g=a({expandedKeys:n.expandedKeys||[],selectedKeys:n.selectedKeys||[],checkedKeys:n.checkedKeys||[]}),m=d([]),[v]=K(),B=c((()=>{const{replaceFields:e}=n;return{children:"children",title:"title",key:"key",...e}})),b=c((()=>{const{actionList:e}=n;return{width:`calc(100% - ${18*e.length}px)`}})),N=c((()=>{let t={blockNode:!0,...h,...n,expandedKeys:g.expandedKeys,selectedKeys:g.selectedKeys,checkedKeys:g.checkedKeys,replaceFields:e(B),"onUpdate:expandedKeys":e=>{g.expandedKeys=e,x("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{g.selectedKeys=e,x("update:selectedKeys",e)},onCheck:e=>{g.checkedKeys=e,x("update:value",e)},onRightClick:F};return t=u(t,"treeData"),t})),L=c((()=>e(m))),{deleteNodeByKey:C,insertNodeByKey:j,filterByLevel:A,updateNodeByKey:_}=function(n,a){return{deleteNodeByKey:function t(s,d){if(!s)return;const c=d||e(n),{key:l,children:i}=e(a);if(i&&l)for(let e=0;e<c.length;e++){const n=c[e],a=n[i];if(n[l]===s){c.splice(e,1);break}a&&a.length&&t(s,n[i])}},insertNodeByKey:function({parentKey:d=null,node:c,push:l="push"}){const i=t(e(n));if(!d)return i[l](c),void(n.value=i);const{key:r,children:y}=e(a);y&&r&&(s(i,(e=>{e[r]===d&&(e[y]=e[y]||[],e[y][l](c))})),n.value=i)},filterByLevel:function t(s=1,d,c=1){if(!s)return[];const l=[],i=d||e(n)||[];for(let n=0;n<i.length;n++){const d=i[n],{key:r,children:y}=e(a),o=r?d[r]:"",u=y?d[y]:[];l.push(o),u&&u.length&&c<s&&(c+=1,l.push(...t(s,u,c)))}return l},updateNodeByKey:function t(s,d,c){if(!s)return;const l=c||e(n),{key:i,children:r}=e(a);if(r&&i)for(let e=0;e<l.length;e++){const n=l[e],a=n[r];if(n[i]===s){l[e]={...l[e],...d};break}a&&a.length&&t(s,d,n[r])}}}}(m,B);function D({data:t}){return t?t.map((t=>{const{title:s,key:a,children:d}=e(B),c=u(t,"title"),l=t;return y(f.TreeNode,{...c,key:null==l?void 0:l[a]},{title:()=>y("span",{class:"basic-tree-title"},y("span",{class:"basic-tree__content",style:e(b)},s&&l[s]),y("span",{class:"basic-tree__actions"}," ",function(e){const{actionList:t}=n;if(t&&0!==t.length)return t.map(((t,s)=>y("span",{key:s,class:"basic-tree__action"},t.render(e))))}(t))),default:()=>D({data:d?l[d]:[]})})})):null}async function F({event:e,node:t}){const{rightMenuList:s=[],beforeRightClick:a}=n;let d=[];d=a&&l(a)?await a(t):s,d.length&&v({event:e,items:d})}function w(e){g.expandedKeys=e}function T(){return g.expandedKeys}function M(e){g.selectedKeys=e}function R(){return g.selectedKeys}function U(e){g.checkedKeys=e}function E(){return g.checkedKeys}return i((()=>{m.value=n.treeData,g.expandedKeys=n.expandedKeys,g.selectedKeys=n.selectedKeys,g.checkedKeys=n.checkedKeys})),r((e=>{e.setExpandedKeys=w,e.getExpandedKeys=T,e.setSelectedKeys=M,e.getSelectedKeys=R,e.setCheckedKeys=U,e.getCheckedKeys=E,e.insertNodeByKey=j,e.deleteNodeByKey=C,e.updateNodeByKey=_,e.filterByLevel=e=>{g.expandedKeys=A(e)}})),()=>y(f,{...e(N),class:"basic-tree"},{switcherIcon:()=>y(p,null),default:()=>D({data:e(L)}),...o(k)})}});const k=[{title:"parent 1parent ",key:"0-0",icon:"home|svg",children:[{title:"leaf",key:"0-0-0"},{title:"leaf",key:"0-0-1",children:[{title:"leaf",key:"0-0-0-0"},{title:"leaf",key:"0-0-0-1"}]}]},{title:"parent 2",key:"1-1",icon:"home|svg",children:[{title:"leaf",key:"1-1-0"},{title:"leaf",key:"1-1-1"}]},{title:"parent 3",key:"2-2",icon:"home|svg",children:[{title:"leaf",key:"2-2-0"},{title:"leaf",key:"2-2-1"}]}];export{h as B,k as t};