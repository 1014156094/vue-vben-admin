let e=document.createElement("style");e.innerHTML=".basic-tree{position:relative}.basic-tree-title{position:relative;display:inline-block;width:100%;padding-right:10px}.basic-tree-title:hover .basic-tree__action{visibility:visible}.basic-tree__content{display:inline-block;overflow:hidden}.basic-tree__actions{position:absolute;top:0;right:0;display:flex}.basic-tree__action{margin-left:4px;visibility:hidden}",document.head.appendChild(e);import{k as t,J as n,cO as s,f as i,cY as a,cZ as r,a as c,b as d,r as l,I as o,Z as y,aN as p,ay as u}from"./index.f774190a.js";import"./xlsx.a48e520c.js";import"./Trigger.85e0c6c3.js";import{o as f}from"./omit.55ec7501.js";import"./_baseSlice.1123a25b.js";import"./index.c2ba9c2f.js";import"./types.6032647f.js";import"./index.a172b251.js";import"./index.6227aee6.js";import"./index.3a133817.js";import"./index.5e4fc368.js";import"./CaretDownFilled.6b8fd509.js";import"./FileOutlined.2fd31509.js";import{T as h}from"./index.b2997374.js";import{e as K}from"./tsxHelper.d9af66ea.js";import"./index.30f1e688.js";import{u as b}from"./useExpose.37e055d0.js";import{u as m}from"./useContextMenu.e3299aa8.js";var x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e,i){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){k(e,t,n[t])}))}return e}({},e,i.attrs);return t(s,n(a,{icon:x}),null)};g.displayName="DownOutlined",g.inheritAttrs=!1;var v=c({name:"BasicTree",props:{replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value"],setup(e,{attrs:t,slots:n,emit:s}){const c=d({expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),x=l([]),[k]=m(),v=o((()=>{const{replaceFields:t}=e;return{children:"children",title:"title",key:"key",...t}})),j=o((()=>{const{actionList:t}=e;return{width:`calc(100% - ${18*t.length}px)`}})),_=o((()=>{let n={blockNode:!0,...t,...e,expandedKeys:c.expandedKeys,selectedKeys:c.selectedKeys,checkedKeys:c.checkedKeys,replaceFields:i(v),"onUpdate:expandedKeys":e=>{c.expandedKeys=e,s("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{c.selectedKeys=e,s("update:selectedKeys",e)},onCheck:e=>{c.checkedKeys=e,s("update:value",e)},onRightClick:A};return n=f(n,"treeData"),n})),B=o((()=>i(x))),{deleteNodeByKey:w,insertNodeByKey:N,filterByLevel:O,updateNodeByKey:L}=function(e,t){return{deleteNodeByKey:function n(s,a){if(!s)return;const r=a||i(e),{key:c,children:d}=i(t);if(d&&c)for(let e=0;e<r.length;e++){const t=r[e],i=t[d];if(t[c]===s){r.splice(e,1);break}i&&i.length&&n(s,t[d])}},insertNodeByKey:function({parentKey:n=null,node:s,push:c="push"}){const d=a(i(e));if(!n)return d[c](s),void(e.value=d);const{key:l,children:o}=i(t);o&&l&&(r(d,(e=>{e[l]===n&&(e[o]=e[o]||[],e[o][c](s))})),e.value=d)},filterByLevel:function n(s=1,a,r=1){if(!s)return[];const c=[],d=a||i(e)||[];for(let e=0;e<d.length;e++){const a=d[e],{key:l,children:o}=i(t),y=l?a[l]:"",p=o?a[o]:[];c.push(y),p&&p.length&&r<s&&(r+=1,c.push(...n(s,p,r)))}return c},updateNodeByKey:function n(s,a,r){if(!s)return;const c=r||i(e),{key:d,children:l}=i(t);if(l&&d)for(let e=0;e<c.length;e++){const t=c[e],i=t[l];if(t[d]===s){c[e]={...c[e],...a};break}i&&i.length&&n(s,a,t[l])}}}}(x,v);function C({data:t}){return t?t.map((t=>{const{title:n,key:s,children:a}=i(v),r=f(t,"title"),c=t;return u(h.TreeNode,{...r,key:null==c?void 0:c[s]},{title:()=>u("span",{class:"basic-tree-title"},u("span",{class:"basic-tree__content",style:i(j)},n&&c[n]),u("span",{class:"basic-tree__actions"}," ",function(t){const{actionList:n}=e;if(n&&0!==n.length)return n.map(((e,n)=>u("span",{key:n,class:"basic-tree__action"},e.render(t))))}(t))),default:()=>C({data:a?c[a]:[]})})})):null}async function A({event:t,node:n}){const{rightMenuList:s=[],beforeRightClick:i}=e;let a=[];a=i&&y(i)?await i(n):s,a.length&&k({event:t,items:a})}return p((()=>{x.value=e.treeData,c.expandedKeys=e.expandedKeys,c.selectedKeys=e.selectedKeys,c.checkedKeys=e.checkedKeys})),b({setExpandedKeys:function(e){c.expandedKeys=e},getExpandedKeys:function(){return c.expandedKeys},setSelectedKeys:function(e){c.selectedKeys=e},getSelectedKeys:function(){return c.selectedKeys},setCheckedKeys:function(e){c.checkedKeys=e},getCheckedKeys:function(){return c.checkedKeys},insertNodeByKey:N,deleteNodeByKey:w,updateNodeByKey:L,filterByLevel:e=>{c.expandedKeys=O(e)}}),()=>u(h,{...i(_),class:"basic-tree"},{switcherIcon:()=>u(g,null),default:()=>C({data:i(B)}),...K(n)})}});export default v;