import{k as e,J as t,cQ as o,u as s,H as l,a as n,aU as r,I as a,i,o as c,j as u,aL as d,K as p,w as f,p as g,n as b,m as w,r as h,aM as v,a$ as C,cK as k,dk as m,f as y,t as D,d2 as x,R as O,Z as $,br as B,bp as P,ap as j,aV as T,b as _,dm as F,cX as L,dn as S,cN as H,dj as V,N as A}from"./index.c5d8d2c2.js";import{D as N}from"./index.dc2ddd8c.js";import{c as M,s as I}from"./index.a56b187c.js";import{u as R}from"./useAttrs.4a972d2b.js";var z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};function K(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var E=function(s,l){var n=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?Object(arguments[t]):{},s=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),s.forEach((function(t){K(e,t,o[t])}))}return e}({},s,l.attrs);return e(o,t(n,{icon:z}),null)};E.displayName="ArrowLeftOutlined",E.inheritAttrs=!1;const{t:J}=s(),Q={confirmLoading:l.bool,showCancelBtn:l.bool.def(!0),cancelButtonProps:Object,cancelText:l.string.def(J("component.drawer.cancelText")),showOkBtn:l.bool.def(!0),okButtonProps:Object,okText:l.string.def(J("component.drawer.okText")),okType:l.string.def("primary"),showFooter:l.bool,footerHeight:{type:[String,Number],default:60}},U={isDetail:l.bool,title:l.string.def(""),loadingText:l.string,showDetailBack:l.bool.def(!0),visible:l.bool,loading:l.bool,maskClosable:l.bool.def(!0),getContainer:{type:[Object,String]},scrollOptions:{type:Object,default:null},closeFunc:{type:[Function,Object],default:null},triggerWindowResize:l.bool,destroyOnClose:l.bool,...Q};var W=n({name:"BasicDrawerFooter",props:{...Q,height:{type:String,default:"60px"}},emits:["ok","close"],setup(e,{emit:t}){const{prefixCls:o}=r("basic-drawer-footer");return{handleOk:function(){t("ok")},prefixCls:o,handleClose:function(){t("close")},getStyle:a((()=>{const t=`${e.height}`;return{height:t,lineHeight:t}}))}}});W.render=function(e,o,s,l,n,r){const a=i("a-button");return e.showFooter||e.$slots.footer?(c(),u("div",{key:0,class:e.prefixCls,style:e.getStyle},[e.$slots.footer?p(e.$slots,"footer",{key:1}):(c(),u(d,{key:0},[p(e.$slots,"insertFooter"),e.showCancelBtn?(c(),u(a,t({key:0},e.cancelButtonProps,{onClick:e.handleClose,class:"mr-2"}),{default:f((()=>[g(b(e.cancelText),1)])),_:1},16,["onClick"])):w("v-if",!0),p(e.$slots,"centerFooter"),e.showOkBtn?(c(),u(a,t({key:1,type:e.okType,onClick:e.handleOk},e.okButtonProps,{class:"mr-2",loading:e.confirmLoading}),{default:f((()=>[g(b(e.okText),1)])),_:1},16,["type","onClick","loading"])):w("v-if",!0),p(e.$slots,"appendFooter")],64))],6)):w("v-if",!0)};var X=n({name:"BasicDrawerHeader",components:{BasicTitle:M,ArrowLeftOutlined:E},props:{isDetail:l.bool,showDetailBack:l.bool,title:l.string},setup(e,{emit:t}){const{prefixCls:o}=r("basic-drawer-header");return{prefixCls:o,handleClose:function(){t("close")}}}});const Z={key:1};X.render=function(t,o,s,l,n,r){const a=i("BasicTitle"),d=i("ArrowLeftOutlined");return t.isDetail?(c(),u("div",{key:1,class:[t.prefixCls,`${t.prefixCls}--detail`]},[e("span",{class:`${t.prefixCls}__twrap`},[t.showDetailBack?(c(),u("span",{key:0,onClick:o[1]||(o[1]=(...e)=>t.handleClose&&t.handleClose(...e))},[e(d,{class:`${t.prefixCls}__back`},null,8,["class"])])):w("v-if",!0),t.title?(c(),u("span",Z,b(t.title),1)):w("v-if",!0)],2),e("span",{class:`${t.prefixCls}__toolbar`},[p(t.$slots,"titleToolbar")],2)],2)):(c(),u(a,{key:0,class:t.prefixCls},{default:f((()=>[p(t.$slots,"title"),g(" "+b(t.$slots.title?"":t.title),1)])),_:3},8,["class"]))};var q=n({inheritAttrs:!1,components:{Drawer:N,ScrollContainer:I,DrawerFooter:W,DrawerHeader:X},props:U,emits:["visible-change","ok","close","register"],setup(e,{emit:t}){const o=h(!1),l=R(),n=h(null),{t:i}=s(),{prefixVar:c,prefixCls:u}=r("basic-drawer"),d={setDrawerProps:function(e){n.value=m(y(n)||{},e),Reflect.has(e,"visible")&&(o.value=!!e.visible)},emitVisible:void 0},p=k();p&&t("register",d,p.uid);const f=a((()=>m(D(e),y(n)))),g=a((()=>{const e={placement:"right",...y(l),...y(f),visible:y(o)};e.title=void 0;const{isDetail:t,width:s,wrapClassName:n,getContainer:r}=e;if(t){s||(e.width="100%");const t=`${u}__detail`;e.wrapClassName=n?`${n} ${t}`:t,r||(e.getContainer=`.${c}-layout-content`)}return e})),b=a((()=>({...l,...y(g)}))),w=a((()=>{const{footerHeight:e,showFooter:t}=y(g);return t&&e?x(e)?`${e}px`:`${e.replace("px","")}px`:"0px"})),B=a((()=>({position:"relative",height:`calc(100% - ${y(w)})`}))),P=a((()=>{var e;return!!(null==(e=y(g))?void 0:e.loading)}));return v((()=>{o.value=e.visible})),C((()=>o.value),(e=>{O((()=>{var o;t("visible-change",e),p&&(null==(o=d.emitVisible)||o.call(d,e,p.uid))}))})),{onClose:async function(e){const{closeFunc:s}=y(g);if(t("close",e),s&&$(s)){const e=await s();o.value=!e}else o.value=!1},t:i,prefixCls:u,getMergeProps:f,getScrollContentStyle:B,getProps:g,getLoading:P,getBindValues:b,getFooterHeight:w,handleOk:function(){t("ok")}}}});q.render=function(o,s,l,n,r,a){const d=i("DrawerHeader"),g=i("ScrollContainer"),b=i("DrawerFooter"),w=i("Drawer"),h=B("loading");return c(),u(w,t({class:o.prefixCls,onClose:o.onClose},o.getBindValues),P({default:f((()=>[j(e(g,{style:o.getScrollContentStyle,"loading-tip":o.loadingText||o.t("component.drawer.loadingText")},{default:f((()=>[p(o.$slots,"default")])),_:3},8,["style","loading-tip"]),[[h,o.getLoading]]),e(b,t(o.getProps,{onClose:o.onClose,onOk:o.handleOk,height:o.getFooterHeight}),P({_:2},[T(Object.keys(o.$slots),(e=>({name:e,fn:f((t=>[p(o.$slots,e,t)]))})))]),1040,["onClose","onOk","height"])])),_:2},[o.$slots.title?void 0:{name:"title",fn:f((()=>[e(d,{title:o.getMergeProps.title,isDetail:o.isDetail,showDetailBack:o.showDetailBack,onClose:o.onClose},{titleToolbar:f((()=>[p(o.$slots,"titleToolbar")])),_:1},8,["title","isDetail","showDetailBack","onClose"])]))}]),1040,["class","onClose"])};const G=_({}),Y=_({});function ee(){F();const e=h(null),t=h(!1),o=h("");const s=()=>{const t=y(e);return t||V("useDrawer instance is undefined!"),t};return[function(s,l){L((()=>{e.value=null,t.value=null,G[y(o)]=null})),y(t)&&S()&&s===y(e)||(o.value=l,e.value=s,t.value=!0,s.emitVisible=(e,t)=>{Y[t]=e})},{setDrawerProps:e=>{var t;null==(t=s())||t.setDrawerProps(e)},getVisible:a((()=>Y[~~y(o)])),openDrawer:(e=!0,t,l=!0)=>{var n;if(null==(n=s())||n.setDrawerProps({visible:e}),!t)return;if(l)return G[y(o)]=null,void(G[y(o)]=t);H(D(G[y(o)]),t)||(G[y(o)]=t)}}]}const te=e=>{const t=h(null),o=k(),s=h("");o||V("useDrawerInner instance is undefined!");const l=()=>{const e=y(t);if(e)return e;V("useDrawerInner instance is undefined!")};return v((()=>{const t=G[y(s)];t&&e&&$(e)&&O((()=>{e(t)}))})),[(e,l)=>{L((()=>{t.value=null})),s.value=l,t.value=e,null==o||o.emit("register",e,l)},{changeLoading:(e=!0)=>{var t;null==(t=l())||t.setDrawerProps({loading:e})},changeOkLoading:(e=!0)=>{var t;null==(t=l())||t.setDrawerProps({confirmLoading:e})},getVisible:a((()=>Y[~~y(s)])),closeDrawer:()=>{var e;null==(e=l())||e.setDrawerProps({visible:!1})},setDrawerProps:e=>{var t;null==(t=l())||t.setDrawerProps(e)}}]};A(q);export{te as a,q as s,ee as u};