let e=document.createElement("style");e.innerHTML=".basic-tree{position:relative}.basic-tree-title{position:relative;display:inline-block;width:100%;padding-right:10px}.basic-tree-title:hover .basic-tree__action{visibility:visible}.basic-tree__content{display:inline-block;overflow:hidden}.basic-tree__actions{position:absolute;top:0;right:0;display:flex}.basic-tree__action{margin-left:4px;visibility:hidden}",document.head.appendChild(e);import{f as t,cX as s,cY as n,a as i,b as a,r as d,s as c,cA as r,ae as l,W as o}from"./index.c162a79a.js";import"./xlsx.a48e520c.js";import"./Trigger.45e4d69c.js";import{o as y}from"./omit.f2034b03.js";import"./_baseSlice.1123a25b.js";import"./index.a900f8be.js";import"./types.a29b9594.js";import"./index.a172b251.js";import"./index.c95c2261.js";import"./index.261d28fe.js";import"./index.4d9aa87b.js";import"./CaretDownFilled.98ae748f.js";import"./FileOutlined.84bb7159.js";import{T as p}from"./index.d6195f46.js";import{D as u}from"./DownOutlined.ec5528f1.js";import{e as f}from"./tsxHelper.f27b6047.js";import"./index.ea0a8b2c.js";import{u as K}from"./useExpose.7ccc2771.js";import{u as h}from"./useContextMenu.38bf968c.js";var b=i({name:"BasicTree",props:{replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value"],setup(e,{attrs:i,slots:b,emit:m}){const x=a({expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),k=d([]),[g]=h(),j=c((()=>{const{replaceFields:t}=e;return{children:"children",title:"title",key:"key",...t}})),v=c((()=>{const{actionList:t}=e;return{width:`calc(100% - ${18*t.length}px)`}})),_=c((()=>{let s={blockNode:!0,...i,...e,expandedKeys:x.expandedKeys,selectedKeys:x.selectedKeys,checkedKeys:x.checkedKeys,replaceFields:t(j),"onUpdate:expandedKeys":e=>{x.expandedKeys=e,m("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{x.selectedKeys=e,m("update:selectedKeys",e)},onCheck:e=>{x.checkedKeys=e,m("update:value",e)},onRightClick:D};return s=y(s,"treeData"),s})),B=c((()=>t(k))),{deleteNodeByKey:N,insertNodeByKey:C,filterByLevel:L,updateNodeByKey:w}=function(e,i){return{deleteNodeByKey:function s(n,a){if(!n)return;const d=a||t(e),{key:c,children:r}=t(i);if(r&&c)for(let e=0;e<d.length;e++){const t=d[e],i=t[r];if(t[c]===n){d.splice(e,1);break}i&&i.length&&s(n,t[r])}},insertNodeByKey:function({parentKey:a=null,node:d,push:c="push"}){const r=s(t(e));if(!a)return r[c](d),void(e.value=r);const{key:l,children:o}=t(i);o&&l&&(n(r,(e=>{e[l]===a&&(e[o]=e[o]||[],e[o][c](d))})),e.value=r)},filterByLevel:function s(n=1,a,d=1){if(!n)return[];const c=[],r=a||t(e)||[];for(let e=0;e<r.length;e++){const a=r[e],{key:l,children:o}=t(i),y=l?a[l]:"",p=o?a[o]:[];c.push(y),p&&p.length&&d<n&&(d+=1,c.push(...s(n,p,d)))}return c},updateNodeByKey:function s(n,a,d){if(!n)return;const c=d||t(e),{key:r,children:l}=t(i);if(l&&r)for(let e=0;e<c.length;e++){const t=c[e],i=t[l];if(t[r]===n){c[e]={...c[e],...a};break}i&&i.length&&s(n,a,t[l])}}}}(k,j);function A({data:s}){return s?s.map((s=>{const{title:n,key:i,children:a}=t(j),d=y(s,"title"),c=s;return o(p.TreeNode,{...d,key:null==c?void 0:c[i]},{title:()=>o("span",{class:"basic-tree-title"},o("span",{class:"basic-tree__content",style:t(v)},n&&c[n]),o("span",{class:"basic-tree__actions"}," ",function(t){const{actionList:s}=e;if(s&&0!==s.length)return s.map(((e,s)=>o("span",{key:s,class:"basic-tree__action"},e.render(t))))}(s))),default:()=>A({data:a?c[a]:[]})})})):null}async function D({event:t,node:s}){const{rightMenuList:n=[],beforeRightClick:i}=e;let a=[];a=i&&r(i)?await i(s):n,a.length&&g({event:t,items:a})}return l((()=>{k.value=e.treeData,x.expandedKeys=e.expandedKeys,x.selectedKeys=e.selectedKeys,x.checkedKeys=e.checkedKeys})),K({setExpandedKeys:function(e){x.expandedKeys=e},getExpandedKeys:function(){return x.expandedKeys},setSelectedKeys:function(e){x.selectedKeys=e},getSelectedKeys:function(){return x.selectedKeys},setCheckedKeys:function(e){x.checkedKeys=e},getCheckedKeys:function(){return x.checkedKeys},insertNodeByKey:C,deleteNodeByKey:N,updateNodeByKey:w,filterByLevel:e=>{x.expandedKeys=L(e)}}),()=>o(p,{...t(_),class:"basic-tree"},{switcherIcon:()=>o(u,null),default:()=>A({data:t(B)}),...f(b)})}});export default b;