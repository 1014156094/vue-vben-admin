import{cC as r,d as e,r as o,u as i,aj as t,S as a,bD as s,cY as n,h as l,o as c,i as d,ab as m,ac as u,aA as p,aB as f,j,w as b,m as g,l as x}from"./index.899e68b1.js";import{f as E}from"./index.d0b91344.js";import"./_stringToArray.45d16e42.js";import"./domUtils.511e170d.js";import"./index.73bca1d9.js";import"./index.55180915.js";import"./index.1156589c.js";import"./CheckOutlined.fc6e0763.js";import{b as y}from"./index.6e6fb497.js";import{_ as R}from"./index.7aa6041f.js";import"./FullscreenOutlined.37abc2dd.js";import"./RightOutlined.7a52ca15.js";import"./SettingOutlined.a20a6645.js";import"./useTimeout.1aa049d6.js";import"./index.8a587a60.js";import"./animation.ce68d404.js";import"./useScrollTo.14ce33f8.js";import"./useAttrs.65aacca0.js";import"./useWindowSizeFn.43b90dac.js";import"./index.01e45a9d.js";import"./uuid.a6cec785.js";import"./download.8d0bafa5.js";import"./useForm.77949dc2.js";import"./clickOutside.508ede81.js";import"./useSortable.d78f3ef5.js";import"./useExpose.5450fd15.js";import{u as T}from"./useTable.75c8965a.js";import"./index.47ed7e0b.js";import"./useDescription.15b74609.js";import{getColumns as h}from"./data.91cbed41.js";import k from"./DetailModal.af775c3b.js";var w;(w||(w={})).Error="/error";var A=e({name:"ErrorHandler",components:{DetailModal:k,BasicTable:R,TableAction:E},setup(){const e=o(),l=o([]),{t:c}=i(),[d,{setTableData:m}]=T({title:c("sys.errorLog.tableTitle"),columns:h(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[u,{openModal:p}]=y();return t((()=>n.getErrorInfoState),(r=>{a((()=>{m(s(r))}))}),{immediate:!0}),{register:d,registerModal:u,handleDetail:function(r){e.value=r,p(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){l.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:async function(){await r.request({url:w.Error,method:"GET"})},imgListRef:l,rowInfoRef:e,t:c}}});const C={class:"p-4"};A.render=function(r,e,o,i,t,a){const s=l("DetailModal"),n=l("a-button"),E=l("TableAction"),y=l("BasicTable");return c(),d("div",C,[(c(!0),d(m,null,u(r.imgListRef,(r=>p((c(),d("img",{key:r,src:r},null,8,["src"])),[[f,!1]]))),128)),j(s,{info:r.rowInfoRef,onRegister:r.registerModal},null,8,["info","onRegister"]),j(y,{onRegister:r.register,class:"error-handle-table"},{toolbar:b((()=>[j(n,{onClick:r.fireVueError,type:"primary"},{default:b((()=>[g(x(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),j(n,{onClick:r.fireResourceError,type:"primary"},{default:b((()=>[g(x(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),j(n,{onClick:r.fireAjaxError,type:"primary"},{default:b((()=>[g(x(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:b((({record:e})=>[j(E,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default A;