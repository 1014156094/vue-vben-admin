import{j as e,aH as t,aI as a,r as n,cn as s,co as r,q as o,s as l,a_ as c,e as i,bU as u,cp as d,bV as p,u as f,bx as h,b9 as m,a3 as v,cq as C,bL as b,E as g,aE as x,d as y,aQ as S,h as w,o as _,i as k,l as E,bz as $,a1 as O,bD as j,b6 as A,H as M,bc as I,aR as R,aS as T,k as D,b8 as N,bQ as U,b5 as P,m as z}from"./index.0fe5b4aa.js";import"./index.8d91dadc.js";import{I as L}from"./index.eb0e0f34.js";import{b as H,u as K,d as W}from"./useHeaderSetting.4dec64a8.js";import{u as B}from"./useScrollTo.da2c7ca7.js";import{C as F}from"./clickOutside.1ff8778e.js";import"./SearchOutlined.bb6cb6d1.js";import"./EyeOutlined.8230c2e2.js";import"./animation.40f56c40.js";import"./domUtils.38af2ce7.js";import"./_stringToArray.ec312786.js";var q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function Q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var V=function(n,s){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Q(e,t,a[t])}))}return e}({},n,s.attrs);return e(a,t(r,{icon:q}),null)};V.displayName="SearchOutlined",V.inheritAttrs=!1;const G=["keydown"],J={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},X={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},Y={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>e.metaKey};function Z(e,t){if(!e.key)return!1;if(d(t))return e.keyCode===t;const a=t.split(".");let n=0;for(const s of a){const t=Y[s],a=X[s],r=J[s];(t&&t(e)||(a&&p(a)?a.includes(e.key):a===e.key)||(r&&p(r)?r.includes(e.keyCode):r===e.keyCode)||e.key.toUpperCase()===s.toUpperCase())&&n++}return n===a.length}function ee(e,t=r,a={}){const{events:n=G,target:s}=a;let f;function h(a){if(function(e){return c(e)?e:u(e)||d(e)?t=>Z(t,e):p(e)?t=>e.some((e=>Z(t,e))):e?()=>!0:()=>!1}(e)(a))return t(a)}o((()=>{if(f=function(e,t){if(!e)return t;let a;a=c(e)?e():i(e);return a}(s,window),f)for(const e of n)f.addEventListener(e,h)})),l((()=>{if(f)for(const e of n)f.removeEventListener(e,h)}))}var te,ae;function ne(e,t,a){const s=n([]),r=n(""),o=n(-1);let l=[];const{t:c}=f(),u=x(),[d]=h((function(e){null==e||e.stopPropagation();const t=e.target.value;if(r.value=t.trim(),!t)return void(s.value=[]);const a=function(e){const t=["",...[...e].map((e=>{return["$","(",")","*","+",".","[","]","?","\\","^","{","}","|"].includes(t=e)?`\\${t}`:t;var t})),""].join(".*");return new RegExp(t)}(i(r)),n=b(l,(e=>a.test(e.name)));s.value=p(n,a),o.value=0}),200);function p(e,t,a){const n=[];return e.forEach((e=>{const{name:s,path:r,icon:o,children:l}=e;t.test(s)&&!(null==l?void 0:l.length)&&n.push({name:(null==a?void 0:a.name)?`${a.name} > ${s}`:s,path:r,icon:o}),Array.isArray(l)&&l.length&&n.push(...p(l,t,e))})),n}function y(){const a=i(e);if(!a||!Array.isArray(a)||0===a.length||!i(t))return;const n=a[i(o)];if(!n)return;const s=i(t);if(!s)return;const r=n.offsetTop+n.offsetHeight,l=s.offsetHeight,{start:c}=B({el:s,duration:100,to:r-l});c()}async function S(){if(!s.value.length)return;const e=i(s),t=i(o);if(0===e.length||t<0)return;const a=e[t];w(),await g(),u(a.path)}function w(){s.value=[],a("close")}return m((async()=>{const e=await H();l=v(e),C(l,(e=>{e.name=c(e.name)}))})),ee(["enter","up","down","esc"],(e=>{switch(e.keyCode){case 38:s.value.length&&(o.value--,o.value<0&&(o.value=s.value.length-1),y());break;case 40:s.value.length&&(o.value++,o.value>s.value.length-1&&(o.value=0),y());break;case 13:S();break;case 27:w()}})),{handleSearch:d,searchResult:s,keyword:r,activeIndex:o,handleMouseenter:function(e){const t=e.target.dataset.index;o.value=Number(t)},handleEnter:S}}(ae=te||(te={}))[ae.UP=38]="UP",ae[ae.DOWN=40]="DOWN",ae[ae.ENTER=13]="ENTER",ae[ae.ESC=27]="ESC";var se=y({name:"AppSearchFooter",components:{},setup(){const{prefixCls:e}=S("app-search-footer"),{t:t}=f();return{prefixCls:e,t:t}}});const re=$("data-v-8d332632")(((t,a,n,s,r,o)=>{const l=w("g-icon");return _(),k("div",{class:`${t.prefixCls}`},[e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"ant-design:enter-outlined"})],2),e("span",null,E(t.t("component.app.toSearch")),1),e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"bi:arrow-up"})],2),e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"bi:arrow-down"})],2),e("span",null,E(t.t("component.app.toNavigate")),1),e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"mdi:keyboard-esc"})],2),e("span",null,E(t.t("common.closeText")),1)],2)}));se.render=re,se.__scopeId="data-v-8d332632";var oe=y({name:"AppSearchModal",components:{SearchOutlined:V,AppSearchFooter:se,[L.name]:L},emits:["close"],props:{visible:Boolean},directives:{clickOutside:F},setup(e,{emit:t}){const a=n(null),{prefixCls:r}=S("app-search-modal"),{t:o}=f(),[l,c]=function(){const e=n([]);return s((()=>{e.value=[]})),[e,t=>a=>{e.value[t]=a}]}(),{getIsMobile:u}=K(),{handleSearch:d,searchResult:p,keyword:h,activeIndex:m,handleEnter:v,handleMouseenter:C}=ne(l,a,t),b=O((()=>!h||0===i(p).length)),g=O((()=>[r,{[`${r}--mobile`]:i(u)}]));return{t:o,prefixCls:r,getClass:g,handleSearch:d,searchResult:p,activeIndex:m,getIsNotData:b,handleEnter:v,setRefs:c,scrollWrap:a,handleMouseenter:C,handleClose:()=>{p.value=[],t("close")}}}});const le=$("data-v-4d302d6b"),ce=le(((t,a,n,s,r,o)=>{const l=w("SearchOutlined"),c=w("a-input"),i=w("g-icon"),u=w("AppSearchFooter"),d=j("click-outside");return _(),k(U,{to:"body"},[e(N,{name:"zoom-fade",mode:"out-in"},{default:le((()=>[t.visible?(_(),k("div",{key:0,class:t.getClass,onClick:a[4]||(a[4]=A((()=>{}),["stop"]))},[M(e("div",{class:`${t.prefixCls}-content`},[e("div",{class:`${t.prefixCls}-input__wrapper`},[e(c,{class:`${t.prefixCls}-input`,placeholder:t.t("common.searchText"),"allow-clear":"",onChange:t.handleSearch},{prefix:le((()=>[e(l)])),_:1},8,["class","placeholder","onChange"]),e("span",{class:`${t.prefixCls}-cancel`,onClick:a[1]||(a[1]=(...e)=>t.handleClose&&t.handleClose(...e))},E(t.t("common.cancelText")),3)],2),M(e("div",{class:`${t.prefixCls}-not-data`},E(t.t("component.app.searchNotData")),3),[[I,t.getIsNotData]]),M(e("ul",{class:`${t.prefixCls}-list`,ref:"scrollWrap"},[(_(!0),k(R,null,T(t.searchResult,((n,s)=>(_(),k("li",{ref:t.setRefs(s),key:n.path,"data-index":s,onMouseenter:a[2]||(a[2]=(...e)=>t.handleMouseenter&&t.handleMouseenter(...e)),onClick:a[3]||(a[3]=(...e)=>t.handleEnter&&t.handleEnter(...e)),class:[`${t.prefixCls}-list__item`,{[`${t.prefixCls}-list__item--active`]:t.activeIndex===s}]},[e("div",{class:`${t.prefixCls}-list__item-icon`},[e(i,{icon:n.icon||"mdi:form-select",size:20},null,8,["icon"])],2),e("div",{class:`${t.prefixCls}-list__item-text`},E(n.name),3),e("div",{class:`${t.prefixCls}-list__item-enter`},[e(i,{icon:"ant-design:enter-outlined",size:20})],2)],42,["data-index"])))),128))],2),[[I,!t.getIsNotData]]),e(u)],2),[[d,t.handleClose]])],2)):D("",!0)])),_:1})])}));oe.render=ce,oe.__scopeId="data-v-4d302d6b";var ie=y({name:"AppSearch",components:{AppSearchModal:oe,Tooltip:P,SearchOutlined:V},setup(){const e=n(!1),{prefixCls:t}=S("app-search"),{getShowSearch:a}=W(),{t:s}=f();return{t:s,prefixCls:t,showModal:e,getShowSearch:a,handleClose:()=>{e.value=!1},handleSearch:function(){e.value=!0}}}});const ue=$("data-v-43b34150"),de=ue(((t,a,n,s,r,o)=>{const l=w("SearchOutlined"),c=w("Tooltip"),i=w("AppSearchModal");return t.getShowSearch?(_(),k("div",{key:0,class:t.prefixCls,onClick:a[1]||(a[1]=A(((...e)=>t.handleSearch&&t.handleSearch(...e)),["stop"]))},[e(c,null,{title:ue((()=>[z(E(t.t("common.searchText")),1)])),default:ue((()=>[e(l)])),_:1}),e(i,{onClose:t.handleClose,visible:t.showModal},null,8,["onClose","visible"])],2)):D("",!0)}));ie.render=de,ie.__scopeId="data-v-43b34150";export default ie;