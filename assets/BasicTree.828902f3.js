var e=Object.assign;import{j as t,a0 as n,a1 as s,e as a,bD as c,bE as r,d,a as l,r as i,q as o,bZ as y,ak as u,an as p,ao as f,cD as K,db as h,m as b}from"./index.899e68b1.js";import{u as k}from"./useExpose.5450fd15.js";import{u as g}from"./useContextMenu.2ad1fb66.js";var v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e,a){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){x(e,t,n[t])}))}return e}({},e,a.attrs);return t(s,n(c,{icon:v}),null)};m.displayName="DownOutlined",m.inheritAttrs=!1;var B=d({name:"BasicTree",props:{replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array}},emits:["update:expandedKeys","update:selectedKeys","update:value","get"],setup(s,{attrs:d,slots:v,emit:x}){const B=l({expandedKeys:s.expandedKeys||[],selectedKeys:s.selectedKeys||[],checkedKeys:s.checkedKeys||[]}),j=i([]),[N]=g(),O=o((()=>{const{replaceFields:t}=s;return e({children:"children",title:"title",key:"key"},t)})),w=o((()=>{const{actionList:e}=s;return{width:`calc(100% - ${18*e.length}px)`}})),L=o((()=>{let t=e(e(e({blockNode:!0},d),s),{expandedKeys:B.expandedKeys,selectedKeys:B.selectedKeys,checkedKeys:B.checkedKeys,replaceFields:a(O),"onUpdate:expandedKeys":e=>{B.expandedKeys=e,x("update:expandedKeys",e)},"onUpdate:selectedKeys":e=>{B.selectedKeys=e,x("update:selectedKeys",e)},onCheck:e=>{B.checkedKeys=e,x("update:value",e)},onRightClick:P});return t=y(t,"treeData"),t})),A=o((()=>a(j))),{deleteNodeByKey:C,insertNodeByKey:D,filterByLevel:_,updateNodeByKey:E}=function(t,n){return{deleteNodeByKey:function e(s,c){if(!s)return;const r=c||a(t),{key:d,children:l}=a(n);if(l&&d)for(let t=0;t<r.length;t++){const n=r[t],a=n[l];if(n[d]===s){r.splice(t,1);break}a&&a.length&&e(s,n[l])}},insertNodeByKey:function({parentKey:e=null,node:s,push:d="push"}){const l=c(a(t));if(!e)return l[d](s),void(t.value=l);const{key:i,children:o}=a(n);o&&i&&(r(l,(t=>{t[i]===e&&(t[o]=t[o]||[],t[o][d](s))})),t.value=l)},filterByLevel:function e(s=1,c,r=1){if(!s)return[];const d=[],l=c||a(t)||[];for(let t=0;t<l.length;t++){const c=l[t],{key:i,children:o}=a(n),y=i?c[i]:"",u=o?c[o]:[];d.push(y),u&&u.length&&r<s&&(r+=1,d.push(...e(s,u,r)))}return d},updateNodeByKey:function s(c,r,d){if(!c)return;const l=d||a(t),{key:i,children:o}=a(n);if(o&&i)for(let t=0;t<l.length;t++){const n=l[t],a=n[o];if(n[i]===c){l[t]=e(e({},l[t]),r);break}a&&a.length&&s(c,r,n[o])}}}}(j,O);function F(e){const{actionList:n}=s;if(n&&0!==n.length)return n.map(((n,s)=>t("span",{key:s,class:"basic-tree__action"},[n.render(e)])))}function M({data:e}){return e?e.map((e=>{const{title:s,key:c,children:r}=a(O),d=y(e,"title"),l=e;return t(h.TreeNode,n(d,{key:null==l?void 0:l[c]}),{title:()=>t("span",{class:"basic-tree-title"},[t("span",{class:"basic-tree__content",style:a(w)},[s&&l[s]]),t("span",{class:"basic-tree__actions"},[b(" "),F(e)])]),default:()=>M({data:r?l[r]:[]})})})):null}async function P({event:e,node:t}){const{rightMenuList:n=[],beforeRightClick:a}=s;let c=[];c=a&&u(a)?await a(t):n,c.length&&N({event:e,items:c})}p((()=>{j.value=s.treeData,B.expandedKeys=s.expandedKeys,B.selectedKeys=s.selectedKeys,B.checkedKeys=s.checkedKeys}));const S={setExpandedKeys:function(e){B.expandedKeys=e},getExpandedKeys:function(){return B.expandedKeys},setSelectedKeys:function(e){B.selectedKeys=e},getSelectedKeys:function(){return B.selectedKeys},setCheckedKeys:function(e){B.checkedKeys=e},getCheckedKeys:function(){return B.checkedKeys},insertNodeByKey:D,deleteNodeByKey:C,updateNodeByKey:E,filterByLevel:e=>{B.expandedKeys=_(e)}};return k(S),f((()=>{x("get",S)})),()=>t(h,n(a(L),{class:"basic-tree"}),e({switcherIcon:()=>t(m,null,null),default:()=>M({data:a(A)})},K(v)))}});export default B;