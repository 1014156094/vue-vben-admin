import{cC as r,d as e,r as o,u as i,aj as t,S as s,bD as a,cY as n,h as l,o as c,i as d,ab as m,ac as u,aA as f,aB as p,j,w as b,m as g,l as x}from"./index.c9b191ae.js";import{f as E}from"./index.62221c24.js";import"./_stringToArray.f9d23805.js";import"./domUtils.43bacb00.js";import"./index.e9cfd29c.js";import"./index.b4918bad.js";import"./index.34b4eaee.js";import"./CheckOutlined.6db140fd.js";import{b as y}from"./index.27cba524.js";import{_ as R}from"./index.b9d582f5.js";import"./FullscreenOutlined.499766bf.js";import"./RightOutlined.ce1a9cb6.js";import"./SettingOutlined.3ccdf103.js";import"./useTimeout.306ef350.js";import"./index.ad8055f7.js";import"./animation.f174d9e2.js";import"./useScrollTo.ed4075e5.js";import"./useAttrs.dd653939.js";import"./useWindowSizeFn.68f6ef4b.js";import"./index.e80c819c.js";import"./uuid.a6cec785.js";import"./download.e374d1b4.js";import"./useForm.d744eed5.js";import"./clickOutside.5c695aaa.js";import"./useSortable.7fd64a7b.js";import"./useExpose.1aedd396.js";import{u as T}from"./useTable.4f530c5e.js";import"./index.d0ba04da.js";import"./useDescription.4ce35112.js";import{getColumns as h}from"./data.bf5be757.js";import k from"./DetailModal.dc56e5f2.js";var w;(w||(w={})).Error="/error";var A=e({name:"ErrorHandler",components:{DetailModal:k,BasicTable:R,TableAction:E},setup(){const e=o(),l=o([]),{t:c}=i(),[d,{setTableData:m}]=T({title:c("sys.errorLog.tableTitle"),columns:h(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[u,{openModal:f}]=y();return t((()=>n.getErrorInfoState),(r=>{s((()=>{m(a(r))}))}),{immediate:!0}),{register:d,registerModal:u,handleDetail:function(r){e.value=r,f(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){l.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:async function(){await r.request({url:w.Error,method:"GET"})},imgListRef:l,rowInfoRef:e,t:c}}});const C={class:"p-4"};A.render=function(r,e,o,i,t,s){const a=l("DetailModal"),n=l("a-button"),E=l("TableAction"),y=l("BasicTable");return c(),d("div",C,[(c(!0),d(m,null,u(r.imgListRef,(r=>f((c(),d("img",{key:r,src:r},null,8,["src"])),[[p,!1]]))),128)),j(a,{info:r.rowInfoRef,onRegister:r.registerModal},null,8,["info","onRegister"]),j(y,{onRegister:r.register,class:"error-handle-table"},{toolbar:b((()=>[j(n,{onClick:r.fireVueError,type:"primary"},{default:b((()=>[g(x(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),j(n,{onClick:r.fireResourceError,type:"primary"},{default:b((()=>[g(x(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),j(n,{onClick:r.fireAjaxError,type:"primary"},{default:b((()=>[g(x(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:b((({record:e})=>[j(E,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default A;