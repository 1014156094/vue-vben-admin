import{j as e,a0 as t,a1 as a,r as n,bu as s,bv as r,aI as o,be as l,ak as c,e as i,b5 as u,bw as d,b6 as p,u as f,aJ as h,bx as m,by as v,bz as C,aZ as b,S as g,s as x,d as y,a9 as S,h as w,o as _,i as k,l as $,aL as O,q as E,bA as A,az as M,aA as j,ab as I,ac as N,k as R,aE as T,bB as D,b2 as z,m as P}from"./index.3f3e66ec.js";import"./animation.06324a5e.js";import{u as L}from"./useScrollTo.a044b2df.js";import{_ as U}from"./index.7f0b3720.js";import{b as B,u as K,d as W}from"./useHeaderSetting.f8bf0715.js";var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var q=function(n,s){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){H(e,t,a[t])}))}return e}({},n,s.attrs);return e(a,t(r,{icon:F}),null)};q.displayName="SearchOutlined",q.inheritAttrs=!1;const J=["keydown"],Z={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},G={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},Q={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>e.metaKey};function V(e,t){if(!e.key)return!1;if(d(t))return e.keyCode===t;const a=t.split(".");let n=0;for(const s of a){const t=Q[s],a=G[s],r=Z[s];(t&&t(e)||(a&&p(a)?a.includes(e.key):a===e.key)||(r&&p(r)?r.includes(e.keyCode):r===e.keyCode)||e.key.toUpperCase()===s.toUpperCase())&&n++}return n===a.length}function X(e,t=r,a={}){const{events:n=J,target:s}=a;let f;function h(a){if(function(e){return c(e)?e:u(e)||d(e)?t=>V(t,e):p(e)?t=>e.some((e=>V(t,e))):e?()=>!0:()=>!1}(e)(a))return t(a)}o((()=>{if(f=function(e,t){if(!e)return t;let a;a=c(e)?e():i(e);return a}(s,window),f)for(const e of n)f.addEventListener(e,h)})),l((()=>{if(f)for(const e of n)f.removeEventListener(e,h)}))}var Y,ee;function te(e,t,a){const s=n([]),r=n(""),o=n(-1);let l=[];const{t:c}=f(),u=x(),[d]=h((function(e){null==e||e.stopPropagation();const t=e.target.value;if(r.value=t.trim(),!t)return void(s.value=[]);const a=function(e){const t=["",...[...e].map((e=>{return["$","(",")","*","+",".","[","]","?","\\","^","{","}","|"].includes(t=e)?`\\${t}`:t;var t})),""].join(".*");return new RegExp(t)}(i(r)),n=b(l,(e=>a.test(e.name)));s.value=p(n,a),o.value=0}),200);function p(e,t,a){const n=[];return e.forEach((e=>{const{name:s,path:r,icon:o,children:l}=e;t.test(s)&&!(null==l?void 0:l.length)&&n.push({name:(null==a?void 0:a.name)?`${a.name} > ${s}`:s,path:r,icon:o}),Array.isArray(l)&&l.length&&n.push(...p(l,t,e))})),n}function y(){const a=i(e);if(!a||!Array.isArray(a)||0===a.length||!i(t))return;const n=a[i(o)];if(!n)return;const s=i(t);if(!s)return;const r=n.offsetTop+n.offsetHeight,l=s.offsetHeight,{start:c}=L({el:s,duration:100,to:r-l});c()}async function S(){if(!s.value.length)return;const e=i(s),t=i(o);if(0===e.length||t<0)return;const a=e[t];w(),await g(),u(a.path)}function w(){s.value=[],a("close")}return m((async()=>{const e=await B();l=v(e),C(l,(e=>{e.name=c(e.name)}))})),X(["enter","up","down","esc"],(e=>{switch(e.keyCode){case 38:s.value.length&&(o.value--,o.value<0&&(o.value=s.value.length-1),y());break;case 40:s.value.length&&(o.value++,o.value>s.value.length-1&&(o.value=0),y());break;case 13:S();break;case 27:w()}})),{handleSearch:d,searchResult:s,keyword:r,activeIndex:o,handleMouseenter:function(e){const t=e.target.dataset.index;o.value=Number(t)},handleEnter:S}}(ee=Y||(Y={}))[ee.UP=38]="UP",ee[ee.DOWN=40]="DOWN",ee[ee.ENTER=13]="ENTER",ee[ee.ESC=27]="ESC";var ae=y({name:"AppSearchFooter",components:{},setup(){const{prefixCls:e}=S("app-search-footer"),{t:t}=f();return{prefixCls:e,t:t}}});const ne=O("data-v-8d332632")(((t,a,n,s,r,o)=>{const l=w("g-icon");return _(),k("div",{class:`${t.prefixCls}`},[e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"ant-design:enter-outlined"})],2),e("span",null,$(t.t("component.app.toSearch")),1),e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"bi:arrow-up"})],2),e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"bi:arrow-down"})],2),e("span",null,$(t.t("component.app.toNavigate")),1),e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"mdi:keyboard-esc"})],2),e("span",null,$(t.t("common.closeText")),1)],2)}));ae.render=ne,ae.__scopeId="data-v-8d332632";var se=y({name:"AppSearchModal",components:{SearchOutlined:q,ClickOutSide:U,AppSearchFooter:ae},emits:["close"],props:{visible:Boolean},setup(e,{emit:t}){const a=n(null),{prefixCls:r}=S("app-search-modal"),{t:o}=f(),[l,c]=function(){const e=n([]);return s((()=>{e.value=[]})),[e,t=>a=>{e.value[t]=a}]}(),{getIsMobile:u}=K(),{handleSearch:d,searchResult:p,keyword:h,activeIndex:m,handleEnter:v,handleMouseenter:C}=te(l,a,t),b=E((()=>!h||0===i(p).length)),g=E((()=>[r,{[`${r}--mobile`]:i(u)}]));return{t:o,prefixCls:r,getClass:g,handleSearch:d,searchResult:p,activeIndex:m,getIsNotData:b,handleEnter:v,setRefs:c,scrollWrap:a,handleMouseenter:C,handleClose:()=>{p.value=[],t("close")}}}});const re=O("data-v-e2d91a28"),oe=re(((t,a,n,s,r,o)=>{const l=w("SearchOutlined"),c=w("a-input"),i=w("g-icon"),u=w("AppSearchFooter"),d=w("ClickOutSide");return _(),k(D,{to:"body"},[e(T,{name:"zoom-fade",mode:"out-in"},{default:re((()=>[t.visible?(_(),k("div",{key:0,class:t.getClass,onClick:a[4]||(a[4]=A((()=>{}),["stop"]))},[e(d,{onClickOutside:t.handleClose},{default:re((()=>[e("div",{class:`${t.prefixCls}-content`},[e("div",{class:`${t.prefixCls}-input__wrapper`},[e(c,{class:`${t.prefixCls}-input`,placeholder:t.t("common.searchText"),"allow-clear":"",onChange:t.handleSearch},{prefix:re((()=>[e(l)])),_:1},8,["class","placeholder","onChange"]),e("span",{class:`${t.prefixCls}-cancel`,onClick:a[1]||(a[1]=(...e)=>t.handleClose&&t.handleClose(...e))},$(t.t("common.cancelText")),3)],2),M(e("div",{class:`${t.prefixCls}-not-data`},$(t.t("component.app.searchNotData")),3),[[j,t.getIsNotData]]),M(e("ul",{class:`${t.prefixCls}-list`,ref:"scrollWrap"},[(_(!0),k(I,null,N(t.searchResult,((n,s)=>(_(),k("li",{ref:t.setRefs(s),key:n.path,"data-index":s,onMouseenter:a[2]||(a[2]=(...e)=>t.handleMouseenter&&t.handleMouseenter(...e)),onClick:a[3]||(a[3]=(...e)=>t.handleEnter&&t.handleEnter(...e)),class:[`${t.prefixCls}-list__item`,{[`${t.prefixCls}-list__item--active`]:t.activeIndex===s}]},[e("div",{class:`${t.prefixCls}-list__item-icon`},[e(i,{icon:n.icon||"mdi:form-select",size:20},null,8,["icon"])],2),e("div",{class:`${t.prefixCls}-list__item-text`},$(n.name),3),e("div",{class:`${t.prefixCls}-list__item-enter`},[e(i,{icon:"ant-design:enter-outlined",size:20})],2)],42,["data-index"])))),128))],2),[[j,!t.getIsNotData]]),e(u)],2)])),_:1},8,["onClickOutside"])],2)):R("",!0)])),_:1})])}));se.render=oe,se.__scopeId="data-v-e2d91a28";var le=y({name:"AppSearch",components:{AppSearchModal:se,Tooltip:z,SearchOutlined:q},setup(){const e=n(!1),{prefixCls:t}=S("app-search"),{getShowSearch:a}=W(),{t:s}=f();return{t:s,prefixCls:t,showModal:e,getShowSearch:a,handleClose:()=>{e.value=!1},handleSearch:function(){e.value=!0}}}});const ce=O("data-v-43b34150"),ie=ce(((t,a,n,s,r,o)=>{const l=w("SearchOutlined"),c=w("Tooltip"),i=w("AppSearchModal");return t.getShowSearch?(_(),k("div",{key:0,class:t.prefixCls,onClick:a[1]||(a[1]=A(((...e)=>t.handleSearch&&t.handleSearch(...e)),["stop"]))},[e(c,null,{title:ce((()=>[P($(t.t("common.searchText")),1)])),default:ce((()=>[e(l)])),_:1}),e(i,{onClose:t.handleClose,visible:t.showModal},null,8,["onClose","visible"])],2)):R("",!0)}));le.render=ie,le.__scopeId="data-v-43b34150";export default le;