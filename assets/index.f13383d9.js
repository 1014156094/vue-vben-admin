import{cA as r,d as e,r as o,u as i,ai as t,S as s,by as a,cX as n,h as l,o as d,i as c,ab as m,ac as f,az as u,aA as p,j,w as b,m as g,l as x}from"./index.3f3e66ec.js";import{f as E}from"./index.6f2b31a6.js";import"./_stringToArray.d7060976.js";import"./domUtils.4604b9f9.js";import"./index.2f984403.js";import"./index.355d90f3.js";import"./index.46e40f07.js";import"./CheckOutlined.533c07d2.js";import{b as y}from"./index.09adbb3f.js";import{_ as R}from"./index.fda86a89.js";import"./FullscreenOutlined.687112ae.js";import"./RightOutlined.d1844cec.js";import"./SettingOutlined.0d60f9f3.js";import"./useTimeout.563f07c7.js";import"./index.45b6380d.js";import"./animation.06324a5e.js";import"./useScrollTo.a044b2df.js";import"./useAttrs.ad5834a5.js";import"./useWindowSizeFn.0885153d.js";import"./index.b3d6e480.js";import"./uuid.a6cec785.js";import"./download.a7f4c239.js";import"./useForm.d4f2eea7.js";import"./useSortable.cf79efb4.js";import"./useExpose.d7ba0a6b.js";import{u as T}from"./useTable.5d9d533a.js";import"./index.8e6d00c6.js";import"./useDescription.f933a2c4.js";import{getColumns as A}from"./data.f6c8573b.js";import h from"./DetailModal.21850277.js";var w;(w||(w={})).Error="/error";var k=e({name:"ErrorHandler",components:{DetailModal:h,BasicTable:R,TableAction:E},setup(){const e=o(),l=o([]),{t:d}=i(),[c,{setTableData:m}]=T({title:d("sys.errorLog.tableTitle"),columns:A(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[f,{openModal:u}]=y();return t((()=>n.getErrorInfoState),(r=>{s((()=>{m(a(r))}))}),{immediate:!0}),{register:c,registerModal:f,handleDetail:function(r){e.value=r,u(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){l.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:async function(){await r.request({url:w.Error,method:"GET"})},imgListRef:l,rowInfoRef:e,t:d}}});const C={class:"p-4"};k.render=function(r,e,o,i,t,s){const a=l("DetailModal"),n=l("a-button"),E=l("TableAction"),y=l("BasicTable");return d(),c("div",C,[(d(!0),c(m,null,f(r.imgListRef,(r=>u((d(),c("img",{key:r,src:r},null,8,["src"])),[[p,!1]]))),128)),j(a,{info:r.rowInfoRef,onRegister:r.registerModal},null,8,["info","onRegister"]),j(y,{onRegister:r.register,class:"error-handle-table"},{toolbar:b((()=>[j(n,{onClick:r.fireVueError,type:"primary"},{default:b((()=>[g(x(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),j(n,{onClick:r.fireResourceError,type:"primary"},{default:b((()=>[g(x(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),j(n,{onClick:r.fireAjaxError,type:"primary"},{default:b((()=>[g(x(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:b((({record:e})=>[j(E,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export default k;