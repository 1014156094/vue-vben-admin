import{r as e,cl as t,cm as a,q as s,s as n,aX as o,e as r,bR as l,cn as i,bS as c,u as d,bu as p,b6 as u,a2 as f,co as h,bI as m,E as v,aD as C,d as x,aN as g,h as b,o as S,i as _,j as w,l as y,bw as k,a0 as $,bA as E,b3 as A,H as j,b9 as I,aO as M,aP as N,k as R,b5 as T,bN as O,b2 as D,m as U}from"./index.d4318adc.js";import"./index.95c10fda.js";import{I as H}from"./index.0077ae0f.js";import{b as K,u as L,d as P}from"./useHeaderSetting.6e96026f.js";import{u as W}from"./useScrollTo.fc1f5456.js";import{C as z}from"./clickOutside.dab4d16e.js";import{S as F}from"./SearchOutlined.1eeb08db.js";import"./vendor.783aefe0.js";import"./EyeOutlined.604588f6.js";import"./animation.9de4462f.js";import"./domUtils.96378b32.js";import"./_stringToArray.3c05aa00.js";const B=["keydown"],q={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},X={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},G={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>e.metaKey};function J(e,t){if(!e.key)return!1;if(i(t))return e.keyCode===t;const a=t.split(".");let s=0;for(const n of a){const t=G[n],a=X[n],o=q[n];(t&&t(e)||(a&&c(a)?a.includes(e.key):a===e.key)||(o&&c(o)?o.includes(e.keyCode):o===e.keyCode)||e.key.toUpperCase()===n.toUpperCase())&&s++}return s===a.length}function Q(e,t=a,d={}){const{events:p=B,target:u}=d;let f;function h(a){if(function(e){return o(e)?e:l(e)||i(e)?t=>J(t,e):c(e)?t=>e.some((e=>J(t,e))):e?()=>!0:()=>!1}(e)(a))return t(a)}s((()=>{if(f=function(e,t){if(!e)return t;let a;a=o(e)?e():r(e);return a}(u,window),f)for(const e of p)f.addEventListener(e,h)})),n((()=>{if(f)for(const e of p)f.removeEventListener(e,h)}))}var V,Y;function Z(t,a,s){const n=e([]),o=e(""),l=e(-1);let i=[];const{t:c}=d(),x=C(),[g]=p((function(e){null==e||e.stopPropagation();const t=e.target.value;if(o.value=t.trim(),!t)return void(n.value=[]);const a=function(e){const t=["",...[...e].map((e=>{return["$","(",")","*","+",".","[","]","?","\\","^","{","}","|"].includes(t=e)?`\\${t}`:t;var t})),""].join(".*");return new RegExp(t)}(r(o)),s=m(i,(e=>a.test(e.name)));n.value=b(s,a),l.value=0}),200);function b(e,t,a){const s=[];return e.forEach((e=>{const{name:n,path:o,icon:r,children:l}=e;t.test(n)&&!(null==l?void 0:l.length)&&s.push({name:(null==a?void 0:a.name)?`${a.name} > ${n}`:n,path:o,icon:r}),Array.isArray(l)&&l.length&&s.push(...b(l,t,e))})),s}function S(){const e=r(t);if(!e||!Array.isArray(e)||0===e.length||!r(a))return;const s=e[r(l)];if(!s)return;const n=r(a);if(!n)return;const o=s.offsetTop+s.offsetHeight,i=n.offsetHeight,{start:c}=W({el:n,duration:100,to:o-i});c()}async function _(){if(!n.value.length)return;const e=r(n),t=r(l);if(0===e.length||t<0)return;const a=e[t];w(),await v(),x(a.path)}function w(){n.value=[],s("close")}return u((async()=>{const e=await K();i=f(e),h(i,(e=>{e.name=c(e.name)}))})),Q(["enter","up","down","esc"],(e=>{switch(e.keyCode){case 38:n.value.length&&(l.value--,l.value<0&&(l.value=n.value.length-1),S());break;case 40:n.value.length&&(l.value++,l.value>n.value.length-1&&(l.value=0),S());break;case 13:_();break;case 27:w()}})),{handleSearch:g,searchResult:n,keyword:o,activeIndex:l,handleMouseenter:function(e){const t=e.target.dataset.index;l.value=Number(t)},handleEnter:_}}(Y=V||(V={}))[Y.UP=38]="UP",Y[Y.DOWN=40]="DOWN",Y[Y.ENTER=13]="ENTER",Y[Y.ESC=27]="ESC";var ee=x({name:"AppSearchFooter",components:{},setup(){const{prefixCls:e}=g("app-search-footer"),{t:t}=d();return{prefixCls:e,t:t}}});const te=k("data-v-8d332632")(((e,t,a,s,n,o)=>{const r=b("g-icon");return S(),_("div",{class:`${e.prefixCls}`},[w("span",{class:`${e.prefixCls}__item`},[w(r,{icon:"ant-design:enter-outlined"})],2),w("span",null,y(e.t("component.app.toSearch")),1),w("span",{class:`${e.prefixCls}__item`},[w(r,{icon:"bi:arrow-up"})],2),w("span",{class:`${e.prefixCls}__item`},[w(r,{icon:"bi:arrow-down"})],2),w("span",null,y(e.t("component.app.toNavigate")),1),w("span",{class:`${e.prefixCls}__item`},[w(r,{icon:"mdi:keyboard-esc"})],2),w("span",null,y(e.t("common.closeText")),1)],2)}));ee.render=te,ee.__scopeId="data-v-8d332632";var ae=x({name:"AppSearchModal",components:{SearchOutlined:F,AppSearchFooter:ee,[H.name]:H},emits:["close"],props:{visible:Boolean},directives:{clickOutside:z},setup(a,{emit:s}){const n=e(null),{prefixCls:o}=g("app-search-modal"),{t:l}=d(),[i,c]=function(){const a=e([]);return t((()=>{a.value=[]})),[a,e=>t=>{a.value[e]=t}]}(),{getIsMobile:p}=L(),{handleSearch:u,searchResult:f,keyword:h,activeIndex:m,handleEnter:v,handleMouseenter:C}=Z(i,n,s),x=$((()=>!h||0===r(f).length)),b=$((()=>[o,{[`${o}--mobile`]:r(p)}]));return{t:l,prefixCls:o,getClass:b,handleSearch:u,searchResult:f,activeIndex:m,getIsNotData:x,handleEnter:v,setRefs:c,scrollWrap:n,handleMouseenter:C,handleClose:()=>{f.value=[],s("close")}}}});const se=k("data-v-4d302d6b"),ne=se(((e,t,a,s,n,o)=>{const r=b("SearchOutlined"),l=b("a-input"),i=b("g-icon"),c=b("AppSearchFooter"),d=E("click-outside");return S(),_(O,{to:"body"},[w(T,{name:"zoom-fade",mode:"out-in"},{default:se((()=>[e.visible?(S(),_("div",{key:0,class:e.getClass,onClick:t[4]||(t[4]=A((()=>{}),["stop"]))},[j(w("div",{class:`${e.prefixCls}-content`},[w("div",{class:`${e.prefixCls}-input__wrapper`},[w(l,{class:`${e.prefixCls}-input`,placeholder:e.t("common.searchText"),"allow-clear":"",onChange:e.handleSearch},{prefix:se((()=>[w(r)])),_:1},8,["class","placeholder","onChange"]),w("span",{class:`${e.prefixCls}-cancel`,onClick:t[1]||(t[1]=(...t)=>e.handleClose&&e.handleClose(...t))},y(e.t("common.cancelText")),3)],2),j(w("div",{class:`${e.prefixCls}-not-data`},y(e.t("component.app.searchNotData")),3),[[I,e.getIsNotData]]),j(w("ul",{class:`${e.prefixCls}-list`,ref:"scrollWrap"},[(S(!0),_(M,null,N(e.searchResult,((a,s)=>(S(),_("li",{ref:e.setRefs(s),key:a.path,"data-index":s,onMouseenter:t[2]||(t[2]=(...t)=>e.handleMouseenter&&e.handleMouseenter(...t)),onClick:t[3]||(t[3]=(...t)=>e.handleEnter&&e.handleEnter(...t)),class:[`${e.prefixCls}-list__item`,{[`${e.prefixCls}-list__item--active`]:e.activeIndex===s}]},[w("div",{class:`${e.prefixCls}-list__item-icon`},[w(i,{icon:a.icon||"mdi:form-select",size:20},null,8,["icon"])],2),w("div",{class:`${e.prefixCls}-list__item-text`},y(a.name),3),w("div",{class:`${e.prefixCls}-list__item-enter`},[w(i,{icon:"ant-design:enter-outlined",size:20})],2)],42,["data-index"])))),128))],2),[[I,!e.getIsNotData]]),w(c)],2),[[d,e.handleClose]])],2)):R("",!0)])),_:1})])}));ae.render=ne,ae.__scopeId="data-v-4d302d6b";var oe=x({name:"AppSearch",components:{AppSearchModal:ae,Tooltip:D,SearchOutlined:F},setup(){const t=e(!1),{prefixCls:a}=g("app-search"),{getShowSearch:s}=P(),{t:n}=d();return{t:n,prefixCls:a,showModal:t,getShowSearch:s,handleClose:()=>{t.value=!1},handleSearch:function(){t.value=!0}}}});const re=k("data-v-43b34150"),le=re(((e,t,a,s,n,o)=>{const r=b("SearchOutlined"),l=b("Tooltip"),i=b("AppSearchModal");return e.getShowSearch?(S(),_("div",{key:0,class:e.prefixCls,onClick:t[1]||(t[1]=A(((...t)=>e.handleSearch&&e.handleSearch(...t)),["stop"]))},[w(l,null,{title:re((()=>[U(y(e.t("common.searchText")),1)])),default:re((()=>[w(r)])),_:1}),w(i,{onClose:e.handleClose,visible:e.showModal},null,8,["onClose","visible"])],2)):R("",!0)}));oe.render=le,oe.__scopeId="data-v-43b34150";export default oe;