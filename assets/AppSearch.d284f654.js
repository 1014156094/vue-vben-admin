import{j as e,a0 as t,a1 as a,r as n,bA as s,bB as r,ao as o,bn as l,ak as c,e as i,bh as u,bC as p,bi as d,u as f,aW as h,ax as m,bD as v,bE as C,ba as b,S as g,s as x,d as y,a9 as S,h as w,o as _,i as k,l as $,aY as A,q as E,b0 as O,at as j,aA as M,aB as T,ab as D,ac as I,k as N,av as R,bF as P,as as U,m as z}from"./index.c9b191ae.js";import"./_stringToArray.f9d23805.js";import"./domUtils.43bacb00.js";import"./animation.f174d9e2.js";import{u as B}from"./useScrollTo.ed4075e5.js";import{C as L}from"./clickOutside.5c695aaa.js";import{b as W,u as F,d as K}from"./useHeaderSetting.82182910.js";var H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"};function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Y=function(n,s){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){q(e,t,a[t])}))}return e}({},n,s.attrs);return e(a,t(r,{icon:H}),null)};Y.displayName="SearchOutlined",Y.inheritAttrs=!1;const G=["keydown"],J={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Q={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},V={ctrl:e=>e.ctrlKey,shift:e=>e.shiftKey,alt:e=>e.altKey,meta:e=>e.metaKey};function X(e,t){if(!e.key)return!1;if(p(t))return e.keyCode===t;const a=t.split(".");let n=0;for(const s of a){const t=V[s],a=Q[s],r=J[s];(t&&t(e)||(a&&d(a)?a.includes(e.key):a===e.key)||(r&&d(r)?r.includes(e.keyCode):r===e.keyCode)||e.key.toUpperCase()===s.toUpperCase())&&n++}return n===a.length}function Z(e,t=r,a={}){const{events:n=G,target:s}=a;let f;function h(a){if(function(e){return c(e)?e:u(e)||p(e)?t=>X(t,e):d(e)?t=>e.some((e=>X(t,e))):e?()=>!0:()=>!1}(e)(a))return t(a)}o((()=>{if(f=function(e,t){if(!e)return t;let a;a=c(e)?e():i(e);return a}(s,window),f)for(const e of n)f.addEventListener(e,h)})),l((()=>{if(f)for(const e of n)f.removeEventListener(e,h)}))}var ee,te;function ae(e,t,a){const s=n([]),r=n(""),o=n(-1);let l=[];const{t:c}=f(),u=x(),[p]=h((function(e){null==e||e.stopPropagation();const t=e.target.value;if(r.value=t.trim(),!t)return void(s.value=[]);const a=function(e){const t=["",...[...e].map((e=>{return["$","(",")","*","+",".","[","]","?","\\","^","{","}","|"].includes(t=e)?`\\${t}`:t;var t})),""].join(".*");return new RegExp(t)}(i(r)),n=b(l,(e=>a.test(e.name)));s.value=d(n,a),o.value=0}),200);function d(e,t,a){const n=[];return e.forEach((e=>{const{name:s,path:r,icon:o,children:l}=e;t.test(s)&&!(null==l?void 0:l.length)&&n.push({name:(null==a?void 0:a.name)?`${a.name} > ${s}`:s,path:r,icon:o}),Array.isArray(l)&&l.length&&n.push(...d(l,t,e))})),n}function y(){const a=i(e);if(!a||!Array.isArray(a)||0===a.length||!i(t))return;const n=a[i(o)];if(!n)return;const s=i(t);if(!s)return;const r=n.offsetTop+n.offsetHeight,l=s.offsetHeight,{start:c}=B({el:s,duration:100,to:r-l});c()}async function S(){if(!s.value.length)return;const e=i(s),t=i(o);if(0===e.length||t<0)return;const a=e[t];w(),await g(),u(a.path)}function w(){s.value=[],a("close")}return m((async()=>{const e=await W();l=v(e),C(l,(e=>{e.name=c(e.name)}))})),Z(["enter","up","down","esc"],(e=>{switch(e.keyCode){case 38:s.value.length&&(o.value--,o.value<0&&(o.value=s.value.length-1),y());break;case 40:s.value.length&&(o.value++,o.value>s.value.length-1&&(o.value=0),y());break;case 13:S();break;case 27:w()}})),{handleSearch:p,searchResult:s,keyword:r,activeIndex:o,handleMouseenter:function(e){const t=e.target.dataset.index;o.value=Number(t)},handleEnter:S}}(te=ee||(ee={}))[te.UP=38]="UP",te[te.DOWN=40]="DOWN",te[te.ENTER=13]="ENTER",te[te.ESC=27]="ESC";var ne=y({name:"AppSearchFooter",components:{},setup(){const{prefixCls:e}=S("app-search-footer"),{t:t}=f();return{prefixCls:e,t:t}}});const se=A("data-v-8d332632")(((t,a,n,s,r,o)=>{const l=w("g-icon");return _(),k("div",{class:`${t.prefixCls}`},[e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"ant-design:enter-outlined"})],2),e("span",null,$(t.t("component.app.toSearch")),1),e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"bi:arrow-up"})],2),e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"bi:arrow-down"})],2),e("span",null,$(t.t("component.app.toNavigate")),1),e("span",{class:`${t.prefixCls}__item`},[e(l,{icon:"mdi:keyboard-esc"})],2),e("span",null,$(t.t("common.closeText")),1)],2)}));ne.render=se,ne.__scopeId="data-v-8d332632";var re=y({name:"AppSearchModal",components:{SearchOutlined:Y,AppSearchFooter:ne},emits:["close"],props:{visible:Boolean},directives:{clickOutside:L},setup(e,{emit:t}){const a=n(null),{prefixCls:r}=S("app-search-modal"),{t:o}=f(),[l,c]=function(){const e=n([]);return s((()=>{e.value=[]})),[e,t=>a=>{e.value[t]=a}]}(),{getIsMobile:u}=F(),{handleSearch:p,searchResult:d,keyword:h,activeIndex:m,handleEnter:v,handleMouseenter:C}=ae(l,a,t),b=E((()=>!h||0===i(d).length)),g=E((()=>[r,{[`${r}--mobile`]:i(u)}]));return{t:o,prefixCls:r,getClass:g,handleSearch:p,searchResult:d,activeIndex:m,getIsNotData:b,handleEnter:v,setRefs:c,scrollWrap:a,handleMouseenter:C,handleClose:()=>{d.value=[],t("close")}}}});const oe=A("data-v-57df884e"),le=oe(((t,a,n,s,r,o)=>{const l=w("SearchOutlined"),c=w("a-input"),i=w("g-icon"),u=w("AppSearchFooter"),p=O("click-outside");return _(),k(P,{to:"body"},[e(R,{name:"zoom-fade",mode:"out-in"},{default:oe((()=>[t.visible?(_(),k("div",{key:0,class:t.getClass,onClick:a[4]||(a[4]=j((()=>{}),["stop"]))},[M(e("div",{class:`${t.prefixCls}-content`},[e("div",{class:`${t.prefixCls}-input__wrapper`},[e(c,{class:`${t.prefixCls}-input`,placeholder:t.t("common.searchText"),"allow-clear":"",onChange:t.handleSearch},{prefix:oe((()=>[e(l)])),_:1},8,["class","placeholder","onChange"]),e("span",{class:`${t.prefixCls}-cancel`,onClick:a[1]||(a[1]=(...e)=>t.handleClose&&t.handleClose(...e))},$(t.t("common.cancelText")),3)],2),M(e("div",{class:`${t.prefixCls}-not-data`},$(t.t("component.app.searchNotData")),3),[[T,t.getIsNotData]]),M(e("ul",{class:`${t.prefixCls}-list`,ref:"scrollWrap"},[(_(!0),k(D,null,I(t.searchResult,((n,s)=>(_(),k("li",{ref:t.setRefs(s),key:n.path,"data-index":s,onMouseenter:a[2]||(a[2]=(...e)=>t.handleMouseenter&&t.handleMouseenter(...e)),onClick:a[3]||(a[3]=(...e)=>t.handleEnter&&t.handleEnter(...e)),class:[`${t.prefixCls}-list__item`,{[`${t.prefixCls}-list__item--active`]:t.activeIndex===s}]},[e("div",{class:`${t.prefixCls}-list__item-icon`},[e(i,{icon:n.icon||"mdi:form-select",size:20},null,8,["icon"])],2),e("div",{class:`${t.prefixCls}-list__item-text`},$(n.name),3),e("div",{class:`${t.prefixCls}-list__item-enter`},[e(i,{icon:"ant-design:enter-outlined",size:20})],2)],42,["data-index"])))),128))],2),[[T,!t.getIsNotData]]),e(u)],2),[[p,t.handleClose]])],2)):N("",!0)])),_:1})])}));re.render=le,re.__scopeId="data-v-57df884e";var ce=y({name:"AppSearch",components:{AppSearchModal:re,Tooltip:U,SearchOutlined:Y},setup(){const e=n(!1),{prefixCls:t}=S("app-search"),{getShowSearch:a}=K(),{t:s}=f();return{t:s,prefixCls:t,showModal:e,getShowSearch:a,handleClose:()=>{e.value=!1},handleSearch:function(){e.value=!0}}}});const ie=A("data-v-43b34150"),ue=ie(((t,a,n,s,r,o)=>{const l=w("SearchOutlined"),c=w("Tooltip"),i=w("AppSearchModal");return t.getShowSearch?(_(),k("div",{key:0,class:t.prefixCls,onClick:a[1]||(a[1]=j(((...e)=>t.handleSearch&&t.handleSearch(...e)),["stop"]))},[e(c,null,{title:ie((()=>[z($(t.t("common.searchText")),1)])),default:ie((()=>[e(l)])),_:1}),e(i,{onClose:t.handleClose,visible:t.showModal},null,8,["onClose","visible"])],2)):N("",!0)}));ce.render=ue,ce.__scopeId="data-v-43b34150";export default ce;