var Ze=Object.assign;import{Y as Gr,cI as Zr,cE as Jr,d as Xr,aG as wn,r as ft,a0 as Yr,e as nt,q as $r,E as Qr,bW as eo,ck as to,o as no,i as ro}from"./index.de7a3c72.js";import{u as oo}from"./index.84a30426.js";import"./useTimeout.5494657f.js";import"./useAttrs.5fb4b160.js";import"./useWindowSizeFn.5bd3f00e.js";import"./index.b5f656c2.js";import"./index.cf88fb23.js";import"./domUtils.aa6aef94.js";import"./_stringToArray.9f34c09e.js";import"./RightOutlined.dcad5eff.js";import"./index.95c10fda.js";import"./useScrollTo.3c6228cf.js";import"./animation.29409132.js";import"./FullscreenOutlined.09f91c42.js";import"./isEqual.42834150.js";/*!
* Vditor v3.7.7 - A markdown editor written in TypeScript.
*   
* MIT License
* 
* Copyright (c) 2018-present B3log 开源, b3log.org
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in all
* copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
* SOFTWARE.
* 
*/var io=Gr(function(Je,mt){(function(re,H){Je.exports=H()})(Zr,function(){return function(re){var H={};function g(l){if(H[l])return H[l].exports;var u=H[l]={i:l,l:!1,exports:{}};return re[l].call(u.exports,u,u.exports,g),u.l=!0,u.exports}return g.m=re,g.c=H,g.d=function(l,u,s){g.o(l,u)||Object.defineProperty(l,u,{enumerable:!0,get:s})},g.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},g.t=function(l,u){if(1&u&&(l=g(l)),8&u||4&u&&typeof l=="object"&&l&&l.__esModule)return l;var s=Object.create(null);if(g.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:l}),2&u&&typeof l!="string")for(var c in l)g.d(s,c,function(v){return l[v]}.bind(null,c));return s},g.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return g.d(u,"a",u),u},g.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},g.p="",g(g.s=27)}([function(re,H,g){g.d(H,"b",function(){return c}),g.d(H,"a",function(){return v}),g.d(H,"e",function(){return p}),g.d(H,"h",function(){return f}),g.d(H,"c",function(){return k}),g.d(H,"g",function(){return b}),g.d(H,"f",function(){return C}),g.d(H,"d",function(){return _});var l=g(2),u=g(3),s=g(1),c=function(S){var w;return getSelection().rangeCount>0&&(w=getSelection().getRangeAt(0),S.isEqualNode(w.startContainer)||S.contains(w.startContainer))||(S.focus(),(w=S.ownerDocument.createRange()).setStart(S,0),w.collapse(!0)),w},v=function(S){var w=window.getSelection().getRangeAt(0);if(!S.contains(w.startContainer)&&!Object(s.e)(w.startContainer,"vditor-panel--none"))return{left:0,top:0};var M,R=S.parentElement.getBoundingClientRect();if(w.getClientRects().length===0)if(w.startContainer.nodeType===3){var B=w.startContainer.parentElement;if(!(B&&B.getClientRects().length>0))return{left:0,top:0};M=B.getClientRects()[0]}else{var F=w.startContainer.children;if(F[w.startOffset]&&F[w.startOffset].getClientRects().length>0)M=F[w.startOffset].getClientRects()[0];else if(w.startContainer.childNodes.length>0){var x=w.cloneRange();w.selectNode(w.startContainer.childNodes[Math.max(0,w.startOffset-1)]),M=w.getClientRects()[0],w.setEnd(x.endContainer,x.endOffset),w.setStart(x.startContainer,x.startOffset)}else M=w.startContainer.getClientRects()[0];if(!M){for(var $=w.startContainer.childNodes[w.startOffset];!$.getClientRects||$.getClientRects&&$.getClientRects().length===0;)$=$.parentElement;M=$.getClientRects()[0]}}else M=w.getClientRects()[0];return{left:M.left-R.left,top:M.top-R.top}},p=function(S,w){if(!w){if(getSelection().rangeCount===0)return!1;w=getSelection().getRangeAt(0)}var M=w.commonAncestorContainer;return S.isEqualNode(M)||S.contains(M)},f=function(S){var w=window.getSelection();w.removeAllRanges(),w.addRange(S)},k=function(S,w,M){var R={end:0,start:0};if(!M){if(getSelection().rangeCount===0)return R;M=window.getSelection().getRangeAt(0)}if(p(w,M)){var B=M.cloneRange();S.childNodes[0]&&S.childNodes[0].childNodes[0]?B.setStart(S.childNodes[0].childNodes[0],0):B.selectNodeContents(S),B.setEnd(M.startContainer,M.startOffset),R.start=B.toString().length,R.end=R.start+M.toString().length}return R},b=function(S,w,M){var R=0,B=0,F=M.childNodes[B],x=!1,$=!1;S=Math.max(0,S),w=Math.max(0,w);var ne=M.ownerDocument.createRange();for(ne.setStart(F||M,0),ne.collapse(!0);!$&&F;){var ue=R+F.textContent.length;if(!x&&S>=R&&S<=ue&&(S===0?ne.setStart(F,0):F.childNodes[0].nodeType===3?ne.setStart(F.childNodes[0],S-R):F.nextSibling?ne.setStartBefore(F.nextSibling):ne.setStartAfter(F),x=!0,S===w)){$=!0;break}x&&w>=R&&w<=ue&&(w===0?ne.setEnd(F,0):F.childNodes[0].nodeType===3?ne.setEnd(F.childNodes[0],w-R):F.nextSibling?ne.setEndBefore(F.nextSibling):ne.setEndAfter(F),$=!0),R=ue,F=M.childNodes[++B]}return!$&&M.childNodes[B-1]&&ne.setStartBefore(M.childNodes[B-1]),f(ne),ne},C=function(S,w){var M=S.querySelector("wbr");if(M){if(M.previousElementSibling)if(M.previousElementSibling.isSameNode(M.previousSibling)){if(M.previousElementSibling.lastChild)return w.setStartBefore(M),w.collapse(!0),f(w),!Object(u.c)()||M.previousElementSibling.tagName!=="EM"&&M.previousElementSibling.tagName!=="STRONG"&&M.previousElementSibling.tagName!=="S"||(w.insertNode(document.createTextNode(l.a.ZWSP)),w.collapse(!1)),void M.remove();w.setStartAfter(M.previousElementSibling)}else w.setStart(M.previousSibling,M.previousSibling.textContent.length);else M.previousSibling?w.setStart(M.previousSibling,M.previousSibling.textContent.length):M.nextSibling?M.nextSibling.nodeType===3?w.setStart(M.nextSibling,0):w.setStartBefore(M.nextSibling):w.setStart(M.parentElement,0);w.collapse(!0),M.remove(),f(w)}},_=function(S,w){var M=document.createElement("div");M.innerHTML=S;var R=M.querySelectorAll("p");R.length===1&&!R[0].previousSibling&&!R[0].nextSibling&&w[w.currentMode].element.children.length>0&&M.firstElementChild.tagName==="P"&&(S=R[0].innerHTML.trim());var B=document.createElement("div");B.innerHTML=S;var F=c(w[w.currentMode].element);if(F.toString()!==""&&(w[w.currentMode].preventInput=!0,document.execCommand("delete",!1,"")),B.firstElementChild&&B.firstElementChild.getAttribute("data-block")==="0"){B.lastElementChild.insertAdjacentHTML("beforeend","<wbr>");var x=Object(s.c)(F.startContainer);x?x.insertAdjacentHTML("afterend",B.innerHTML):w[w.currentMode].element.insertAdjacentHTML("beforeend",B.innerHTML),C(w[w.currentMode].element,F)}else{var $=document.createElement("template");$.innerHTML=S,F.insertNode($.content.cloneNode(!0)),F.collapse(!1),f(F)}}},function(re,H,g){g.d(H,"g",function(){return u}),g.d(H,"h",function(){return s}),g.d(H,"b",function(){return c}),g.d(H,"d",function(){return v}),g.d(H,"c",function(){return p}),g.d(H,"f",function(){return f}),g.d(H,"e",function(){return k}),g.d(H,"a",function(){return b});var l=g(6),u=function(C,_){for(var S=k(C,_),w=!1,M=!1;S&&!S.classList.contains("vditor-reset")&&!M;)(w=k(S.parentElement,_))?S=w:M=!0;return S||!1},s=function(C,_){for(var S=Object(l.b)(C,_),w=!1,M=!1;S&&!S.classList.contains("vditor-reset")&&!M;)(w=Object(l.b)(S.parentElement,_))?S=w:M=!0;return S||!1},c=function(C){var _=s(C,"UL"),S=s(C,"OL"),w=_;return S&&(!_||_&&S.contains(_))&&(w=S),w},v=function(C,_,S){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);for(var w=C,M=!1;w&&!M&&!w.classList.contains("vditor-reset");)w.getAttribute(_)===S?M=!0:w=w.parentElement;return M&&w},p=function(C){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);var _=C,S=!1,w=v(C,"data-block","0");if(w)return w;for(;_&&!S&&!_.classList.contains("vditor-reset");)_.tagName==="H1"||_.tagName==="H2"||_.tagName==="H3"||_.tagName==="H4"||_.tagName==="H5"||_.tagName==="H6"||_.tagName==="P"||_.tagName==="BLOCKQUOTE"||_.tagName==="OL"||_.tagName==="UL"?S=!0:_=_.parentElement;return S&&_},f=function(C,_){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);for(var S=C,w=!1;S&&!w&&!S.classList.contains("vditor-reset");)S.nodeName===_?w=!0:S=S.parentElement;return w&&S},k=function(C,_){if(!C)return!1;C.nodeType===3&&(C=C.parentElement);for(var S=C,w=!1;S&&!w&&!S.classList.contains("vditor-reset");)S.classList.contains(_)?w=!0:S=S.parentElement;return w&&S},b=function(C){for(;C&&C.lastChild;)C=C.lastChild;return C}},function(re,H,g){g.d(H,"b",function(){return l}),g.d(H,"a",function(){return u});var l="3.7.7",u=function(){function s(){}return s.ZWSP="\u200B",s.MOBILE_WIDTH=520,s.CLASS_MENU_DISABLED="vditor-menu--disabled",s.EDIT_TOOLBARS=["emoji","headings","bold","italic","strike","link","list","ordered-list","outdent","indent","check","line","quote","code","inline-code","insert-after","insert-before","upload","record","table"],s.CODE_THEME=["abap","algol","algol_nu","arduino","autumn","borland","bw","colorful","dracula","emacs","friendly","fruity","github","igor","lovelace","manni","monokai","monokailight","murphy","native","paraiso-dark","paraiso-light","pastie","perldoc","pygments","rainbow_dash","rrt","solarized-dark","solarized-dark256","solarized-light","swapoff","tango","trac","vim","vs","xcode","ant-design"],s.CODE_LANGUAGES=["mermaid","echarts","mindmap","abc","graphviz","flowchart","apache","bash","cs","cpp","css","coffeescript","diff","xml","http","ini","json","java","javascript","js","makefile","markdown","nginx","objectivec","php","perl","properties","python","ruby","sql","shell","dart","erb","go","gradle","julia","kotlin","less","lua","matlab","rust","scss","typescript","ts","yaml"],s.CDN="https://cdn.jsdelivr.net/npm/vditor@3.7.7",s.MARKDOWN_OPTIONS={autoSpace:!1,codeBlockPreview:!0,fixTermTypo:!1,footnotes:!0,linkBase:"",linkPrefix:"",listStyle:!1,mark:!1,mathBlockPreview:!0,paragraphBeginningSpace:!1,sanitize:!0,toc:!1},s.HLJS_OPTIONS={enable:!0,lineNumber:!1,style:"github"},s.MATH_OPTIONS={engine:"KaTeX",inlineDigit:!1,macros:{}},s.THEME_OPTIONS={current:"light",list:{"ant-design":"Ant Design",dark:"Dark",light:"Light",wechat:"WeChat"},path:s.CDN+"/dist/css/content-theme"},s}()},function(re,H,g){g.d(H,"f",function(){return l}),g.d(H,"e",function(){return u}),g.d(H,"a",function(){return s}),g.d(H,"b",function(){return c}),g.d(H,"d",function(){return v}),g.d(H,"g",function(){return p}),g.d(H,"c",function(){return f});var l=function(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1},u=function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},s=function(){try{return typeof localStorage!="undefined"}catch(k){return!1}},c=function(){return navigator.userAgent.indexOf("iPhone")>-1?"touchstart":"click"},v=function(k){return navigator.platform.toUpperCase().indexOf("MAC")>=0?!(!k.metaKey||k.ctrlKey):!(k.metaKey||!k.ctrlKey)},p=function(k){return/Mac/.test(navigator.platform)||navigator.platform==="iPhone"?(k=k.replace("ctrl","\u2318").replace("shift","\u21E7").replace("alt","\u2325")).indexOf("\u21E7")>-1&&(k=u()?k.replace(";",":").replace("=","+"):k.replace(":",";").replace("+","=").replace("_","-")):(k=k.replace("\u2318","ctrl").replace("\u21E7","shift").replace("\u2325","alt")).indexOf("shift")>-1&&(k=k.replace(";",":").replace("=","+")),k},f=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}},function(re,H,g){g.d(H,"a",function(){return l});var l={en_US:{alignCenter:"Center",alignLeft:"Left",alignRight:"Right",alternateText:"Alternate text",bold:"Blod",both:"editor & preview",check:"Task List",close:"Close",code:"Code Block","code-theme":"Code Block Theme Preview",column:"Column",comment:"Comment",confirm:"Confirm","content-theme":"Content Theme Preview",copied:"Copied",copy:"Copy","delete-column":"Delete Row","delete-row":"Delete Column",devtools:"DevTools",down:"Down",downloadTip:"The browser does not support the download function",edit:"Edit","edit-mode":"Toggle Edit Mode",emoji:"Emoji",export:"Export",fileTypeError:"file type is error",footnoteRef:"Footnote Ref",fullscreen:"Toggle Fullscreen",generate:"Generating",headings:"Headings",help:"Help",imageURL:"image URL",indent:"Indent",info:"Info","inline-code":"Inline Code","insert-after":"Insert line after","insert-before":"Insert line Before","insert-column":"Insert Column","insert-row":"Insert Row",instantRendering:"Instant Rendering",italic:"Italic",language:"Language",line:"Line",link:"Link",linkRef:"Link Ref",list:"List",more:"More",nameEmpty:"Name is empty","ordered-list":"Order List",outdent:"Outdent",outline:"Outline",over:"over",performanceTip:"Real-time preview requires ${x}ms, you can close it",preview:"Preview",quote:"Quote",record:"Start Record/End Record","record-tip":"The device does not support recording",recording:"recording...",redo:"Redo",remove:"Remove",row:"Row",spin:"Spin",splitView:"Split View",strike:"Strike",table:"Table",textIsNotEmpty:"text(no empty)",title:"Title",tooltipText:"Tooltip text",undo:"Undo",up:"Up",update:"Update",upload:"Upload image or file",uploadError:"upload error",uploading:"uploading...",wysiwyg:"WYSIWYG"},ja_JP:{alignCenter:"\u4E2D\u592E",alignLeft:"\u5DE6\u5074",alignRight:"\u53F3\u5074",alternateText:"\u30A4\u30E1\u30FC\u30B8\u30BF\u30B0",bold:"\u592A\u304F",both:"\u30A8\u30C7\u30A3\u30BF\u30FC & \u30D7\u30EC\u30D3\u30E5\u30FC",check:"\u30C1\u30A7\u30C3\u30AF\u30EA\u30B9\u30C8",close:"\u9589\u3058\u308B",code:"\u30B3\u30FC\u30C9\u30D6\u30ED\u30C3\u30AF\u633F\u5165","code-theme":"\u30B3\u30FC\u30C9\u30D6\u30ED\u30C3\u30AF\u30C6\u30FC\u30DE",column:"\u884C\u5217",comment:"\u30B3\u30E1\u30F3\u30C8",confirm:"\u78BA\u8A8D","content-theme":"\u30B3\u30F3\u30C6\u30F3\u30C4\u30C6\u30FC\u30DE",copied:"\u30B3\u30D4\u30FC\u5B8C\u4E86",copy:"\u30B3\u30D4\u30FC","delete-column":"\u5217 \u6D88\u53BB","delete-row":"\u884C \u6D88\u53BB",devtools:"\u958B\u767A\u30C4\u30FC\u30EB",down:"\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9",downloadTip:"\u30D6\u30E9\u30A6\u30B6\u304C\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u6A5F\u80FD\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u305B\u3093\u3002",edit:"\u4FEE\u6B63","edit-mode":"\u7DE8\u96C6\u30E2\u30FC\u30C9",emoji:"\u7D75\u6587\u5B57",export:"\u66F8\u304D\u51FA\u3057",fileTypeError:"\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u305B\u3093\u3002",footnoteRef:"\u811A\u6CE8\u53C2\u7167",fullscreen:"\u5168\u4F53\u753B\u9762",generate:"\u4F5C\u6210\u3059\u308B",headings:"\u30BF\u30A4\u30C8\u30EB\u5927\u304D\u3055",help:"\u30D8\u30EB\u30D7",imageURL:"\u30A4\u30E1\u30FC\u30B8 URL",indent:"\u5B57\u4E0B\u3052",info:"\u60C5\u5831","inline-code":"\u30A4\u30F3\u30E9\u30A4\u30F3\u30B3\u30FC\u30C9","insert-after":"\u30D6\u30ED\u30C3\u30AF\u306E\u5F8C\u308D\u306B\u5165\u529B","insert-before":"\u30D6\u30ED\u30C3\u30AF\u306E\u524D\u306B\u5165\u529B","insert-column":"\u5217 \u633F\u5165","insert-row":"\u884C \u633F\u5165",instantRendering:"\u30A4\u30F3\u30B9\u30BF\u30F3\u30C8\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0",italic:"\u659C\u4F53",language:"\u8A00\u8A9E",line:"\u6BB5\u843D\u5206\u5272",link:"\u30EA\u30F3\u30AF",linkRef:"\u30EA\u30F3\u30AF\u53C2\u7167",list:"\u30EA\u30B9\u30C8",more:"\u8A73\u3057\u304F\u898B\u308B",nameEmpty:"\u540D\u524D\u304C\u5165\u529B\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002","ordered-list":"\u9806\u5E8F\u306E\u3042\u308B\u30EA\u30B9\u30C8",outdent:"\u3076\u3089\u4E0B\u3052\u30A4\u30F3\u30C7\u30F3\u30C8",outline:"\u6982\u8981",over:"\u30AA\u30FC\u30D0\u30FC",performanceTip:"\u30EA\u30A2\u30EB\u30BF\u30A4\u30E0\u30D7\u30EC\u30D3\u30E5\u30FC\u306B\u306F\u3001${x}ms\u304C\u5FC5\u8981\u3067\u30A8\u30C7\u30A3\u30BF\u30FC/\u30D7\u30EC\u30D3\u30E5\u30FC\u30DC\u30BF\u30F3\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u9589\u3058\u308B\u4E8B\u304C\u51FA\u6765\u307E\u3059\u3002",preview:"\u30D7\u30EC\u30D3\u30E5\u30FC",quote:"\u5F15\u7528\u6BB5\u843D",record:"\u9332\u97F3\u958B\u59CB/\u9332\u97F3\u7D42\u4E86","record-tip":"\u9332\u97F3\u304C\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u305B\u3093\u3002",recording:"\u9332\u97F3\u4E2D...",redo:"\u623B\u308B",remove:"\u6D88\u53BB",row:"\u5217",spin:"\u30B9\u30D4\u30F3",splitView:"\u30DE\u30FC\u30AF\u30C0\u30A6\u30F3",strike:"\u53D6\u308A\u6D88\u3057\u7DDA",table:"\u8868 \u633F\u5165",textIsNotEmpty:"\u30C6\u30AD\u30B9\u30C8(no empty)",title:"\u984C\u540D",tooltipText:"\u30C4\u30FC\u30EB\u30C1\u30C3\u30D7",undo:"\u53D6\u308A\u6D88\u3059",up:"\u623B\u308B",update:"\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8",upload:"\u30A4\u30E1\u30FC\u30B8\u3092\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3059\u308B",uploadError:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u5931\u6557",uploading:"\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u4E2D",wysiwyg:"\u30A6\u30A3\u30B8\u30A6\u30A3\u30B0"},ko_KR:{alignCenter:"\uAC00\uC6B4\uB370",alignLeft:"\uC67C\uCABD",alignRight:"\uC624\uB978\uCABD",alternateText:"\uC774\uBBF8\uC9C0 \uD0DC\uADF8",bold:"\uAD75\uAC8C",both:"\uC5D0\uB514\uD130 & \uBBF8\uB9AC\uBCF4\uAE30",check:"\uCCB4\uD06C\uBC15\uC2A4",close:"\uB2EB\uAE30",code:"\uCF54\uB4DC\uBE14\uB7ED\uC0BD\uC785","code-theme":"\uCF54\uB4DC\uBE14\uB7ED\uD14C\uB9C8",column:"\uD589",comment:"\uCF54\uBA58\uD2B8",confirm:"\uD655\uC778","content-theme":"\uCEE8\uD150\uCE20\uD14C\uB9C8",copied:"\uBCF5\uC0AC\uC644\uB8CC",copy:"\uBCF5\uC0AC","delete-column":"\uC5F4 \uC0AD\uC81C","delete-row":"\uD589 \uC0AD\uC81C",devtools:"\uAC1C\uBC1C\uD234",down:"\uB2E4\uC6B4",downloadTip:"\uBE0C\uB77C\uC6B0\uC800\uAC00 \uB2E4\uC6B4\uB85C\uB4DC \uAE30\uB2A5\uC744 \uC9C0\uC6D0\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4",edit:"\uC218\uC815","edit-mode":"\uD3B8\uC9D1\uBAA8\uB4DC",emoji:"\uC774\uBAA8\uC9C0",export:"\uB0B4\uBCF4\uB0B4\uAE30",fileTypeError:"\uC9C0\uC6D0\uD558\uC9C0\uC54A\uC2B5\uB2C8\uB2E4.",footnoteRef:"\uAC01\uC8FC\uCC38\uC870",fullscreen:"\uC804\uCCB4\uD654\uBA74",generate:"\uC0DD\uC131",headings:"\uC81C\uBAA9\uD06C\uAE30",help:"\uB3C4\uC6C0\uB9D0",imageURL:"\uC774\uBBF8\uC9C0 URL",indent:"\uB4E4\uC5EC\uC4F0\uAE30",info:"\uC815\uBCF4","inline-code":"\uC778\uB77C\uC778\uCF54\uB4DC","insert-after":"\uBE14\uB77D \uB4A4\uB85C \uC785\uB825","insert-before":"\uBE14\uB77D \uC55E\uC73C\uB85C \uC785\uB825","insert-column":"\uC5F4 \uC0BD\uC785","insert-row":"\uD589 \uC0BD\uC785",instantRendering:"\uD0C0\uC774\uD3EC\uB77C",italic:"\uAE30\uC6B8\uC784\uAF34",language:"\uC5B8\uC5B4",line:"\uBB38\uB2E8\uB098\uB214",link:"\uB9C1\uD06C",linkRef:"\uB9C1\uD06C \uCC38\uC870",list:"\uC21C\uC11C\uC5C6\uB294 \uBAA9\uB85D",more:"\uB354\uBCF4\uAE30",nameEmpty:"\uC774\uB984\uC774 \uBE44\uC5B4\uC788\uC2B5\uB2C8\uB2E4.","ordered-list":"\uC21C\uC11C\uC788\uB294 \uBAA9\uB85D",outdent:"\uB0B4\uC5B4\uC4F0\uAE30",outline:"\uAC1C\uC694",over:"\uC624\uBC84",performanceTip:"\uC2E4\uC2DC\uAC04 \uBBF8\uB9AC\uBCF4\uAE30\uC5D0\uB294 ${x}ms\uAC00 \uD544\uC694\uD558\uBA70 \uC5D0\uB514\uD130/\uBBF8\uB9AC\uBCF4\uAE30 \uBC84\uD2BC\uC744 \uD074\uB9AD\uD558\uC5EC \uB2EB\uC744 \uC218 \uC788\uC2B5\uB2C8\uB2E4.",preview:"\uBBF8\uB9AC\uBCF4\uAE30",quote:"\uC778\uC6A9\uB2E8\uB77D",record:"\uB179\uC74C\uC2DC\uC791/\uB179\uC74C\uC885\uB8CC","record-tip":"\uB179\uC74C\uC744 \uC9C0\uC6D0\uD558\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.",recording:"\uB179\uC74C\uC911...",redo:"\uB418\uB3CC\uB9AC\uAE30",remove:"\uC0AD\uC81C",row:"\uC5F4",spin:"\uD68C\uC804",splitView:"\uB9C8\uD06C\uB2E4\uC6B4",strike:"\uCDE8\uC18C\uC120",table:"\uD45C\uC0BD\uC785",textIsNotEmpty:"\uD14D\uC2A4\uD2B8(no empty)",title:"\uD45C\uC81C",tooltipText:"\uD234\uD301",undo:"\uCDE8\uC18C\uD558\uAE30",up:"\uC704\uB85C",update:"\uC5C5\uB370\uC774\uD2B8",upload:"\uC774\uBBF8\uC9C0 \uC5C5\uB85C\uB4DC\uD558\uAE30",uploadError:"\uC5C5\uB85C\uB4DC \uC2E4\uD328",uploading:"\uC5C5\uB85C\uB4DC\uC911...",wysiwyg:"\uC704\uC9C0\uC704\uADF8"},zh_CN:{alignCenter:"\u5C45\u4E2D",alignLeft:"\u5C45\u5DE6",alignRight:"\u5C45\u53F3",alternateText:"\u66FF\u4EE3\u6587\u672C",bold:"\u7C97\u4F53",both:"\u7F16\u8F91 & \u9884\u89C8",check:"\u4EFB\u52A1\u5217\u8868",close:"\u5173\u95ED",code:"\u4EE3\u7801\u5757","code-theme":"\u4EE3\u7801\u5757\u4E3B\u9898\u9884\u89C8",column:"\u5217",comment:"\u8BC4\u8BBA",confirm:"\u786E\u5B9A","content-theme":"\u5185\u5BB9\u4E3B\u9898\u9884\u89C8",copied:"\u5DF2\u590D\u5236",copy:"\u590D\u5236","delete-column":"\u5220\u9664\u5217","delete-row":"\u5220\u9664\u884C",devtools:"\u5F00\u53D1\u8005\u5DE5\u5177",down:"\u4E0B",downloadTip:"\u8BE5\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u4E0B\u8F7D\u529F\u80FD",edit:"\u7F16\u8F91","edit-mode":"\u5207\u6362\u7F16\u8F91\u6A21\u5F0F",emoji:"\u8868\u60C5",export:"\u5BFC\u51FA",fileTypeError:"\u6587\u4EF6\u7C7B\u578B\u4E0D\u5141\u8BB8\u4E0A\u4F20",footnoteRef:"\u811A\u6CE8\u6807\u8BC6",fullscreen:"\u5168\u5C4F\u5207\u6362",generate:"\u751F\u6210\u4E2D",headings:"\u6807\u9898",help:"\u5E2E\u52A9",imageURL:"\u56FE\u7247\u5730\u5740",indent:"\u5217\u8868\u7F29\u8FDB",info:"\u5173\u4E8E","inline-code":"\u884C\u5185\u4EE3\u7801","insert-after":"\u672B\u5C3E\u63D2\u5165\u884C","insert-before":"\u8D77\u59CB\u63D2\u5165\u884C","insert-column":"\u63D2\u5165\u5217","insert-row":"\u63D2\u5165\u884C",instantRendering:"\u5373\u65F6\u6E32\u67D3",italic:"\u659C\u4F53",language:"\u8BED\u8A00",line:"\u5206\u9694\u7EBF",link:"\u94FE\u63A5",linkRef:"\u5F15\u7528\u6807\u8BC6",list:"\u65E0\u5E8F\u5217\u8868",more:"\u66F4\u591A",nameEmpty:"\u6587\u4EF6\u540D\u4E0D\u80FD\u4E3A\u7A7A","ordered-list":"\u6709\u5E8F\u5217\u8868",outdent:"\u5217\u8868\u53CD\u5411\u7F29\u8FDB",outline:"\u5927\u7EB2",over:"\u8D85\u8FC7",performanceTip:"\u5B9E\u65F6\u9884\u89C8\u9700 ${x}ms\uFF0C\u53EF\u70B9\u51FB\u7F16\u8F91 & \u9884\u89C8\u6309\u94AE\u8FDB\u884C\u5173\u95ED",preview:"\u9884\u89C8",quote:"\u5F15\u7528",record:"\u5F00\u59CB\u5F55\u97F3/\u7ED3\u675F\u5F55\u97F3","record-tip":"\u8BE5\u8BBE\u5907\u4E0D\u652F\u6301\u5F55\u97F3\u529F\u80FD",recording:"\u5F55\u97F3\u4E2D...",redo:"\u91CD\u505A",remove:"\u5220\u9664",row:"\u884C",spin:"\u65CB\u8F6C",splitView:"\u5206\u5C4F\u9884\u89C8",strike:"\u5220\u9664\u7EBF",table:"\u8868\u683C",textIsNotEmpty:"\u6587\u672C\uFF08\u4E0D\u80FD\u4E3A\u7A7A\uFF09",title:"\u6807\u9898",tooltipText:"\u63D0\u793A\u6587\u672C",undo:"\u64A4\u9500",up:"\u4E0A",update:"\u66F4\u65B0",upload:"\u4E0A\u4F20\u56FE\u7247\u6216\u6587\u4EF6",uploadError:"\u4E0A\u4F20\u9519\u8BEF",uploading:"\u4E0A\u4F20\u4E2D...",wysiwyg:"\u6240\u89C1\u5373\u6240\u5F97"}}},function(re,H,g){g.d(H,"b",function(){return l}),g.d(H,"a",function(){return u});var l=function(s,c){if(document.getElementById(c))return!1;var v=new XMLHttpRequest;v.open("GET",s,!1),v.setRequestHeader("Accept","text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"),v.send("");var p=document.createElement("script");p.type="text/javascript",p.text=v.responseText,p.id=c,document.head.appendChild(p)},u=function(s,c){return new Promise(function(v,p){if(document.getElementById(c))return v(),!1;var f=document.createElement("script");f.src=s,f.async=!0,document.head.appendChild(f),f.onload=function(){if(document.getElementById(c))return f.remove(),v(),!1;f.id=c,v()}})}},function(re,H,g){g.d(H,"b",function(){return l}),g.d(H,"a",function(){return u});var l=function(s,c){if(!s)return!1;s.nodeType===3&&(s=s.parentElement);for(var v=s,p=!1;v&&!p&&!v.classList.contains("vditor-reset");)v.nodeName.indexOf(c)===0?p=!0:v=v.parentElement;return p&&v},u=function(s){var c=l(s,"H");return!(!c||c.tagName.length!==2||c.tagName==="HR")&&c}},function(re,H,g){g.d(H,"a",function(){return v});var l=g(2),u=g(5),s=g(8),c=g(9),v=function(p,f){var k=p.querySelectorAll(".language-math");if(k.length!==0){var b={cdn:l.a.CDN,math:{engine:"KaTeX",inlineDigit:!1,macros:{}}};if(f&&f.math&&(f.math=Object.assign({},b.math,f.math)),(f=Object.assign({},b,f)).math.engine==="KaTeX")Object(s.a)(f.cdn+"/dist/js/katex/katex.min.css","vditorKatexStyle"),Object(u.a)(f.cdn+"/dist/js/katex/katex.min.js","vditorKatexScript").then(function(){k.forEach(function(_){if(!_.parentElement.classList.contains("vditor-wysiwyg__pre")&&!_.parentElement.classList.contains("vditor-ir__marker--pre")&&!_.getAttribute("data-math")){var S=Object(c.a)(_.textContent);_.setAttribute("data-math",S);try{_.innerHTML=katex.renderToString(S,{displayMode:_.tagName==="DIV",output:"html"})}catch(w){_.innerHTML=w.message,_.className="vditor-reset--error"}_.addEventListener("copy",function(w){w.stopPropagation(),w.preventDefault();var M=w.currentTarget.closest(".language-math");w.clipboardData.setData("text/html",M.innerHTML),w.clipboardData.setData("text/plain",M.getAttribute("data-math"))})}})});else if(f.math.engine==="MathJax"){window.MathJax||(window.MathJax={loader:{paths:{mathjax:f.cdn+"/dist/js/mathjax"}},tex:{macros:f.math.macros}}),Object(u.b)(f.cdn+"/dist/js/mathjax/tex-svg.js","vditorMathJaxScript");var C=function(_,S){var w=Object(c.a)(_.textContent).trim(),M=window.MathJax.getMetricsFor(_);M.display=_.tagName==="DIV",window.MathJax.tex2svgPromise(w,M).then(function(R){_.innerHTML="",_.setAttribute("data-math",w),_.append(R),window.MathJax.startup.document.clear(),window.MathJax.startup.document.updateDocument();var B=R.querySelector('[data-mml-node="merror"]');B&&B.textContent.trim()!==""&&(_.innerHTML=B.textContent.trim(),_.className="vditor-reset--error"),S&&S()})};window.MathJax.startup.promise.then(function(){for(var _=[],S=function(M){var R=k[M];R.parentElement.classList.contains("vditor-wysiwyg__pre")||R.parentElement.classList.contains("vditor-ir__marker--pre")||R.getAttribute("data-math")||!Object(c.a)(R.textContent).trim()||_.push(function(B){M===k.length-1?C(R):C(R,B)})},w=0;w<k.length;w++)S(w);(function(M){if(M.length!==0){var R=0,B=M[M.length-1],F=function(){var x=M[R++];x===B?x():x(F)};F()}})(_)})}}}},function(re,H,g){g.d(H,"a",function(){return l});var l=function(u,s){if(!document.getElementById(s)){var c=document.createElement("link");c.id=s,c.rel="stylesheet",c.type="text/css",c.href=u,document.getElementsByTagName("head")[0].appendChild(c)}}},function(re,H,g){g.d(H,"a",function(){return l});var l=function(u){return u.replace(/\u00a0/g," ")}},function(re,H,g){g.d(H,"a",function(){return u});var l=g(8),u=function(s,c){if(s&&c){var v=document.getElementById("vditorContentTheme"),p=c+"/"+s+".css";v?v.href!==p&&(v.remove(),Object(l.a)(p,"vditorContentTheme")):Object(l.a)(p,"vditorContentTheme")}}},function(re,H,g){g.d(H,"a",function(){return s});var l=g(2),u=g(5),s=function(c,v){c===void 0&&(c=document),v===void 0&&(v=l.a.CDN);var p=c.querySelectorAll(".language-abc");p.length>0&&Object(u.a)(v+"/dist/js/abcjs/abcjs_basic.min.js","vditorAbcjsScript").then(function(){p.forEach(function(f){f.parentElement.classList.contains("vditor-wysiwyg__pre")||f.parentElement.classList.contains("vditor-ir__marker--pre")||f.getAttribute("data-processed")!=="true"&&(ABCJS.renderAbc(f,f.textContent.trim()),f.style.overflowX="auto",f.setAttribute("data-processed","true"))})})}},function(re,H,g){g.d(H,"a",function(){return s});var l=g(2),u=g(5),s=function(c,v,p){c===void 0&&(c=document),v===void 0&&(v=l.a.CDN);var f=c.querySelectorAll(".language-echarts");f.length>0&&Object(u.a)(v+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){f.forEach(function(k){if(!k.parentElement.classList.contains("vditor-wysiwyg__pre")&&!k.parentElement.classList.contains("vditor-ir__marker--pre")){var b=k.innerText.trim();if(b)try{if(k.getAttribute("data-processed")==="true")return;var C=JSON.parse(b);echarts.init(k,p==="dark"?"dark":void 0).setOption(C),k.setAttribute("data-processed","true")}catch(_){k.className="vditor-reset--error",k.innerHTML="echarts render error: <br>"+_}}})})}},function(re,H,g){g.d(H,"a",function(){return s});var l=g(4),u=g(9),s=function(c,v){v===void 0&&(v="zh_CN"),c.querySelectorAll("pre > code").forEach(function(p,f){if(!p.parentElement.classList.contains("vditor-wysiwyg__pre")&&!p.parentElement.classList.contains("vditor-ir__marker--pre")&&!(p.classList.contains("language-mermaid")||p.classList.contains("language-flowchart")||p.classList.contains("language-echarts")||p.classList.contains("language-mindmap")||p.classList.contains("language-abc")||p.classList.contains("language-graphviz")||p.classList.contains("language-math")||p.style.maxHeight.indexOf("px")>-1||c.classList.contains("vditor-preview")&&f>5)){var k=p.innerText;if(p.classList.contains("highlight-chroma")){var b=document.createElement("code");b.innerHTML=p.innerHTML,b.querySelectorAll(".highlight-ln").forEach(function(S){S.remove()}),k=b.innerText}var C=document.createElement("div");C.className="vditor-copy",C.innerHTML='<span aria-label="'+l.a[v].copy+`"
onmouseover="this.setAttribute('aria-label', '`+l.a[v].copy+`')"
class="vditor-tooltipped vditor-tooltipped__w"
onclick="this.previousElementSibling.select();document.execCommand('copy');this.setAttribute('aria-label', '`+l.a[v].copied+`')"><svg><use xlink:href="#vditor-icon-copy"></use></svg></span>`;var _=document.createElement("textarea");_.value=Object(u.a)(k),C.insertAdjacentElement("afterbegin",_),p.before(C),p.style.maxHeight=window.outerHeight-40+"px"}})}},function(re,H,g){g.d(H,"a",function(){return s});var l=g(2),u=g(5),s=function(c,v){v===void 0&&(v=l.a.CDN);var p=c.querySelectorAll(".language-flowchart");p.length!==0&&Object(u.a)(v+"/dist/js/flowchart.js/flowchart.min.js","vditorFlowchartScript").then(function(){p.forEach(function(f){if(f.getAttribute("data-processed")!=="true"){var k=flowchart.parse(f.textContent);f.innerHTML="",k.drawSVG(f),f.setAttribute("data-processed","true")}})})}},function(re,H,g){g.d(H,"a",function(){return s});var l=g(2),u=g(5),s=function(c,v){v===void 0&&(v=l.a.CDN);var p=c.querySelectorAll(".language-graphviz");p.length!==0&&Object(u.a)(v+"/dist/js/graphviz/viz.js","vditorGraphVizScript").then(function(){p.forEach(function(f){if(!f.parentElement.classList.contains("vditor-wysiwyg__pre")&&!f.parentElement.classList.contains("vditor-ir__marker--pre")&&f.getAttribute("data-processed")!=="true"&&f.textContent.trim()!==""){try{var k=new Blob(["importScripts('"+document.getElementById("vditorGraphVizScript").src.replace("viz.js","full.render.js")+"');"],{type:"application/javascript"}),b=(window.URL||window.webkitURL).createObjectURL(k),C=new Worker(b);new Viz({worker:C}).renderSVGElement(f.textContent).then(function(_){f.innerHTML=_.outerHTML}).catch(function(_){f.innerHTML="graphviz render error: <br>"+_,f.className="vditor-reset--error"})}catch(_){console.error("graphviz error",_)}f.setAttribute("data-processed","true")}})})}},function(re,H,g){g.d(H,"a",function(){return c});var l=g(2),u=g(5),s=g(8),c=function(v,p,f){p===void 0&&(p=document),f===void 0&&(f=l.a.CDN);var k=v.style;l.a.CODE_THEME.includes(k)||(k="github");var b=document.getElementById("vditorHljsStyle"),C=f+"/dist/js/highlight.js/styles/"+k+".css";b&&b.href!==C&&b.remove(),Object(s.a)(f+"/dist/js/highlight.js/styles/"+k+".css","vditorHljsStyle"),v.enable!==!1&&p.querySelectorAll("pre > code").length!==0&&Object(u.a)(f+"/dist/js/highlight.js/highlight.pack.js","vditorHljsScript").then(function(){p.querySelectorAll("pre > code").forEach(function(_){if(!_.parentElement.classList.contains("vditor-ir__marker--pre")&&!_.parentElement.classList.contains("vditor-wysiwyg__pre")&&!(_.classList.contains("language-mermaid")||_.classList.contains("language-flowchat")||_.classList.contains("language-echarts")||_.classList.contains("language-mindmap")||_.classList.contains("language-abc")||_.classList.contains("language-graphviz")||_.classList.contains("language-math"))&&(hljs.highlightBlock(_),v.lineNumber)){_.classList.add("vditor-linenumber");var S=_.querySelector(".vditor-linenumber__temp");S||((S=document.createElement("div")).className="vditor-linenumber__temp",_.insertAdjacentElement("beforeend",S));var w=getComputedStyle(_).whiteSpace,M=!1;w!=="pre-wrap"&&w!=="pre-line"||(M=!0);var R="",B=_.textContent.split(/\r\n|\r|\n/g);B.pop(),B.map(function(F){var x="";M&&(S.textContent=F||`
`,x=' style="height:'+S.getBoundingClientRect().height+'px"'),R+="<span"+x+"></span>"}),S.style.display="none",R='<span class="vditor-linenumber__rows">'+R+"</span>",_.insertAdjacentHTML("beforeend",R)}})})}},function(re,H,g){g.d(H,"a",function(){return s});var l=g(2),u=g(5),s=function(c,v,p){v===void 0&&(v=l.a.CDN);var f=c.querySelectorAll(".language-mermaid");f.length!==0&&Object(u.a)(v+"/dist/js/mermaid/mermaid.min.js","vditorMermaidScript").then(function(){var k={altFontFamily:"sans-serif",flowchart:{htmlLabels:!0,useMaxWidth:!0},fontFamily:"sans-serif",gantt:{leftPadding:75,rightPadding:20},securityLevel:"loose",sequence:{boxMargin:8,diagramMarginX:8,diagramMarginY:8,useMaxWidth:!0},startOnLoad:!1};p==="dark"&&(k.theme="dark",k.themeVariables={activationBkgColor:"hsl(180, 1.5873015873%, 28.3529411765%)",activationBorderColor:"#81B1DB",activeTaskBkgColor:"#81B1DB",activeTaskBorderColor:"#ffffff",actorBkg:"#1f2020",actorBorder:"#81B1DB",actorLineColor:"lightgrey",actorTextColor:"lightgrey",altBackground:"hsl(0, 0%, 40%)",altSectionBkgColor:"#333",arrowheadColor:"lightgrey",background:"#333",border1:"#81B1DB",border2:"rgba(255, 255, 255, 0.25)",classText:"#e0dfdf",clusterBkg:"hsl(180, 1.5873015873%, 28.3529411765%)",clusterBorder:"rgba(255, 255, 255, 0.25)",critBkgColor:"#E83737",critBorderColor:"#E83737",darkTextColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",defaultLinkColor:"lightgrey",doneTaskBkgColor:"lightgrey",doneTaskBorderColor:"grey",edgeLabelBackground:"hsl(0, 0%, 34.4117647059%)",errorBkgColor:"#a44141",errorTextColor:"#ddd",fillType0:"#1f2020",fillType1:"hsl(180, 1.5873015873%, 28.3529411765%)",fillType2:"hsl(244, 1.5873015873%, 12.3529411765%)",fillType3:"hsl(244, 1.5873015873%, 28.3529411765%)",fillType4:"hsl(116, 1.5873015873%, 12.3529411765%)",fillType5:"hsl(116, 1.5873015873%, 28.3529411765%)",fillType6:"hsl(308, 1.5873015873%, 12.3529411765%)",fillType7:"hsl(308, 1.5873015873%, 28.3529411765%)",fontFamily:'"trebuchet ms", verdana, arial',fontSize:"16px",gridColor:"lightgrey",labelBackground:"#181818",labelBoxBkgColor:"#1f2020",labelBoxBorderColor:"#81B1DB",labelColor:"#ccc",labelTextColor:"lightgrey",lineColor:"lightgrey",loopTextColor:"lightgrey",mainBkg:"#1f2020",mainContrastColor:"lightgrey",nodeBkg:"#1f2020",nodeBorder:"#81B1DB",noteBkgColor:"#fff5ad",noteBorderColor:"rgba(255, 255, 255, 0.25)",noteTextColor:"#1f2020",primaryBorderColor:"hsl(180, 0%, 2.3529411765%)",primaryColor:"#1f2020",primaryTextColor:"#e0dfdf",secondBkg:"hsl(180, 1.5873015873%, 28.3529411765%)",secondaryBorderColor:"hsl(180, 0%, 18.3529411765%)",secondaryColor:"hsl(180, 1.5873015873%, 28.3529411765%)",secondaryTextColor:"rgb(183.8476190475, 181.5523809523, 181.5523809523)",sectionBkgColor:"hsl(52.9411764706, 28.813559322%, 58.431372549%)",sectionBkgColor2:"#EAE8D9",sequenceNumberColor:"black",signalColor:"lightgrey",signalTextColor:"lightgrey",taskBkgColor:"hsl(180, 1.5873015873%, 35.3529411765%)",taskBorderColor:"#ffffff",taskTextClickableColor:"#003163",taskTextColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",taskTextDarkColor:"hsl(28.5714285714, 17.3553719008%, 86.2745098039%)",taskTextLightColor:"lightgrey",taskTextOutsideColor:"lightgrey",tertiaryBorderColor:"hsl(20, 0%, 2.3529411765%)",tertiaryColor:"hsl(20, 1.5873015873%, 12.3529411765%)",tertiaryTextColor:"rgb(222.9999999999, 223.6666666666, 223.9999999999)",textColor:"#ccc",titleColor:"#F9FFFE",todayLineColor:"#DB5757"}),mermaid.initialize(k),f.forEach(function(b){b.getAttribute("data-processed")!=="true"&&b.textContent.trim()!==""&&(mermaid.init(void 0,b),b.setAttribute("data-processed","true"))})})}},function(re,H,g){g.d(H,"a",function(){return s});var l=g(2),u=g(5),s=function(c,v,p){c===void 0&&(c=document),v===void 0&&(v=l.a.CDN);var f=c.querySelectorAll(".language-mindmap");f.length>0&&Object(u.a)(v+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){f.forEach(function(k){if(!k.parentElement.classList.contains("vditor-wysiwyg__pre")&&!k.parentElement.classList.contains("vditor-ir__marker--pre")){var b=k.getAttribute("data-code");if(b)try{if(k.getAttribute("data-processed")==="true")return;echarts.init(k,p==="dark"?"dark":void 0).setOption({series:[{data:[JSON.parse(decodeURIComponent(b))],initialTreeDepth:-1,itemStyle:{borderWidth:0,color:"#4285f4"},label:{backgroundColor:"#f6f8fa",borderColor:"#d1d5da",borderRadius:5,borderWidth:.5,color:"#586069",lineHeight:20,offset:[-5,0],padding:[0,5],position:"insideRight"},lineStyle:{color:"#d1d5da",width:1},roam:!0,symbol:function(C,_){var S;return((S=_==null?void 0:_.data)===null||S===void 0?void 0:S.children)?"circle":"path://"},type:"tree"}],tooltip:{trigger:"item",triggerOn:"mousemove"}}),k.setAttribute("data-processed","true")}catch(C){k.className="vditor-reset--error",k.innerHTML="mindmap render error: <br>"+C}}})})}},function(re,H,g){g.d(H,"a",function(){return l});var l=function(u){u&&u.querySelectorAll("a").forEach(function(s){var c=s.getAttribute("href");c&&(c.match(/^.+.(mp4|m4v|ogg|ogv|webm)$/)?function(v,p){v.insertAdjacentHTML("afterend",'<video controls="controls" src="'+p+'"></video>'),v.remove()}(s,c):c.match(/^.+.(mp3|wav|flac)$/)?function(v,p){v.insertAdjacentHTML("afterend",'<audio controls="controls" src="'+p+'"></audio>'),v.remove()}(s,c):function(v,p){var f=p.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?/),k=p.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),b=p.match(/\/\/v\.qq\.com\/x\/cover\/.*\/([^\/]+)\.html\??.*/),C=p.match(/(?:www\.|\/\/)coub\.com\/view\/(\w+)/),_=p.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/),S=p.match(/.+dailymotion.com\/(video|hub)\/(\w+)\?/),w=p.match(/(?:www\.|\/\/)bilibili\.com\/video\/(\w+)/),M=p.match(/(?:www\.|\/\/)ted\.com\/talks\/(\w+)/);f&&f[1].length===11?(v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//www.youtube.com/embed/'+f[1]+(f[2]?"?start="+f[2]:"")+'"></iframe>'),v.remove()):k&&k[1]?(v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//player.youku.com/embed/'+k[1]+'"></iframe>'),v.remove()):b&&b[1]?(v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="https://v.qq.com/txp/iframe/player.html?vid='+b[1]+'"></iframe>'),v.remove()):C&&C[1]?(v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//coub.com/embed/`+C[1]+'?muted=false&autostart=false&originalSize=true&startWithHD=true"></iframe>'),v.remove()):_&&_[0]?(v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.facebook.com/plugins/video.php?href=`+encodeURIComponent(_[0])+'"></iframe>'),v.remove()):S&&S[2]?(v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="https://www.dailymotion.com/embed/video/`+S[2]+'"></iframe>'),v.remove()):w&&w[1]?(v.insertAdjacentHTML("afterend",`<iframe class="iframe__video"
 src="//player.bilibili.com/player.html?bvid=`+w[1]+'"></iframe>'),v.remove()):M&&M[1]&&(v.insertAdjacentHTML("afterend",'<iframe class="iframe__video" src="//embed.ted.com/talks/'+M[1]+'"></iframe>'),v.remove())}(s,c))})}},function(re,H,g){g.d(H,"a",function(){return u});var l=g(4),u=function(s,c,v){c===void 0&&(c="zh_CN"),v===void 0&&(v="classic");var p=s.getBoundingClientRect();document.body.insertAdjacentHTML("beforeend",'<div class="vditor vditor-img'+(v==="dark"?" vditor--dark":"")+`">
    <div class="vditor-img__bar">
      <span class="vditor-img__btn" data-deg="0">
        <svg><use xlink:href="#vditor-icon-redo"></use></svg>
        `+l.a[c].spin+`
      </span>
      <span class="vditor-img__btn"  onclick="this.parentElement.parentElement.outerHTML = '';document.body.style.overflow = ''">
        X &nbsp;`+l.a[c].close+`
      </span>
    </div>
    <div class="vditor-img__img" onclick="this.parentElement.outerHTML = '';document.body.style.overflow = ''">
      <img style="width: `+s.width+"px;height:"+s.height+"px;transform: translate3d("+p.left+"px, "+(p.top-36)+'px, 0)" src="'+s.getAttribute("src")+`">
    </div>
</div>`),document.body.style.overflow="hidden";var f=document.querySelector(".vditor-img img"),k="translate3d("+Math.max(0,window.innerWidth-s.naturalWidth)/2+"px, "+Math.max(0,window.innerHeight-36-s.naturalHeight)/2+"px, 0)";setTimeout(function(){f.setAttribute("style","transition: transform .3s ease-in-out;transform: "+k),setTimeout(function(){f.parentElement.scrollTo((f.parentElement.scrollWidth-f.parentElement.clientWidth)/2,(f.parentElement.scrollHeight-f.parentElement.clientHeight)/2)},400)});var b=document.querySelector(".vditor-img__btn");b.addEventListener("click",function(){var C=parseInt(b.getAttribute("data-deg"),10)+90;C/90%2==1&&s.naturalWidth>f.parentElement.clientHeight?f.style.transform="translate3d("+Math.max(0,window.innerWidth-s.naturalWidth)/2+"px, "+(s.naturalWidth/2-s.naturalHeight/2)+"px, 0) rotateZ("+C+"deg)":f.style.transform=k+" rotateZ("+C+"deg)",b.setAttribute("data-deg",C.toString()),setTimeout(function(){f.parentElement.scrollTo((f.parentElement.scrollWidth-f.parentElement.clientWidth)/2,(f.parentElement.scrollHeight-f.parentElement.clientHeight)/2)},400)})}},function(re,H,g){g.d(H,"a",function(){return s});var l=g(2),u=g(8),s=function(c,v){v===void 0&&(v=l.a.CDN),l.a.CODE_THEME.includes(c)||(c="github");var p=document.getElementById("vditorHljsStyle"),f=v+"/dist/js/highlight.js/styles/"+c+".css";p?p.href!==f&&(p.remove(),Object(u.a)(f,"vditorHljsStyle")):Object(u.a)(f,"vditorHljsStyle")}},function(re,H,g){g.d(H,"a",function(){return s});var l=g(6),u=g(7),s=function(c,v,p){var f="",k=[];if(Array.from(c.children).forEach(function(S,w){if(Object(l.a)(S)){if(p){var M=S.id.lastIndexOf("_");S.id=S.id.substring(0,M===-1?void 0:M)+"_"+w}k.push(S.id),f+=S.outerHTML.replace("<wbr>","")}}),f==="")return v.innerHTML="","";var b=document.createElement("div");if(p)p.lute.SetToC(!0),p.currentMode!=="wysiwyg"||p.preview.element.contains(c)?p.currentMode!=="ir"||p.preview.element.contains(c)?b.innerHTML=p.lute.HTML2VditorDOM("<p>[ToC]</p>"+f):b.innerHTML=p.lute.SpinVditorIRDOM("<p>[ToC]</p>"+f):b.innerHTML=p.lute.SpinVditorDOM("<p>[ToC]</p>"+f),p.lute.SetToC(p.options.preview.markdown.toc);else{var C=Lute.New();C.SetToC(!0),b.innerHTML=C.HTML2VditorDOM("<p>[ToC]</p>"+f)}var _=b.firstElementChild.querySelectorAll("li > span[data-target-id]");return _.forEach(function(S,w){S.nextElementSibling&&S.nextElementSibling.tagName==="UL"?S.innerHTML="<svg class='vditor-outline__action'><use xlink:href='#vditor-icon-down'></use></svg><span>"+S.innerHTML+"</span>":S.innerHTML="<svg></svg><span>"+S.innerHTML+"</span>",S.setAttribute("data-target-id",k[w])}),f=b.firstElementChild.innerHTML,_.length===0?(v.innerHTML="",f):(v.innerHTML=f,p&&Object(u.a)(v,{cdn:p.options.cdn,math:p.options.preview.math}),v.firstElementChild.addEventListener("click",function(S){for(var w=S.target;w&&!w.isEqualNode(v);){if(w.classList.contains("vditor-outline__action")){w.classList.contains("vditor-outline__action--close")?(w.classList.remove("vditor-outline__action--close"),w.parentElement.nextElementSibling.setAttribute("style","display:block")):(w.classList.add("vditor-outline__action--close"),w.parentElement.nextElementSibling.setAttribute("style","display:none")),S.preventDefault(),S.stopPropagation();break}if(w.getAttribute("data-target-id")){S.preventDefault(),S.stopPropagation();var M=document.getElementById(w.getAttribute("data-target-id"));if(!M)return;if(p)if(p.options.height==="auto"){var R=M.offsetTop+p.element.offsetTop;p.options.toolbarConfig.pin||(R+=p.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,R)}else p.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,p.element.offsetTop),p.preview.element.contains(c)?c.parentElement.scrollTop=M.offsetTop:c.scrollTop=M.offsetTop;else window.scrollTo(window.scrollX,M.offsetTop);break}w=w.parentElement}}),f)}},function(re,H,g){g.d(H,"a",function(){return l});var l=function(){for(var u=[],s=0;s<arguments.length;s++)u[s]=arguments[s];for(var c={},v=function(f){for(var k in f)f.hasOwnProperty(k)&&(Object.prototype.toString.call(f[k])==="[object Object]"?c[k]=l(c[k],f[k]):c[k]=f[k])},p=0;p<u.length;p++)v(u[p]);return c}},function(re,H,g){g.d(H,"a",function(){return l});var l=function(u){var s=Lute.New();return s.PutEmojis(u.emojis),s.SetEmojiSite(u.emojiSite),s.SetHeadingAnchor(u.headingAnchor),s.SetInlineMathAllowDigitAfterOpenMarker(u.inlineMathDigit),s.SetAutoSpace(u.autoSpace),s.SetToC(u.toc),s.SetFootnotes(u.footnotes),s.SetFixTermTypo(u.fixTermTypo),s.SetVditorCodeBlockPreview(u.codeBlockPreview),s.SetVditorMathBlockPreview(u.mathBlockPreview),s.SetSanitize(u.sanitize),s.SetChineseParagraphBeginningSpace(u.paragraphBeginningSpace),s.SetRenderListStyle(u.listStyle),s.SetLinkBase(u.linkBase),s.SetLinkPrefix(u.linkPrefix),s.SetMark(u.mark),u.lazyLoadImage&&s.SetImageLazyLoading(u.lazyLoadImage),s}},function(re,H,g){g.r(H);var l=g(11),u=g(12),s=g(13),c=g(14),v=g(15),p=g(16),f=function(G){G===void 0&&(G=document);var ie=function(E){var z=document.createElement("img");z.src=E.getAttribute("data-src"),z.addEventListener("load",function(){E.getAttribute("style")||E.getAttribute("class")||E.getAttribute("width")||E.getAttribute("height")||z.naturalHeight>z.naturalWidth&&z.naturalWidth/z.naturalHeight<document.querySelector(".vditor-reset").clientWidth/(window.innerHeight-40)&&z.naturalHeight>window.innerHeight-40&&(E.style.height=window.innerHeight-40+"px"),E.src=z.src}),E.removeAttribute("data-src")};if(!("IntersectionObserver"in window))return G.querySelectorAll("img").forEach(function(E){E.getAttribute("data-src")&&ie(E)}),!1;window.vditorImageIntersectionObserver?(window.vditorImageIntersectionObserver.disconnect(),G.querySelectorAll("img").forEach(function(E){window.vditorImageIntersectionObserver.observe(E)})):(window.vditorImageIntersectionObserver=new IntersectionObserver(function(E){E.forEach(function(z){(z.isIntersecting===void 0?z.intersectionRatio!==0:z.isIntersecting)&&z.target.getAttribute("data-src")&&ie(z.target)})}),G.querySelectorAll("img").forEach(function(E){window.vditorImageIntersectionObserver.observe(E)}))},k=g(7),b=g(19),C=g(17),_=g(18),S=g(22),w=g(2),M=g(10),R=g(5),B=g(1),F=g(23),x=g(24),$=g(0),ne=function(G,ie){if(ie===void 0&&(ie="zh_CN"),typeof speechSynthesis!="undefined"&&typeof SpeechSynthesisUtterance!="undefined"){var E='<svg><use xlink:href="#vditor-icon-play"></use></svg>',z='<svg><use xlink:href="#vditor-icon-pause"></use></svg>',W=document.querySelector(".vditor-speech");if(!W){(W=document.createElement("div")).className="vditor-speech",document.body.insertAdjacentElement("beforeend",W);var Se=function(){var X,fe;return speechSynthesis.getVoices().forEach(function(pe){pe.lang===ie.replace("_","-")&&(X=pe),pe.default&&(fe=pe)}),X||(X=fe),X};speechSynthesis.onvoiceschanged!==void 0&&(speechSynthesis.onvoiceschanged=Se);var le=Se();W.onclick=function(){if(W.className==="vditor-speech"){var X=new SpeechSynthesisUtterance(W.getAttribute("data-text"));X.voice=le,X.onend=function(){W.className="vditor-speech",speechSynthesis.cancel(),W.innerHTML=E},speechSynthesis.speak(X),W.className="vditor-speech vditor-speech--current",W.innerHTML=z}else speechSynthesis.speaking&&(speechSynthesis.paused?(speechSynthesis.resume(),W.innerHTML=z):(speechSynthesis.pause(),W.innerHTML=E));Object($.h)(window.vditorSpeechRange)},document.body.addEventListener("click",function(){getSelection().toString().trim()===""&&W.style.display==="block"&&(W.className="vditor-speech",speechSynthesis.cancel(),W.style.display="none")})}G.addEventListener("mouseup",function(X){var fe=getSelection().toString().trim();if(speechSynthesis.cancel(),getSelection().toString().trim()!==""){window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var pe=getSelection().getRangeAt(0).getBoundingClientRect();W.innerHTML=E,W.style.display="block",W.style.top=pe.top+pe.height+document.querySelector("html").scrollTop-20+"px",W.style.left=X.screenX+2+"px",W.setAttribute("data-text",fe)}else W.style.display==="block"&&(W.className="vditor-speech",W.style.display="none")})}},ue=function(G,ie,E,z){return new(E||(E=Promise))(function(W,Se){function le(pe){try{fe(z.next(pe))}catch(te){Se(te)}}function X(pe){try{fe(z.throw(pe))}catch(te){Se(te)}}function fe(pe){var te;pe.done?W(pe.value):(te=pe.value,te instanceof E?te:new E(function(Z){Z(te)})).then(le,X)}fe((z=z.apply(G,ie||[])).next())})},se=function(G,ie){var E,z,W,Se,le={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return Se={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&(Se[Symbol.iterator]=function(){return this}),Se;function X(fe){return function(pe){return function(te){if(E)throw new TypeError("Generator is already executing.");for(;le;)try{if(E=1,z&&(W=2&te[0]?z.return:te[0]?z.throw||((W=z.return)&&W.call(z),0):z.next)&&!(W=W.call(z,te[1])).done)return W;switch(z=0,W&&(te=[2&te[0],W.value]),te[0]){case 0:case 1:W=te;break;case 4:return le.label++,{value:te[1],done:!1};case 5:le.label++,z=te[1],te=[0];continue;case 7:te=le.ops.pop(),le.trys.pop();continue;default:if(W=le.trys,!((W=W.length>0&&W[W.length-1])||te[0]!==6&&te[0]!==2)){le=0;continue}if(te[0]===3&&(!W||te[1]>W[0]&&te[1]<W[3])){le.label=te[1];break}if(te[0]===6&&le.label<W[1]){le.label=W[1],W=te;break}if(W&&le.label<W[2]){le.label=W[2],le.ops.push(te);break}W[2]&&le.ops.pop(),le.trys.pop();continue}te=ie.call(G,le)}catch(Z){te=[6,Z],z=0}finally{E=W=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}([fe,pe])}}},ce=function(G){var ie={anchor:0,cdn:w.a.CDN,customEmoji:{},emojiPath:(G&&G.emojiPath||w.a.CDN)+"/dist/images/emoji",hljs:w.a.HLJS_OPTIONS,icon:"ant",lang:"zh_CN",markdown:w.a.MARKDOWN_OPTIONS,math:w.a.MATH_OPTIONS,mode:"light",speech:{enable:!1},theme:w.a.THEME_OPTIONS};return Object(F.a)(ie,G)},de=function(G,ie){var E=ce(ie);return Object(R.a)(E.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){var z=Object(x.a)({autoSpace:E.markdown.autoSpace,codeBlockPreview:E.markdown.codeBlockPreview,emojiSite:E.emojiPath,emojis:E.customEmoji,fixTermTypo:E.markdown.fixTermTypo,footnotes:E.markdown.footnotes,headingAnchor:E.anchor!==0,inlineMathDigit:E.math.inlineDigit,lazyLoadImage:E.lazyLoadImage,linkBase:E.markdown.linkBase,linkPrefix:E.markdown.linkPrefix,listStyle:E.markdown.listStyle,mark:E.markdown.mark,mathBlockPreview:E.markdown.mathBlockPreview,paragraphBeginningSpace:E.markdown.paragraphBeginningSpace,sanitize:E.markdown.sanitize,toc:E.markdown.toc});return(ie==null?void 0:ie.renderers)&&z.SetJSRenderers({renderers:{Md2HTML:ie.renderers}}),z.Md2HTML(G)})},Ee=function(G,ie,E){return ue(void 0,void 0,void 0,function(){var z,W;return se(this,function(Se){switch(Se.label){case 0:return z=ce(E),[4,de(ie,z)];case 1:return W=Se.sent(),z.transform&&(W=z.transform(W)),G.innerHTML=W,G.classList.add("vditor-reset"),Object(M.a)(z.theme.current,z.theme.path),z.anchor===1&&G.classList.add("vditor-reset--anchor"),Object(s.a)(G,z.lang),Object(p.a)(z.hljs,G,z.cdn),Object(k.a)(G,{cdn:z.cdn,math:z.math}),Object(C.a)(G,z.cdn,z.mode),Object(c.a)(G,z.cdn),Object(v.a)(G,z.cdn),Object(u.a)(G,z.cdn,z.mode),Object(_.a)(G,z.cdn,z.mode),Object(l.a)(G,z.cdn),Object(b.a)(G),z.speech.enable&&ne(G,z.lang),z.anchor!==0&&(le=z.anchor,document.querySelectorAll(".vditor-anchor").forEach(function(X){le===1&&X.classList.add("vditor-anchor--left"),X.onclick=function(){var fe=X.getAttribute("href").substr(1),pe=document.getElementById("vditorAnchor-"+fe).offsetTop;document.querySelector("html").scrollTop=pe}}),window.onhashchange=function(){var X=document.getElementById("vditorAnchor-"+decodeURIComponent(window.location.hash.substr(1)));X&&(document.querySelector("html").scrollTop=X.offsetTop)}),z.after&&z.after(),z.lazyLoadImage&&f(G),z.icon&&Object(R.a)(z.cdn+"/dist/js/icons/"+z.icon+".js","vditorIconScript"),G.addEventListener("click",function(X){var fe=Object(B.f)(X.target,"SPAN");if(fe&&Object(B.e)(fe,"vditor-toc")){var pe=G.querySelector("#"+fe.getAttribute("data-target-id"));pe&&window.scrollTo(window.scrollX,pe.offsetTop)}}),[2]}var le})})},xe=g(20),Ne=g(21),rt=function(){function G(){}return G.previewImage=xe.a,G.codeRender=s.a,G.graphvizRender=v.a,G.highlightRender=p.a,G.mathRender=k.a,G.mermaidRender=C.a,G.flowchartRender=c.a,G.chartRender=u.a,G.abcRender=l.a,G.mindmapRender=_.a,G.outlineRender=S.a,G.mediaRender=b.a,G.speechRender=ne,G.lazyLoadImageRender=f,G.md2html=de,G.preview=Ee,G.setCodeTheme=Ne.a,G.setContentTheme=M.a,G}();H.default=rt},function(re,H){var g=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};g.Diff=function(l,u){return[l,u]},g.prototype.diff_main=function(l,u,s,c){c===void 0&&(c=this.Diff_Timeout<=0?Number.MAX_VALUE:new Date().getTime()+1e3*this.Diff_Timeout);var v=c;if(l==null||u==null)throw new Error("Null input. (diff_main)");if(l==u)return l?[new g.Diff(0,l)]:[];s===void 0&&(s=!0);var p=s,f=this.diff_commonPrefix(l,u),k=l.substring(0,f);l=l.substring(f),u=u.substring(f),f=this.diff_commonSuffix(l,u);var b=l.substring(l.length-f);l=l.substring(0,l.length-f),u=u.substring(0,u.length-f);var C=this.diff_compute_(l,u,p,v);return k&&C.unshift(new g.Diff(0,k)),b&&C.push(new g.Diff(0,b)),this.diff_cleanupMerge(C),C},g.prototype.diff_compute_=function(l,u,s,c){var v;if(!l)return[new g.Diff(1,u)];if(!u)return[new g.Diff(-1,l)];var p=l.length>u.length?l:u,f=l.length>u.length?u:l,k=p.indexOf(f);if(k!=-1)return v=[new g.Diff(1,p.substring(0,k)),new g.Diff(0,f),new g.Diff(1,p.substring(k+f.length))],l.length>u.length&&(v[0][0]=v[2][0]=-1),v;if(f.length==1)return[new g.Diff(-1,l),new g.Diff(1,u)];var b=this.diff_halfMatch_(l,u);if(b){var C=b[0],_=b[1],S=b[2],w=b[3],M=b[4],R=this.diff_main(C,S,s,c),B=this.diff_main(_,w,s,c);return R.concat([new g.Diff(0,M)],B)}return s&&l.length>100&&u.length>100?this.diff_lineMode_(l,u,c):this.diff_bisect_(l,u,c)},g.prototype.diff_lineMode_=function(l,u,s){var c=this.diff_linesToChars_(l,u);l=c.chars1,u=c.chars2;var v=c.lineArray,p=this.diff_main(l,u,!1,s);this.diff_charsToLines_(p,v),this.diff_cleanupSemantic(p),p.push(new g.Diff(0,""));for(var f=0,k=0,b=0,C="",_="";f<p.length;){switch(p[f][0]){case 1:b++,_+=p[f][1];break;case-1:k++,C+=p[f][1];break;case 0:if(k>=1&&b>=1){p.splice(f-k-b,k+b),f=f-k-b;for(var S=this.diff_main(C,_,!1,s),w=S.length-1;w>=0;w--)p.splice(f,0,S[w]);f+=S.length}b=0,k=0,C="",_=""}f++}return p.pop(),p},g.prototype.diff_bisect_=function(l,u,s){for(var c=l.length,v=u.length,p=Math.ceil((c+v)/2),f=p,k=2*p,b=new Array(k),C=new Array(k),_=0;_<k;_++)b[_]=-1,C[_]=-1;b[f+1]=0,C[f+1]=0;for(var S=c-v,w=S%2!=0,M=0,R=0,B=0,F=0,x=0;x<p&&!(new Date().getTime()>s);x++){for(var $=-x+M;$<=x-R;$+=2){for(var ne=f+$,ue=(xe=$==-x||$!=x&&b[ne-1]<b[ne+1]?b[ne+1]:b[ne-1]+1)-$;xe<c&&ue<v&&l.charAt(xe)==u.charAt(ue);)xe++,ue++;if(b[ne]=xe,xe>c)R+=2;else if(ue>v)M+=2;else if(w&&(de=f+S-$)>=0&&de<k&&C[de]!=-1&&xe>=(ce=c-C[de]))return this.diff_bisectSplit_(l,u,xe,ue,s)}for(var se=-x+B;se<=x-F;se+=2){for(var ce,de=f+se,Ee=(ce=se==-x||se!=x&&C[de-1]<C[de+1]?C[de+1]:C[de-1]+1)-se;ce<c&&Ee<v&&l.charAt(c-ce-1)==u.charAt(v-Ee-1);)ce++,Ee++;if(C[de]=ce,ce>c)F+=2;else if(Ee>v)B+=2;else if(!w&&(ne=f+S-se)>=0&&ne<k&&b[ne]!=-1){var xe;if(ue=f+(xe=b[ne])-ne,xe>=(ce=c-ce))return this.diff_bisectSplit_(l,u,xe,ue,s)}}}return[new g.Diff(-1,l),new g.Diff(1,u)]},g.prototype.diff_bisectSplit_=function(l,u,s,c,v){var p=l.substring(0,s),f=u.substring(0,c),k=l.substring(s),b=u.substring(c),C=this.diff_main(p,f,!1,v),_=this.diff_main(k,b,!1,v);return C.concat(_)},g.prototype.diff_linesToChars_=function(l,u){var s=[],c={};function v(k){for(var b="",C=0,_=-1,S=s.length;_<k.length-1;){(_=k.indexOf(`
`,C))==-1&&(_=k.length-1);var w=k.substring(C,_+1);(c.hasOwnProperty?c.hasOwnProperty(w):c[w]!==void 0)?b+=String.fromCharCode(c[w]):(S==p&&(w=k.substring(C),_=k.length),b+=String.fromCharCode(S),c[w]=S,s[S++]=w),C=_+1}return b}s[0]="";var p=4e4,f=v(l);return p=65535,{chars1:f,chars2:v(u),lineArray:s}},g.prototype.diff_charsToLines_=function(l,u){for(var s=0;s<l.length;s++){for(var c=l[s][1],v=[],p=0;p<c.length;p++)v[p]=u[c.charCodeAt(p)];l[s][1]=v.join("")}},g.prototype.diff_commonPrefix=function(l,u){if(!l||!u||l.charAt(0)!=u.charAt(0))return 0;for(var s=0,c=Math.min(l.length,u.length),v=c,p=0;s<v;)l.substring(p,v)==u.substring(p,v)?p=s=v:c=v,v=Math.floor((c-s)/2+s);return v},g.prototype.diff_commonSuffix=function(l,u){if(!l||!u||l.charAt(l.length-1)!=u.charAt(u.length-1))return 0;for(var s=0,c=Math.min(l.length,u.length),v=c,p=0;s<v;)l.substring(l.length-v,l.length-p)==u.substring(u.length-v,u.length-p)?p=s=v:c=v,v=Math.floor((c-s)/2+s);return v},g.prototype.diff_commonOverlap_=function(l,u){var s=l.length,c=u.length;if(s==0||c==0)return 0;s>c?l=l.substring(s-c):s<c&&(u=u.substring(0,s));var v=Math.min(s,c);if(l==u)return v;for(var p=0,f=1;;){var k=l.substring(v-f),b=u.indexOf(k);if(b==-1)return p;f+=b,b!=0&&l.substring(v-f)!=u.substring(0,f)||(p=f,f++)}},g.prototype.diff_halfMatch_=function(l,u){if(this.Diff_Timeout<=0)return null;var s=l.length>u.length?l:u,c=l.length>u.length?u:l;if(s.length<4||2*c.length<s.length)return null;var v=this;function p(M,R,B){for(var F,x,$,ne,ue=M.substring(B,B+Math.floor(M.length/4)),se=-1,ce="";(se=R.indexOf(ue,se+1))!=-1;){var de=v.diff_commonPrefix(M.substring(B),R.substring(se)),Ee=v.diff_commonSuffix(M.substring(0,B),R.substring(0,se));ce.length<Ee+de&&(ce=R.substring(se-Ee,se)+R.substring(se,se+de),F=M.substring(0,B-Ee),x=M.substring(B+de),$=R.substring(0,se-Ee),ne=R.substring(se+de))}return 2*ce.length>=M.length?[F,x,$,ne,ce]:null}var f,k,b,C,_,S=p(s,c,Math.ceil(s.length/4)),w=p(s,c,Math.ceil(s.length/2));return S||w?(f=w?S&&S[4].length>w[4].length?S:w:S,l.length>u.length?(k=f[0],b=f[1],C=f[2],_=f[3]):(C=f[0],_=f[1],k=f[2],b=f[3]),[k,b,C,_,f[4]]):null},g.prototype.diff_cleanupSemantic=function(l){for(var u=!1,s=[],c=0,v=null,p=0,f=0,k=0,b=0,C=0;p<l.length;)l[p][0]==0?(s[c++]=p,f=b,k=C,b=0,C=0,v=l[p][1]):(l[p][0]==1?b+=l[p][1].length:C+=l[p][1].length,v&&v.length<=Math.max(f,k)&&v.length<=Math.max(b,C)&&(l.splice(s[c-1],0,new g.Diff(-1,v)),l[s[c-1]+1][0]=1,c--,p=--c>0?s[c-1]:-1,f=0,k=0,b=0,C=0,v=null,u=!0)),p++;for(u&&this.diff_cleanupMerge(l),this.diff_cleanupSemanticLossless(l),p=1;p<l.length;){if(l[p-1][0]==-1&&l[p][0]==1){var _=l[p-1][1],S=l[p][1],w=this.diff_commonOverlap_(_,S),M=this.diff_commonOverlap_(S,_);w>=M?(w>=_.length/2||w>=S.length/2)&&(l.splice(p,0,new g.Diff(0,S.substring(0,w))),l[p-1][1]=_.substring(0,_.length-w),l[p+1][1]=S.substring(w),p++):(M>=_.length/2||M>=S.length/2)&&(l.splice(p,0,new g.Diff(0,_.substring(0,M))),l[p-1][0]=1,l[p-1][1]=S.substring(0,S.length-M),l[p+1][0]=-1,l[p+1][1]=_.substring(M),p++),p++}p++}},g.prototype.diff_cleanupSemanticLossless=function(l){function u(M,R){if(!M||!R)return 6;var B=M.charAt(M.length-1),F=R.charAt(0),x=B.match(g.nonAlphaNumericRegex_),$=F.match(g.nonAlphaNumericRegex_),ne=x&&B.match(g.whitespaceRegex_),ue=$&&F.match(g.whitespaceRegex_),se=ne&&B.match(g.linebreakRegex_),ce=ue&&F.match(g.linebreakRegex_),de=se&&M.match(g.blanklineEndRegex_),Ee=ce&&R.match(g.blanklineStartRegex_);return de||Ee?5:se||ce?4:x&&!ne&&ue?3:ne||ue?2:x||$?1:0}for(var s=1;s<l.length-1;){if(l[s-1][0]==0&&l[s+1][0]==0){var c=l[s-1][1],v=l[s][1],p=l[s+1][1],f=this.diff_commonSuffix(c,v);if(f){var k=v.substring(v.length-f);c=c.substring(0,c.length-f),v=k+v.substring(0,v.length-f),p=k+p}for(var b=c,C=v,_=p,S=u(c,v)+u(v,p);v.charAt(0)===p.charAt(0);){c+=v.charAt(0),v=v.substring(1)+p.charAt(0),p=p.substring(1);var w=u(c,v)+u(v,p);w>=S&&(S=w,b=c,C=v,_=p)}l[s-1][1]!=b&&(b?l[s-1][1]=b:(l.splice(s-1,1),s--),l[s][1]=C,_?l[s+1][1]=_:(l.splice(s+1,1),s--))}s++}},g.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,g.whitespaceRegex_=/\s/,g.linebreakRegex_=/[\r\n]/,g.blanklineEndRegex_=/\n\r?\n$/,g.blanklineStartRegex_=/^\r?\n\r?\n/,g.prototype.diff_cleanupEfficiency=function(l){for(var u=!1,s=[],c=0,v=null,p=0,f=!1,k=!1,b=!1,C=!1;p<l.length;)l[p][0]==0?(l[p][1].length<this.Diff_EditCost&&(b||C)?(s[c++]=p,f=b,k=C,v=l[p][1]):(c=0,v=null),b=C=!1):(l[p][0]==-1?C=!0:b=!0,v&&(f&&k&&b&&C||v.length<this.Diff_EditCost/2&&f+k+b+C==3)&&(l.splice(s[c-1],0,new g.Diff(-1,v)),l[s[c-1]+1][0]=1,c--,v=null,f&&k?(b=C=!0,c=0):(p=--c>0?s[c-1]:-1,b=C=!1),u=!0)),p++;u&&this.diff_cleanupMerge(l)},g.prototype.diff_cleanupMerge=function(l){l.push(new g.Diff(0,""));for(var u,s=0,c=0,v=0,p="",f="";s<l.length;)switch(l[s][0]){case 1:v++,f+=l[s][1],s++;break;case-1:c++,p+=l[s][1],s++;break;case 0:c+v>1?(c!==0&&v!==0&&((u=this.diff_commonPrefix(f,p))!==0&&(s-c-v>0&&l[s-c-v-1][0]==0?l[s-c-v-1][1]+=f.substring(0,u):(l.splice(0,0,new g.Diff(0,f.substring(0,u))),s++),f=f.substring(u),p=p.substring(u)),(u=this.diff_commonSuffix(f,p))!==0&&(l[s][1]=f.substring(f.length-u)+l[s][1],f=f.substring(0,f.length-u),p=p.substring(0,p.length-u))),s-=c+v,l.splice(s,c+v),p.length&&(l.splice(s,0,new g.Diff(-1,p)),s++),f.length&&(l.splice(s,0,new g.Diff(1,f)),s++),s++):s!==0&&l[s-1][0]==0?(l[s-1][1]+=l[s][1],l.splice(s,1)):s++,v=0,c=0,p="",f=""}l[l.length-1][1]===""&&l.pop();var k=!1;for(s=1;s<l.length-1;)l[s-1][0]==0&&l[s+1][0]==0&&(l[s][1].substring(l[s][1].length-l[s-1][1].length)==l[s-1][1]?(l[s][1]=l[s-1][1]+l[s][1].substring(0,l[s][1].length-l[s-1][1].length),l[s+1][1]=l[s-1][1]+l[s+1][1],l.splice(s-1,1),k=!0):l[s][1].substring(0,l[s+1][1].length)==l[s+1][1]&&(l[s-1][1]+=l[s+1][1],l[s][1]=l[s][1].substring(l[s+1][1].length)+l[s+1][1],l.splice(s+1,1),k=!0)),s++;k&&this.diff_cleanupMerge(l)},g.prototype.diff_xIndex=function(l,u){var s,c=0,v=0,p=0,f=0;for(s=0;s<l.length&&(l[s][0]!==1&&(c+=l[s][1].length),l[s][0]!==-1&&(v+=l[s][1].length),!(c>u));s++)p=c,f=v;return l.length!=s&&l[s][0]===-1?f:f+(u-p)},g.prototype.diff_prettyHtml=function(l){for(var u=[],s=/&/g,c=/</g,v=/>/g,p=/\n/g,f=0;f<l.length;f++){var k=l[f][0],b=l[f][1].replace(s,"&amp;").replace(c,"&lt;").replace(v,"&gt;").replace(p,"&para;<br>");switch(k){case 1:u[f]='<ins style="background:#e6ffe6;">'+b+"</ins>";break;case-1:u[f]='<del style="background:#ffe6e6;">'+b+"</del>";break;case 0:u[f]="<span>"+b+"</span>"}}return u.join("")},g.prototype.diff_text1=function(l){for(var u=[],s=0;s<l.length;s++)l[s][0]!==1&&(u[s]=l[s][1]);return u.join("")},g.prototype.diff_text2=function(l){for(var u=[],s=0;s<l.length;s++)l[s][0]!==-1&&(u[s]=l[s][1]);return u.join("")},g.prototype.diff_levenshtein=function(l){for(var u=0,s=0,c=0,v=0;v<l.length;v++){var p=l[v][0],f=l[v][1];switch(p){case 1:s+=f.length;break;case-1:c+=f.length;break;case 0:u+=Math.max(s,c),s=0,c=0}}return u+=Math.max(s,c)},g.prototype.diff_toDelta=function(l){for(var u=[],s=0;s<l.length;s++)switch(l[s][0]){case 1:u[s]="+"+encodeURI(l[s][1]);break;case-1:u[s]="-"+l[s][1].length;break;case 0:u[s]="="+l[s][1].length}return u.join("	").replace(/%20/g," ")},g.prototype.diff_fromDelta=function(l,u){for(var s=[],c=0,v=0,p=u.split(/\t/g),f=0;f<p.length;f++){var k=p[f].substring(1);switch(p[f].charAt(0)){case"+":try{s[c++]=new g.Diff(1,decodeURI(k))}catch(_){throw new Error("Illegal escape in diff_fromDelta: "+k)}break;case"-":case"=":var b=parseInt(k,10);if(isNaN(b)||b<0)throw new Error("Invalid number in diff_fromDelta: "+k);var C=l.substring(v,v+=b);p[f].charAt(0)=="="?s[c++]=new g.Diff(0,C):s[c++]=new g.Diff(-1,C);break;default:if(p[f])throw new Error("Invalid diff operation in diff_fromDelta: "+p[f])}}if(v!=l.length)throw new Error("Delta length ("+v+") does not equal source text length ("+l.length+").");return s},g.prototype.match_main=function(l,u,s){if(l==null||u==null||s==null)throw new Error("Null input. (match_main)");return s=Math.max(0,Math.min(s,l.length)),l==u?0:l.length?l.substring(s,s+u.length)==u?s:this.match_bitap_(l,u,s):-1},g.prototype.match_bitap_=function(l,u,s){if(u.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var c=this.match_alphabet_(u),v=this;function p(ue,se){var ce=ue/u.length,de=Math.abs(s-se);return v.Match_Distance?ce+de/v.Match_Distance:de?1:ce}var f=this.Match_Threshold,k=l.indexOf(u,s);k!=-1&&(f=Math.min(p(0,k),f),(k=l.lastIndexOf(u,s+u.length))!=-1&&(f=Math.min(p(0,k),f)));var b,C,_=1<<u.length-1;k=-1;for(var S,w=u.length+l.length,M=0;M<u.length;M++){for(b=0,C=w;b<C;)p(M,s+C)<=f?b=C:w=C,C=Math.floor((w-b)/2+b);w=C;var R=Math.max(1,s-C+1),B=Math.min(s+C,l.length)+u.length,F=Array(B+2);F[B+1]=(1<<M)-1;for(var x=B;x>=R;x--){var $=c[l.charAt(x-1)];if(F[x]=M===0?(F[x+1]<<1|1)&$:(F[x+1]<<1|1)&$|(S[x+1]|S[x])<<1|1|S[x+1],F[x]&_){var ne=p(M,x-1);if(ne<=f){if(f=ne,!((k=x-1)>s))break;R=Math.max(1,2*s-k)}}}if(p(M+1,s)>f)break;S=F}return k},g.prototype.match_alphabet_=function(l){for(var u={},s=0;s<l.length;s++)u[l.charAt(s)]=0;for(s=0;s<l.length;s++)u[l.charAt(s)]|=1<<l.length-s-1;return u},g.prototype.patch_addContext_=function(l,u){if(u.length!=0){if(l.start2===null)throw Error("patch not initialized");for(var s=u.substring(l.start2,l.start2+l.length1),c=0;u.indexOf(s)!=u.lastIndexOf(s)&&s.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)c+=this.Patch_Margin,s=u.substring(l.start2-c,l.start2+l.length1+c);c+=this.Patch_Margin;var v=u.substring(l.start2-c,l.start2);v&&l.diffs.unshift(new g.Diff(0,v));var p=u.substring(l.start2+l.length1,l.start2+l.length1+c);p&&l.diffs.push(new g.Diff(0,p)),l.start1-=v.length,l.start2-=v.length,l.length1+=v.length+p.length,l.length2+=v.length+p.length}},g.prototype.patch_make=function(l,u,s){var c,v;if(typeof l=="string"&&typeof u=="string"&&s===void 0)c=l,(v=this.diff_main(c,u,!0)).length>2&&(this.diff_cleanupSemantic(v),this.diff_cleanupEfficiency(v));else if(l&&typeof l=="object"&&u===void 0&&s===void 0)v=l,c=this.diff_text1(v);else if(typeof l=="string"&&u&&typeof u=="object"&&s===void 0)c=l,v=u;else{if(typeof l!="string"||typeof u!="string"||!s||typeof s!="object")throw new Error("Unknown call format to patch_make.");c=l,v=s}if(v.length===0)return[];for(var p=[],f=new g.patch_obj,k=0,b=0,C=0,_=c,S=c,w=0;w<v.length;w++){var M=v[w][0],R=v[w][1];switch(k||M===0||(f.start1=b,f.start2=C),M){case 1:f.diffs[k++]=v[w],f.length2+=R.length,S=S.substring(0,C)+R+S.substring(C);break;case-1:f.length1+=R.length,f.diffs[k++]=v[w],S=S.substring(0,C)+S.substring(C+R.length);break;case 0:R.length<=2*this.Patch_Margin&&k&&v.length!=w+1?(f.diffs[k++]=v[w],f.length1+=R.length,f.length2+=R.length):R.length>=2*this.Patch_Margin&&k&&(this.patch_addContext_(f,_),p.push(f),f=new g.patch_obj,k=0,_=S,b=C)}M!==1&&(b+=R.length),M!==-1&&(C+=R.length)}return k&&(this.patch_addContext_(f,_),p.push(f)),p},g.prototype.patch_deepCopy=function(l){for(var u=[],s=0;s<l.length;s++){var c=l[s],v=new g.patch_obj;v.diffs=[];for(var p=0;p<c.diffs.length;p++)v.diffs[p]=new g.Diff(c.diffs[p][0],c.diffs[p][1]);v.start1=c.start1,v.start2=c.start2,v.length1=c.length1,v.length2=c.length2,u[s]=v}return u},g.prototype.patch_apply=function(l,u){if(l.length==0)return[u,[]];l=this.patch_deepCopy(l);var s=this.patch_addPadding(l);u=s+u+s,this.patch_splitMax(l);for(var c=0,v=[],p=0;p<l.length;p++){var f,k,b=l[p].start2+c,C=this.diff_text1(l[p].diffs),_=-1;if(C.length>this.Match_MaxBits?(f=this.match_main(u,C.substring(0,this.Match_MaxBits),b))!=-1&&((_=this.match_main(u,C.substring(C.length-this.Match_MaxBits),b+C.length-this.Match_MaxBits))==-1||f>=_)&&(f=-1):f=this.match_main(u,C,b),f==-1)v[p]=!1,c-=l[p].length2-l[p].length1;else if(v[p]=!0,c=f-b,C==(k=_==-1?u.substring(f,f+C.length):u.substring(f,_+this.Match_MaxBits)))u=u.substring(0,f)+this.diff_text2(l[p].diffs)+u.substring(f+C.length);else{var S=this.diff_main(C,k,!1);if(C.length>this.Match_MaxBits&&this.diff_levenshtein(S)/C.length>this.Patch_DeleteThreshold)v[p]=!1;else{this.diff_cleanupSemanticLossless(S);for(var w,M=0,R=0;R<l[p].diffs.length;R++){var B=l[p].diffs[R];B[0]!==0&&(w=this.diff_xIndex(S,M)),B[0]===1?u=u.substring(0,f+w)+B[1]+u.substring(f+w):B[0]===-1&&(u=u.substring(0,f+w)+u.substring(f+this.diff_xIndex(S,M+B[1].length))),B[0]!==-1&&(M+=B[1].length)}}}}return[u=u.substring(s.length,u.length-s.length),v]},g.prototype.patch_addPadding=function(l){for(var u=this.Patch_Margin,s="",c=1;c<=u;c++)s+=String.fromCharCode(c);for(c=0;c<l.length;c++)l[c].start1+=u,l[c].start2+=u;var v=l[0],p=v.diffs;if(p.length==0||p[0][0]!=0)p.unshift(new g.Diff(0,s)),v.start1-=u,v.start2-=u,v.length1+=u,v.length2+=u;else if(u>p[0][1].length){var f=u-p[0][1].length;p[0][1]=s.substring(p[0][1].length)+p[0][1],v.start1-=f,v.start2-=f,v.length1+=f,v.length2+=f}return(p=(v=l[l.length-1]).diffs).length==0||p[p.length-1][0]!=0?(p.push(new g.Diff(0,s)),v.length1+=u,v.length2+=u):u>p[p.length-1][1].length&&(f=u-p[p.length-1][1].length,p[p.length-1][1]+=s.substring(0,f),v.length1+=f,v.length2+=f),s},g.prototype.patch_splitMax=function(l){for(var u=this.Match_MaxBits,s=0;s<l.length;s++)if(!(l[s].length1<=u)){var c=l[s];l.splice(s--,1);for(var v=c.start1,p=c.start2,f="";c.diffs.length!==0;){var k=new g.patch_obj,b=!0;for(k.start1=v-f.length,k.start2=p-f.length,f!==""&&(k.length1=k.length2=f.length,k.diffs.push(new g.Diff(0,f)));c.diffs.length!==0&&k.length1<u-this.Patch_Margin;){var C=c.diffs[0][0],_=c.diffs[0][1];C===1?(k.length2+=_.length,p+=_.length,k.diffs.push(c.diffs.shift()),b=!1):C===-1&&k.diffs.length==1&&k.diffs[0][0]==0&&_.length>2*u?(k.length1+=_.length,v+=_.length,b=!1,k.diffs.push(new g.Diff(C,_)),c.diffs.shift()):(_=_.substring(0,u-k.length1-this.Patch_Margin),k.length1+=_.length,v+=_.length,C===0?(k.length2+=_.length,p+=_.length):b=!1,k.diffs.push(new g.Diff(C,_)),_==c.diffs[0][1]?c.diffs.shift():c.diffs[0][1]=c.diffs[0][1].substring(_.length))}f=(f=this.diff_text2(k.diffs)).substring(f.length-this.Patch_Margin);var S=this.diff_text1(c.diffs).substring(0,this.Patch_Margin);S!==""&&(k.length1+=S.length,k.length2+=S.length,k.diffs.length!==0&&k.diffs[k.diffs.length-1][0]===0?k.diffs[k.diffs.length-1][1]+=S:k.diffs.push(new g.Diff(0,S))),b||l.splice(++s,0,k)}}},g.prototype.patch_toText=function(l){for(var u=[],s=0;s<l.length;s++)u[s]=l[s];return u.join("")},g.prototype.patch_fromText=function(l){var u=[];if(!l)return u;for(var s=l.split(`
`),c=0,v=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;c<s.length;){var p=s[c].match(v);if(!p)throw new Error("Invalid patch string: "+s[c]);var f=new g.patch_obj;for(u.push(f),f.start1=parseInt(p[1],10),p[2]===""?(f.start1--,f.length1=1):p[2]=="0"?f.length1=0:(f.start1--,f.length1=parseInt(p[2],10)),f.start2=parseInt(p[3],10),p[4]===""?(f.start2--,f.length2=1):p[4]=="0"?f.length2=0:(f.start2--,f.length2=parseInt(p[4],10)),c++;c<s.length;){var k=s[c].charAt(0);try{var b=decodeURI(s[c].substring(1))}catch(C){throw new Error("Illegal escape in patch_fromText: "+b)}if(k=="-")f.diffs.push(new g.Diff(-1,b));else if(k=="+")f.diffs.push(new g.Diff(1,b));else if(k==" ")f.diffs.push(new g.Diff(0,b));else{if(k=="@")break;if(k!=="")throw new Error('Invalid patch mode "'+k+'" in: '+b)}c++}}return u},(g.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var l,u=["@@ -"+(this.length1===0?this.start1+",0":this.length1==1?this.start1+1:this.start1+1+","+this.length1)+" +"+(this.length2===0?this.start2+",0":this.length2==1?this.start2+1:this.start2+1+","+this.length2)+` @@
`],s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case 1:l="+";break;case-1:l="-";break;case 0:l=" "}u[s+1]=l+encodeURI(this.diffs[s][1])+`
`}return u.join("").replace(/%20/g," ")},re.exports=g,re.exports.diff_match_patch=g,re.exports.DIFF_DELETE=-1,re.exports.DIFF_INSERT=1,re.exports.DIFF_EQUAL=0},function(re,H,g){g.r(H);var l,u,s=g(25),c=g(2),v=g(9),p=function(e){return e.currentMode==="sv"?Object(v.a)((e.sv.element.textContent+`
`).replace(/\n\n$/,`
`)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2Md(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2Md(e.ir.element.innerHTML):""},f=g(5),k=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-devtools",this.element.innerHTML='<div class="vditor-reset--error"></div><div style="height: 100%;"></div>'}return e.prototype.renderEchart=function(t){var n=this;t.devtools.element.style.display==="block"&&Object(f.a)(t.options.cdn+"/dist/js/echarts/echarts.min.js","vditorEchartsScript").then(function(){n.ASTChart||(n.ASTChart=echarts.init(t.devtools.element.lastElementChild));try{n.element.lastElementChild.style.display="block",n.element.firstElementChild.innerHTML="",n.ASTChart.setOption({series:[{data:JSON.parse(t.lute.RenderEChartsJSON(p(t))),initialTreeDepth:-1,label:{align:"left",backgroundColor:"rgba(68, 77, 86, .68)",borderRadius:3,color:"#d1d5da",fontSize:12,lineHeight:12,offset:[9,12],padding:[2,4,2,4],position:"top",verticalAlign:"middle"},lineStyle:{color:"#4285f4",type:"curve",width:1},orient:"vertical",roam:!0,type:"tree"}],toolbox:{bottom:25,emphasis:{iconStyle:{color:"#4285f4"}},feature:{restore:{show:!0},saveAsImage:{show:!0}},right:15,show:!0}}),n.ASTChart.resize()}catch(o){n.element.lastElementChild.style.display="none",n.element.firstElementChild.innerHTML=o}})},e}(),b=g(3),C=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&o.classList.contains("vditor-menu--current")&&o.classList.remove("vditor-menu--current")}})},_=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&!o.classList.contains("vditor-menu--current")&&o.classList.add("vditor-menu--current")}})},S=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&o.classList.contains(c.a.CLASS_MENU_DISABLED)&&o.classList.remove(c.a.CLASS_MENU_DISABLED)}})},w=function(e,t){t.forEach(function(n){if(e[n]){var o=e[n].children[0];o&&!o.classList.contains(c.a.CLASS_MENU_DISABLED)&&o.classList.add(c.a.CLASS_MENU_DISABLED)}})},M=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="none")})},R=function(e,t){t.forEach(function(n){e[n]&&e[n]&&(e[n].style.display="block")})},B=function(e,t,n){t.includes("subToolbar")&&(e.toolbar.element.querySelectorAll(".vditor-hint").forEach(function(o){n&&o.isEqualNode(n)||(o.style.display="none")}),e.toolbar.elements.emoji&&(e.toolbar.elements.emoji.lastElementChild.style.display="none")),t.includes("hint")&&(e.hint.element.style.display="none"),e.wysiwyg.popover&&t.includes("popover")&&(e.wysiwyg.popover.style.display="none")},F=function(e,t,n,o){n.addEventListener(Object(b.b)(),function(r){r.preventDefault(),r.stopPropagation(),n.classList.contains(c.a.CLASS_MENU_DISABLED)||(e.toolbar.element.querySelectorAll(".vditor-hint--current").forEach(function(i){i.classList.remove("vditor-hint--current")}),t.style.display==="block"?t.style.display="none":(B(e,["subToolbar","hint","popover"],n.parentElement.parentElement),n.classList.contains("vditor-tooltipped")||n.classList.add("vditor-hint--current"),t.style.display="block",e.toolbar.element.getBoundingClientRect().right-n.getBoundingClientRect().right<250?t.classList.add("vditor-panel--left"):t.classList.remove("vditor-panel--left")))})},x=g(1),$=g(6),ne=function(e,t,n,o){o&&console.log(e+" - "+n+": "+t)},ue=g(11),se=g(12),ce=g(13),de=g(14),Ee=g(15),xe=g(16),Ne=g(7),rt=g(17),G=g(18),ie=function(e,t){if(e)if(e.parentElement.getAttribute("data-type")!=="html-block"){var n=e.firstElementChild.className.replace("language-","");n&&(n==="abc"?Object(ue.a)(e,t.options.cdn):n==="mermaid"?Object(rt.a)(e,t.options.cdn,t.options.theme):n==="flowchart"?Object(de.a)(e,t.options.cdn):n==="echarts"?Object(se.a)(e,t.options.cdn,t.options.theme):n==="mindmap"?Object(G.a)(e,t.options.cdn,t.options.theme):n==="graphviz"?Object(Ee.a)(e,t.options.cdn):n==="math"?Object(Ne.a)(e,{cdn:t.options.cdn,math:t.options.preview.math}):(Object(xe.a)(Object.assign({},t.options.preview.hljs),e,t.options.cdn),Object(ce.a)(e,t.options.lang)),e.setAttribute("data-render","1"))}else e.setAttribute("data-render","1")},E=g(0),z=function(e){if(e.currentMode!=="sv"){var t=e[e.currentMode].element,n=e.outline.render(e);n===""&&(n="[ToC]"),t.querySelectorAll('[data-type="toc-block"]').forEach(function(o){o.innerHTML=n,Object(Ne.a)(o,{cdn:e.options.cdn,math:e.options.preview.math})})}},W=function(e,t){var n=Object(x.f)(e.target,"SPAN");if(n&&Object(x.e)(n,"vditor-toc")){var o=t[t.currentMode].element.querySelector("#"+n.getAttribute("data-target-id"));if(o)if(t.options.height==="auto"){var r=o.offsetTop+t.element.offsetTop;t.options.toolbarConfig.pin||(r+=t.toolbar.element.offsetHeight),window.scrollTo(window.scrollX,r)}else t.element.offsetTop<window.scrollY&&window.scrollTo(window.scrollX,t.element.offsetTop),t[t.currentMode].element.scrollTop=o.offsetTop}},Se=function(e,t,n,o){if(e.previousElementSibling&&e.previousElementSibling.classList.contains("vditor-toc")){if(n.key==="Backspace"&&Object(E.c)(e,t[t.currentMode].element,o).start===0)return e.previousElementSibling.remove(),ae(t),!0;if(We(t,n,o,e,e.previousElementSibling))return!0}if(e.nextElementSibling&&e.nextElementSibling.classList.contains("vditor-toc")){if(n.key==="Delete"&&Object(E.c)(e,t[t.currentMode].element,o).start>=e.textContent.trimRight().length)return e.nextElementSibling.remove(),ae(t),!0;if(et(t,n,o,e,e.nextElementSibling))return!0}if(n.key==="Backspace"||n.key==="Delete"){var r=Object(x.e)(o.startContainer,"vditor-toc");if(r)return r.remove(),ae(t),!0}},le=function(e,t,n,o){n===void 0&&(n=!1);var r=Object(x.c)(t.startContainer);if(r&&!n&&r.getAttribute("data-type")!=="code-block"){if(Ct(r.innerHTML)&&r.previousElementSibling||Ot(r.innerHTML))return;for(var i=Object(E.c)(r,e.ir.element,t).start,a=!0,d=i-1;d>r.textContent.substr(0,i).lastIndexOf(`
`);d--)if(r.textContent.charAt(d)!==" "&&r.textContent.charAt(d)!=="	"){a=!1;break}i===0&&(a=!1);var h=!0;for(d=i-1;d<r.textContent.length;d++)if(r.textContent.charAt(d)!==" "&&r.textContent.charAt(d)!==`
`){h=!1;break}if(a)return;if(h&&!Object(x.e)(t.startContainer,"vditor-ir__marker")){var m=t.startContainer.previousSibling;return void(m&&m.nodeType!==3&&m.classList.contains("vditor-ir__node--expand")&&m.classList.remove("vditor-ir__node--expand"))}}if(e.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(K){K.classList.remove("vditor-ir__node--expand")}),r||(r=e.ir.element),!r.querySelector("wbr")){var y=Object(x.e)(t.startContainer,"vditor-ir__preview");y?y.previousElementSibling.insertAdjacentHTML("beforeend","<wbr>"):t.insertNode(document.createElement("wbr"))}r.querySelectorAll("[style]").forEach(function(K){K.removeAttribute("style")}),r.getAttribute("data-type")==="link-ref-defs-block"&&(r=e.ir.element);var T,j=r.isEqualNode(e.ir.element),I=Object(x.d)(r,"data-type","footnotes-block"),O="";if(j)O=r.innerHTML;else{var A=Object($.b)(t.startContainer,"BLOCKQUOTE"),V=Object(x.b)(t.startContainer);if(V&&(r=V),A&&(!V||V&&!A.contains(V))&&(r=A),I&&(r=I),O=r.outerHTML,r.tagName==="UL"||r.tagName==="OL"){var N=r.previousElementSibling,P=r.nextElementSibling;!N||N.tagName!=="UL"&&N.tagName!=="OL"||(O=N.outerHTML+O,N.remove()),!P||P.tagName!=="UL"&&P.tagName!=="OL"||(O+=P.outerHTML,P.remove()),O=O.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}else r.previousElementSibling&&r.previousElementSibling.textContent.replace(c.a.ZWSP,"")!==""&&o&&o.inputType==="insertParagraph"&&(O=r.previousElementSibling.outerHTML+O,r.previousElementSibling.remove());e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(K){K&&!r.isEqualNode(K)&&(O+=K.outerHTML,K.remove())}),e.ir.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(K){K&&!r.isEqualNode(K)&&(O+=K.outerHTML,K.remove())})}if(ne("SpinVditorIRDOM",O,"argument",e.options.debugger),O=e.lute.SpinVditorIRDOM(O),ne("SpinVditorIRDOM",O,"result",e.options.debugger),j)r.innerHTML=O;else if(r.outerHTML=O,I){var D=Object(x.d)(e.ir.element.querySelector("wbr"),"data-type","footnotes-def");if(D){var L=D.textContent,q=L.substring(1,L.indexOf("]:")),J=e.ir.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+q+'"]');J&&J.setAttribute("aria-label",L.substr(q.length+3).trim().substr(0,24))}}var Q,ee=e.ir.element.querySelectorAll("[data-type='link-ref-defs-block']");ee.forEach(function(K,oe){oe===0?T=K:(T.insertAdjacentHTML("beforeend",K.innerHTML),K.remove())}),ee.length>0&&e.ir.element.insertAdjacentElement("beforeend",ee[0]);var Y=e.ir.element.querySelectorAll("[data-type='footnotes-block']");Y.forEach(function(K,oe){oe===0?Q=K:(Q.insertAdjacentHTML("beforeend",K.innerHTML),K.remove())}),Y.length>0&&e.ir.element.insertAdjacentElement("beforeend",Y[0]),Object(E.f)(e.ir.element,t),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(K){ie(K,e)}),z(e),De(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},X=function(e,t){var n=Object(b.g)(e).split("-"),o=n.length>2&&(n[1]==="shift"||n[1]==="\u21E7"),r=(o?n[2]:n[1])||"-";return!o||r!=="-"||!Object(b.e)()&&/Mac/.test(navigator.platform)||(r="_"),!(!Object(b.d)(t)||t.key.toLowerCase()!==r.toLowerCase()||t.altKey||!(!o&&!t.shiftKey||o&&t.shiftKey))},fe=function(e,t){t.ir.element.querySelectorAll(".vditor-ir__node--expand").forEach(function(a){a.classList.remove("vditor-ir__node--expand")});var n=Object(x.g)(e.startContainer,"vditor-ir__node"),o=!e.collapsed&&Object(x.g)(e.endContainer,"vditor-ir__node");if(e.collapsed||n&&n===o){n&&(n.classList.add("vditor-ir__node--expand"),n.classList.remove("vditor-ir__node--hidden"),Object(E.h)(e));var r=function(a){var d=a.startContainer;if(d.nodeType===3&&d.nodeValue.length!==a.startOffset)return!1;for(var h=d.nextSibling;h&&h.textContent==="";)h=h.nextSibling;if(!h){var m=Object(x.e)(d,"vditor-ir__marker");if(m&&!m.nextSibling){var y=d.parentElement.parentElement.nextSibling;if(y&&y.nodeType!==3&&y.classList.contains("vditor-ir__node"))return y}return!1}return!(!h||h.nodeType===3||!h.classList.contains("vditor-ir__node")||h.getAttribute("data-block"))&&h}(e);if(r)return r.classList.add("vditor-ir__node--expand"),void r.classList.remove("vditor-ir__node--hidden");var i=function(a){var d=a.startContainer,h=d.previousSibling;return!(d.nodeType!==3||a.startOffset!==0||!h||h.nodeType===3||!h.classList.contains("vditor-ir__node")||h.getAttribute("data-block"))&&h}(e);return i?(i.classList.add("vditor-ir__node--expand"),void i.classList.remove("vditor-ir__node--hidden")):void 0}},pe=g(20),te=function(e,t){var n,o=getSelection().getRangeAt(0).cloneRange(),r=o.startContainer;o.startContainer.nodeType!==3&&o.startContainer.tagName==="DIV"&&(r=o.startContainer.childNodes[o.startOffset-1]);var i=Object(x.d)(r,"data-block","0");if(i&&t&&(t.inputType==="deleteContentBackward"||t.data===" ")){for(var a=Object(E.c)(i,e.sv.element,o).start,d=!0,h=a-1;h>i.textContent.substr(0,a).lastIndexOf(`
`);h--)if(i.textContent.charAt(h)!==" "&&i.textContent.charAt(h)!=="	"){d=!1;break}if(a===0&&(d=!1),d)return void we(e);if(t.inputType==="deleteContentBackward"){var m=Object(x.d)(r,"data-type","code-block-open-marker")||Object(x.d)(r,"data-type","code-block-close-marker");if(m){var y;if(m.getAttribute("data-type")==="code-block-close-marker"&&(y=lt(r,"code-block-open-marker"))||m.getAttribute("data-type")==="code-block-open-marker"&&(y=lt(r,"code-block-close-marker",!1)))return y.textContent=m.textContent,void we(e)}var T=Object(x.d)(r,"data-type","math-block-open-marker");if(T){var j=T.nextElementSibling.nextElementSibling;return void(j&&j.getAttribute("data-type")==="math-block-close-marker"&&(j.remove(),we(e)))}i.querySelectorAll('[data-type="code-block-open-marker"]').forEach(function(L){L.textContent.length===1&&L.remove()}),i.querySelectorAll('[data-type="code-block-close-marker"]').forEach(function(L){L.textContent.length===1&&L.remove()});var I=Object(x.d)(r,"data-type","heading-marker");if(I&&I.textContent.indexOf("#")===-1)return void we(e)}if((t.data===" "||t.inputType==="deleteContentBackward")&&(Object(x.d)(r,"data-type","padding")||Object(x.d)(r,"data-type","li-marker")||Object(x.d)(r,"data-type","task-marker")||Object(x.d)(r,"data-type","blockquote-marker")))return void we(e)}if(i&&i.textContent.trimRight()==="$$")we(e);else{i||(i=e.sv.element),((n=i.firstElementChild)===null||n===void 0?void 0:n.getAttribute("data-type"))==="link-ref-defs-block"&&(i=e.sv.element),Object(x.d)(r,"data-type","footnotes-link")&&(i=e.sv.element),i.textContent.indexOf(Lute.Caret)===-1&&o.insertNode(document.createTextNode(Lute.Caret)),i.querySelectorAll("[style]").forEach(function(L){L.removeAttribute("style")}),i.querySelectorAll("font").forEach(function(L){L.outerHTML=L.innerHTML});var O,A=i.textContent,V=i.isEqualNode(e.sv.element);V?A=i.textContent:(i.previousElementSibling&&(A=i.previousElementSibling.textContent+A,i.previousElementSibling.remove()),i.previousElementSibling&&A.indexOf(`---
`)===0&&(A=i.previousElementSibling.textContent+A,i.previousElementSibling.remove()),e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(L,q){q===0&&L&&!i.isEqualNode(L.parentElement)&&(A+=`
`+L.parentElement.textContent,L.parentElement.remove())}),e.sv.element.querySelectorAll("[data-type='footnotes-link']").forEach(function(L,q){q===0&&L&&!i.isEqualNode(L.parentElement)&&(A+=`
`+L.parentElement.textContent,L.parentElement.remove())})),A=Vt(A,e),V?i.innerHTML=A:i.outerHTML=A;var N,P=e.sv.element.querySelectorAll("[data-type='link-ref-defs-block']");P.forEach(function(L,q){q===0?O=L.parentElement:(O.lastElementChild.remove(),O.insertAdjacentHTML("beforeend",""+L.parentElement.innerHTML),L.parentElement.remove())}),P.length>0&&e.sv.element.insertAdjacentElement("beforeend",O);var D=e.sv.element.querySelectorAll("[data-type='footnotes-link']");D.forEach(function(L,q){q===0?N=L.parentElement:(N.lastElementChild.remove(),N.insertAdjacentHTML("beforeend",""+L.parentElement.innerHTML),L.parentElement.remove())}),D.length>0&&e.sv.element.insertAdjacentElement("beforeend",N),Object(E.f)(e.sv.element,o),be(e),we(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})}},Z=g(4),vt=g(10),Ht=function(e){e.options.theme==="dark"?e.element.classList.add("vditor--dark"):e.element.classList.remove("vditor--dark")},je=function(e){var t=window.innerWidth<=c.a.MOBILE_WIDTH?10:35;if(e.wysiwyg.element.parentElement.style.display!=="none"){var n=(e.wysiwyg.element.parentElement.clientWidth-e.options.preview.maxWidth)/2;e.wysiwyg.element.style.padding="10px "+Math.max(t,n)+"px"}e.ir.element.parentElement.style.display!=="none"&&(n=(e.ir.element.parentElement.clientWidth-e.options.preview.maxWidth)/2,e.ir.element.style.padding="10px "+Math.max(t,n)+"px"),e.preview.element.style.display==="block"&&e.currentMode!=="sv"||(e.toolbar.element.style.paddingLeft=Math.max(5,parseInt(e[e.currentMode].element.style.paddingLeft||"0",10)+(e.options.outline.position==="left"?e.outline.element.offsetWidth:0))+"px")},ot=function(e){if(e.options.typewriterMode){var t=window.innerHeight;typeof e.options.height=="number"&&(t=e.options.height,typeof e.options.minHeight=="number"&&(t=Math.max(t,e.options.minHeight)),t=Math.min(window.innerHeight,t)),e.element.classList.contains("vditor--fullscreen")&&(t=window.innerHeight),e[e.currentMode].element.style.setProperty("--editor-bottom",(t-e.toolbar.element.offsetHeight)/2+"px")}},En=function(e,t){ot(e),window.addEventListener("resize",function(){je(e),ot(e)});var n=Object(b.a)()&&localStorage.getItem(e.options.cache.id);return e.options.cache.enable&&n||(e.options.value?n=e.options.value:e.originalInnerHTML?n=e.lute.HTML2Md(e.originalInnerHTML):e.options.cache.enable||(n="")),n||""},Xe=function(e){clearTimeout(e[e.currentMode].hlToolbarTimeoutId),e[e.currentMode].hlToolbarTimeoutId=window.setTimeout(function(){if(e[e.currentMode].element.getAttribute("contenteditable")!=="false"&&Object(E.e)(e[e.currentMode].element)){C(e.toolbar.elements,c.a.EDIT_TOOLBARS),S(e.toolbar.elements,c.a.EDIT_TOOLBARS);var t=Object(E.b)(e[e.currentMode].element),n=t.startContainer;t.startContainer.nodeType===3&&(n=t.startContainer.parentElement),n.classList.contains("vditor-reset")&&(n=n.childNodes[t.startOffset]),(e.currentMode==="sv"?Object(x.d)(n,"data-type","heading"):Object($.a)(n))&&_(e.toolbar.elements,["headings"]),(e.currentMode==="sv"?Object(x.d)(n,"data-type","blockquote"):Object(x.f)(n,"BLOCKQUOTE"))&&_(e.toolbar.elements,["quote"]),Object(x.d)(n,"data-type","strong")&&_(e.toolbar.elements,["bold"]),Object(x.d)(n,"data-type","em")&&_(e.toolbar.elements,["italic"]),Object(x.d)(n,"data-type","s")&&_(e.toolbar.elements,["strike"]),Object(x.d)(n,"data-type","a")&&_(e.toolbar.elements,["link"]);var o=Object(x.f)(n,"LI");o?(o.classList.contains("vditor-task")?_(e.toolbar.elements,["check"]):o.parentElement.tagName==="OL"?_(e.toolbar.elements,["ordered-list"]):o.parentElement.tagName==="UL"&&_(e.toolbar.elements,["list"]),S(e.toolbar.elements,["outdent","indent"])):w(e.toolbar.elements,["outdent","indent"]),Object(x.d)(n,"data-type","code-block")&&(w(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),_(e.toolbar.elements,["code"])),Object(x.d)(n,"data-type","code")&&(w(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),_(e.toolbar.elements,["inline-code"])),Object(x.d)(n,"data-type","table")&&w(e.toolbar.elements,["headings","list","ordered-list","check","line","quote","code","table"])}},200)},me=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),clearTimeout(e.wysiwyg.afterRenderTimeoutId),e.wysiwyg.afterRenderTimeoutId=window.setTimeout(function(){if(!e.wysiwyg.composingLock){var n=p(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&Object(b.a)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},Nt=function(e){for(var t="",n=e.nextSibling;n;)n.nodeType===3?t+=n.textContent:t+=n.outerHTML,n=n.nextSibling;return t},Dt=function(e){for(var t="",n=e.previousSibling;n;)t=n.nodeType===3?n.textContent+t:n.outerHTML+t,n=n.previousSibling;return t},It=function(e,t){Array.from(e.wysiwyg.element.childNodes).find(function(n){if(n.nodeType===3){var o=document.createElement("p");o.setAttribute("data-block","0"),o.textContent=n.textContent;var r=t.startContainer.nodeType===3?t.startOffset:n.textContent.length;return n.parentNode.insertBefore(o,n),n.remove(),t.setStart(o.firstChild,Math.min(o.firstChild.textContent.length,r)),t.collapse(!0),Object(E.h)(t),!0}if(!n.getAttribute("data-block"))return n.tagName==="P"?n.remove():(n.tagName==="DIV"?(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>"):n.tagName==="BR"?n.outerHTML='<p data-block="0">'+n.outerHTML+"<wbr></p>":(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.outerHTML+"</p>"),Object(E.f)(e.wysiwyg.element,t),t=getSelection().getRangeAt(0)),!0})},it=function(e,t){var n=Object(E.b)(e.wysiwyg.element),o=Object(x.c)(n.startContainer);o||(o=n.startContainer.childNodes[n.startOffset]),o||e.wysiwyg.element.children.length!==0||(o=e.wysiwyg.element),o&&!o.classList.contains("vditor-wysiwyg__block")&&(n.insertNode(document.createElement("wbr")),o.innerHTML.trim()==="<wbr>"&&(o.innerHTML="<wbr><br>"),o.tagName==="BLOCKQUOTE"||o.classList.contains("vditor-reset")?o.innerHTML="<"+t+' data-block="0">'+o.innerHTML.trim()+"</"+t+">":o.outerHTML="<"+t+' data-block="0">'+o.innerHTML.trim()+"</"+t+">",Object(E.f)(e.wysiwyg.element,n),z(e))},ht=function(e){var t=getSelection().getRangeAt(0),n=Object(x.c)(t.startContainer);n||(n=t.startContainer.childNodes[t.startOffset]),n&&(t.insertNode(document.createElement("wbr")),n.outerHTML='<p data-block="0">'+n.innerHTML+"</p>",Object(E.f)(e.wysiwyg.element,t)),e.wysiwyg.popover.style.display="none"},Ye=function(e,t,n){n===void 0&&(n=!0);var o=e.previousElementSibling,r=o.ownerDocument.createRange();o.tagName==="CODE"?(o.style.display="inline-block",n?r.setStart(o.firstChild,1):r.selectNodeContents(o)):(o.style.display="block",o.firstChild.firstChild||o.firstChild.appendChild(document.createTextNode("")),r.selectNodeContents(o.firstChild)),n?r.collapse(!0):r.collapse(!1),Object(E.h)(r),e.firstElementChild.classList.contains("language-mindmap")||be(t)},Oe=function(e,t){if(X("\u2318-\u21E7-X",t)){var n=e.wysiwyg.popover.querySelector('[data-type="remove"]');if(n)return n.click(),t.preventDefault(),!0}},Re=function(e){clearTimeout(e.wysiwyg.hlToolbarTimeoutId),e.wysiwyg.hlToolbarTimeoutId=window.setTimeout(function(){if(e.wysiwyg.element.getAttribute("contenteditable")!=="false"&&Object(E.e)(e.wysiwyg.element)){C(e.toolbar.elements,c.a.EDIT_TOOLBARS),S(e.toolbar.elements,c.a.EDIT_TOOLBARS);var t=getSelection().getRangeAt(0),n=t.startContainer;n=t.startContainer.nodeType===3?t.startContainer.parentElement:n.childNodes[t.startOffset>=n.childNodes.length?n.childNodes.length-1:t.startOffset];var o=Object(x.d)(n,"data-type","footnotes-block");if(o)return e.wysiwyg.popover.innerHTML="",Me(o,e),void Le(e,o);var r=Object(x.f)(n,"LI");r?(r.classList.contains("vditor-task")?_(e.toolbar.elements,["check"]):r.parentElement.tagName==="OL"?_(e.toolbar.elements,["ordered-list"]):r.parentElement.tagName==="UL"&&_(e.toolbar.elements,["list"]),S(e.toolbar.elements,["outdent","indent"])):w(e.toolbar.elements,["outdent","indent"]),Object(x.f)(n,"BLOCKQUOTE")&&_(e.toolbar.elements,["quote"]),(Object(x.f)(n,"B")||Object(x.f)(n,"STRONG"))&&_(e.toolbar.elements,["bold"]),(Object(x.f)(n,"I")||Object(x.f)(n,"EM"))&&_(e.toolbar.elements,["italic"]),(Object(x.f)(n,"STRIKE")||Object(x.f)(n,"S"))&&_(e.toolbar.elements,["strike"]),e.wysiwyg.element.querySelectorAll(".vditor-comment--focus").forEach(function(U){U.classList.remove("vditor-comment--focus")});var i=Object(x.e)(n,"vditor-comment");if(i){var a=i.getAttribute("data-cmtids").split(" ");if(a.length>1&&i.nextSibling.isSameNode(i.nextElementSibling)){var d=i.nextElementSibling.getAttribute("data-cmtids").split(" ");a.find(function(U){if(d.includes(U))return a=[U],!0})}e.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(U){U.getAttribute("data-cmtids").indexOf(a[0])>-1&&U.classList.add("vditor-comment--focus")})}var h=Object(x.f)(n,"A");h&&_(e.toolbar.elements,["link"]);var m=Object(x.f)(n,"TABLE"),y=Object($.a)(n);Object(x.f)(n,"CODE")?Object(x.f)(n,"PRE")?(w(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","inline-code","upload","link","table","record"]),_(e.toolbar.elements,["code"])):(w(e.toolbar.elements,["headings","bold","italic","strike","line","quote","list","ordered-list","check","code","upload","link","table","record"]),_(e.toolbar.elements,["inline-code"])):y?(w(e.toolbar.elements,["bold"]),_(e.toolbar.elements,["headings"])):m&&w(e.toolbar.elements,["table"]);var T=Object(x.e)(n,"vditor-toc");if(T)return e.wysiwyg.popover.innerHTML="",Me(T,e),void Le(e,T);var j=Object($.b)(n,"BLOCKQUOTE");if(j&&(e.wysiwyg.popover.innerHTML="",Ue(t,j,e),ze(t,j,e),Me(j,e),Le(e,j)),r&&(e.wysiwyg.popover.innerHTML="",Ue(t,r,e),ze(t,r,e),Me(r,e),Le(e,r)),m){e.wysiwyg.popover.innerHTML="";var I=function(){var U=m.rows.length,ye=m.rows[0].cells.length,qe=parseInt(Y.value,10)||U,He=parseInt(oe.value,10)||ye;if(qe!==U||ye!==He){if(ye!==He)for(var hn=He-ye,Fe=0;Fe<m.rows.length;Fe++)if(hn>0)for(var gn=0;gn<hn;gn++)Fe===0?m.rows[Fe].lastElementChild.insertAdjacentHTML("afterend","<th> </th>"):m.rows[Fe].lastElementChild.insertAdjacentHTML("afterend","<td> </td>");else for(var jt=ye-1;jt>=He;jt--)m.rows[Fe].cells[jt].remove();if(U!==qe){var bn=qe-U;if(bn>0){for(var At="<tr>",Ge=0;Ge<He;Ge++)At+="<td> </td>";for(var yn=0;yn<bn;yn++)m.querySelector("tbody")?m.querySelector("tbody").insertAdjacentHTML("beforeend",At):m.querySelector("thead").insertAdjacentHTML("afterend",At+"</tr>")}else for(Ge=U-1;Ge>=qe;Ge--)m.rows[Ge].remove(),m.rows.length===1&&m.querySelector("tbody").remove()}}},O=function(U){pt(m,U),U==="right"?(P.classList.remove("vditor-icon--current"),D.classList.remove("vditor-icon--current"),L.classList.add("vditor-icon--current")):U==="center"?(P.classList.remove("vditor-icon--current"),L.classList.remove("vditor-icon--current"),D.classList.add("vditor-icon--current")):(D.classList.remove("vditor-icon--current"),L.classList.remove("vditor-icon--current"),P.classList.add("vditor-icon--current")),Object(E.h)(t),me(e)},A=Object(x.f)(n,"TD"),V=Object(x.f)(n,"TH"),N="left";A?N=A.getAttribute("align")||"left":V&&(N=V.getAttribute("align")||"center");var P=document.createElement("button");P.setAttribute("type","button"),P.setAttribute("aria-label",Z.a[e.options.lang].alignLeft+"<"+Object(b.g)("\u2318-\u21E7-L")+">"),P.setAttribute("data-type","left"),P.innerHTML='<svg><use xlink:href="#vditor-icon-align-left"></use></svg>',P.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(N==="left"?" vditor-icon--current":""),P.onclick=function(){O("left")};var D=document.createElement("button");D.setAttribute("type","button"),D.setAttribute("aria-label",Z.a[e.options.lang].alignCenter+"<"+Object(b.g)("\u2318-\u21E7-C")+">"),D.setAttribute("data-type","center"),D.innerHTML='<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',D.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(N==="center"?" vditor-icon--current":""),D.onclick=function(){O("center")};var L=document.createElement("button");L.setAttribute("type","button"),L.setAttribute("aria-label",Z.a[e.options.lang].alignRight+"<"+Object(b.g)("\u2318-\u21E7-R")+">"),L.setAttribute("data-type","right"),L.innerHTML='<svg><use xlink:href="#vditor-icon-align-right"></use></svg>',L.className="vditor-icon vditor-tooltipped vditor-tooltipped__n"+(N==="right"?" vditor-icon--current":""),L.onclick=function(){O("right")};var q=document.createElement("button");q.setAttribute("type","button"),q.setAttribute("aria-label",Z.a[e.options.lang]["insert-row"]+"<"+Object(b.g)("\u2318-=")+">"),q.setAttribute("data-type","insertRow"),q.innerHTML='<svg><use xlink:href="#vditor-icon-insert-row"></use></svg>',q.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",q.onclick=function(){var U=getSelection().getRangeAt(0).startContainer,ye=Object(x.f)(U,"TD")||Object(x.f)(U,"TH");ye&&$t(e,t,ye)};var J=document.createElement("button");J.setAttribute("type","button"),J.setAttribute("aria-label",Z.a[e.options.lang]["insert-column"]+"<"+Object(b.g)("\u2318-\u21E7-=")+">"),J.setAttribute("data-type","insertColumn"),J.innerHTML='<svg><use xlink:href="#vditor-icon-insert-column"></use></svg>',J.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",J.onclick=function(){var U=getSelection().getRangeAt(0).startContainer,ye=Object(x.f)(U,"TD")||Object(x.f)(U,"TH");ye&&Qt(e,m,ye)};var Q=document.createElement("button");Q.setAttribute("type","button"),Q.setAttribute("aria-label",Z.a[e.options.lang]["delete-row"]+"<"+Object(b.g)("\u2318--")+">"),Q.setAttribute("data-type","deleteRow"),Q.innerHTML='<svg><use xlink:href="#vditor-icon-delete-row"></use></svg>',Q.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",Q.onclick=function(){var U=getSelection().getRangeAt(0).startContainer,ye=Object(x.f)(U,"TD")||Object(x.f)(U,"TH");ye&&en(e,t,ye)};var ee=document.createElement("button");ee.setAttribute("type","button"),ee.setAttribute("aria-label",Z.a[e.options.lang]["delete-column"]+"<"+Object(b.g)("\u2318-\u21E7--")+">"),ee.setAttribute("data-type","deleteColumn"),ee.innerHTML='<svg><use xlink:href="#vditor-icon-delete-column"></use></svg>',ee.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",ee.onclick=function(){var U=getSelection().getRangeAt(0).startContainer,ye=Object(x.f)(U,"TD")||Object(x.f)(U,"TH");ye&&tn(e,t,m,ye)},(_e=document.createElement("span")).setAttribute("aria-label",Z.a[e.options.lang].row),_e.className="vditor-tooltipped vditor-tooltipped__n";var Y=document.createElement("input");_e.appendChild(Y),Y.type="number",Y.min="1",Y.className="vditor-input",Y.style.width="42px",Y.style.textAlign="center",Y.setAttribute("placeholder",Z.a[e.options.lang].row),Y.value=m.rows.length.toString(),Y.oninput=function(){I()},Y.onkeydown=function(U){if(!U.isComposing)return U.key==="Tab"?(oe.focus(),oe.select(),void U.preventDefault()):void Oe(e,U)};var K=document.createElement("span");K.setAttribute("aria-label",Z.a[e.options.lang].column),K.className="vditor-tooltipped vditor-tooltipped__n";var oe=document.createElement("input");K.appendChild(oe),oe.type="number",oe.min="1",oe.className="vditor-input",oe.style.width="42px",oe.style.textAlign="center",oe.setAttribute("placeholder",Z.a[e.options.lang].column),oe.value=m.rows[0].cells.length.toString(),oe.oninput=function(){I()},oe.onkeydown=function(U){if(!U.isComposing)return U.key==="Tab"?(Y.focus(),Y.select(),void U.preventDefault()):void Oe(e,U)},Ue(t,m,e),ze(t,m,e),Me(m,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",P),e.wysiwyg.popover.insertAdjacentElement("beforeend",D),e.wysiwyg.popover.insertAdjacentElement("beforeend",L),e.wysiwyg.popover.insertAdjacentElement("beforeend",q),e.wysiwyg.popover.insertAdjacentElement("beforeend",J),e.wysiwyg.popover.insertAdjacentElement("beforeend",Q),e.wysiwyg.popover.insertAdjacentElement("beforeend",ee),e.wysiwyg.popover.insertAdjacentElement("beforeend",_e),e.wysiwyg.popover.insertAdjacentHTML("beforeend"," x "),e.wysiwyg.popover.insertAdjacentElement("beforeend",K),Le(e,m)}var Ce=Object(x.d)(n,"data-type","link-ref");Ce&&Rt(e,Ce);var ge=Object(x.d)(n,"data-type","footnotes-ref");if(ge){e.wysiwyg.popover.innerHTML="",(_e=document.createElement("span")).setAttribute("aria-label",Z.a[e.options.lang].footnoteRef+"<"+Object(b.g)("\u2325-Enter")+">"),_e.className="vditor-tooltipped vditor-tooltipped__n";var ke=document.createElement("input");_e.appendChild(ke),ke.className="vditor-input",ke.setAttribute("placeholder",Z.a[e.options.lang].footnoteRef+"<"+Object(b.g)("\u2325-Enter")+">"),ke.style.width="120px",ke.value=ge.getAttribute("data-footnotes-label"),ke.oninput=function(){ke.value.trim()!==""&&ge.setAttribute("data-footnotes-label",ke.value)},ke.onkeydown=function(U){if(!U.isComposing)return Object(b.d)(U)||U.shiftKey||!U.altKey||U.key!=="Enter"?void Oe(e,U):(t.selectNodeContents(ge),t.collapse(!1),Object(E.h)(t),void U.preventDefault())},Me(ge,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",_e),Le(e,ge)}var he=Object(x.e)(n,"vditor-wysiwyg__block");if(he&&he.getAttribute("data-type").indexOf("block")>-1){if(e.wysiwyg.popover.innerHTML="",Ue(t,he,e),ze(t,he,e),Me(he,e),he.getAttribute("data-type")==="code-block"){var Ae=document.createElement("span");Ae.setAttribute("aria-label",Z.a[e.options.lang].language+"<"+Object(b.g)("\u2325-Enter")+">"),Ae.className="vditor-tooltipped vditor-tooltipped__n";var Te=document.createElement("input");Ae.appendChild(Te);var Be=he.firstElementChild.firstElementChild;Te.className="vditor-input",Te.setAttribute("placeholder",Z.a[e.options.lang].language+"<"+Object(b.g)("\u2325-Enter")+">"),Te.value=Be.className.indexOf("language-")>-1?Be.className.split("-")[1].split(" ")[0]:"",Te.oninput=function(){Te.value.trim()!==""?Be.className="language-"+Te.value:(Be.className="",e.hint.recentLanguage=""),he.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(he.lastElementChild.innerHTML=he.firstElementChild.innerHTML,ie(he.lastElementChild,e)),me(e)},Te.onkeydown=function(U){if(!U.isComposing&&!Oe(e,U)){if(U.key==="Escape"&&e.hint.element.style.display==="block")return e.hint.element.style.display="none",void U.preventDefault();Object(b.d)(U)||U.shiftKey||!U.altKey||U.key!=="Enter"||(t.setStart(Be.firstChild,0),t.collapse(!0),Object(E.h)(t)),e.hint.select(U,e)}},Te.onkeyup=function(U){if(!U.isComposing&&U.key!=="Enter"&&U.key!=="ArrowUp"&&U.key!=="Escape"&&U.key!=="ArrowDown"){var ye=[],qe=Te.value.substring(0,Te.selectionStart);c.a.CODE_LANGUAGES.forEach(function(He){He.indexOf(qe.toLowerCase())>-1&&ye.push({html:He,value:He})}),e.hint.genHTML(ye,qe,e),U.preventDefault()}},e.wysiwyg.popover.insertAdjacentElement("beforeend",Ae)}Le(e,he)}else he||e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(U){U.previousElementSibling.style.display="none"}),he=void 0;if(y){var _e;e.wysiwyg.popover.innerHTML="",(_e=document.createElement("span")).setAttribute("aria-label","ID<"+Object(b.g)("\u2325-Enter")+">"),_e.className="vditor-tooltipped vditor-tooltipped__n";var Ie=document.createElement("input");_e.appendChild(Ie),Ie.className="vditor-input",Ie.setAttribute("placeholder","ID<"+Object(b.g)("\u2325-Enter")+">"),Ie.style.width="120px",Ie.value=y.getAttribute("data-id")||"",Ie.oninput=function(){y.setAttribute("data-id",Ie.value)},Ie.onkeydown=function(U){if(!U.isComposing)return Object(b.d)(U)||U.shiftKey||!U.altKey||U.key!=="Enter"?void Oe(e,U):(t.selectNodeContents(y),t.collapse(!1),Object(E.h)(t),void U.preventDefault())},Ue(t,y,e),ze(t,y,e),Me(y,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",_e),Le(e,y)}if(h&&gt(e,h),!(j||r||m||he||h||Ce||ge||y||T)){var Ke=Object(x.d)(n,"data-block","0");Ke&&Ke.parentElement.isEqualNode(e.wysiwyg.element)?(e.wysiwyg.popover.innerHTML="",Ue(t,Ke,e),ze(t,Ke,e),Me(Ke,e),Le(e,Ke)):e.wysiwyg.popover.style.display="none"}e.wysiwyg.element.querySelectorAll('span[data-type="backslash"] > span').forEach(function(U){U.style.display="none"});var vn=Object(x.d)(t.startContainer,"data-type","backslash");vn&&(vn.querySelector("span").style.display="inline")}},200)},Le=function(e,t){var n=t,o=Object(x.f)(t,"TABLE");o&&(n=o),e.wysiwyg.popover.style.left="0",e.wysiwyg.popover.style.display="block",e.wysiwyg.popover.style.top=Math.max(-8,n.offsetTop-21-e.wysiwyg.element.scrollTop)+"px",e.wysiwyg.popover.style.left=Math.min(n.offsetLeft,e.wysiwyg.element.clientWidth-e.wysiwyg.popover.clientWidth)+"px",e.wysiwyg.popover.setAttribute("data-top",(n.offsetTop-21).toString())},Rt=function(e,t){e.wysiwyg.popover.innerHTML="";var n=function(){r.value.trim()!==""&&(t.tagName==="IMG"?t.setAttribute("alt",r.value):t.textContent=r.value),a.value.trim()!==""&&t.setAttribute("data-link-label",a.value)},o=document.createElement("span");o.setAttribute("aria-label",Z.a[e.options.lang].textIsNotEmpty),o.className="vditor-tooltipped vditor-tooltipped__n";var r=document.createElement("input");o.appendChild(r),r.className="vditor-input",r.setAttribute("placeholder",Z.a[e.options.lang].textIsNotEmpty),r.style.width="120px",r.value=t.getAttribute("alt")||t.textContent,r.oninput=function(){n()},r.onkeydown=function(d){Oe(e,d)||$e(e.wysiwyg.element,t,d,a)};var i=document.createElement("span");i.setAttribute("aria-label",Z.a[e.options.lang].linkRef),i.className="vditor-tooltipped vditor-tooltipped__n";var a=document.createElement("input");i.appendChild(a),a.className="vditor-input",a.setAttribute("placeholder",Z.a[e.options.lang].linkRef),a.value=t.getAttribute("data-link-label"),a.oninput=function(){n()},a.onkeydown=function(d){Oe(e,d)||$e(e.wysiwyg.element,t,d,r)},Me(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",o),e.wysiwyg.popover.insertAdjacentElement("beforeend",i),Le(e,t)},Ue=function(e,t,n){var o=t.previousElementSibling;if(o&&(t.parentElement.isEqualNode(n.wysiwyg.element)||t.tagName==="LI")){var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("data-type","up"),r.setAttribute("aria-label",Z.a[n.options.lang].up+"<"+Object(b.g)("\u2318-\u21E7-U")+">"),r.innerHTML='<svg><use xlink:href="#vditor-icon-up"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",r.onclick=function(){e.insertNode(document.createElement("wbr")),o.insertAdjacentElement("beforebegin",t),Object(E.f)(n.wysiwyg.element,e),me(n),Re(n),be(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",r)}},ze=function(e,t,n){var o=t.nextElementSibling;if(o&&(t.parentElement.isEqualNode(n.wysiwyg.element)||t.tagName==="LI")){var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("data-type","down"),r.setAttribute("aria-label",Z.a[n.options.lang].down+"<"+Object(b.g)("\u2318-\u21E7-D")+">"),r.innerHTML='<svg><use xlink:href="#vditor-icon-down"></use></svg>',r.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",r.onclick=function(){e.insertNode(document.createElement("wbr")),o.insertAdjacentElement("afterend",t),Object(E.f)(n.wysiwyg.element,e),me(n),Re(n),be(n)},n.wysiwyg.popover.insertAdjacentElement("beforeend",r)}},Me=function(e,t){var n=document.createElement("button");n.setAttribute("type","button"),n.setAttribute("data-type","remove"),n.setAttribute("aria-label",Z.a[t.options.lang].remove+"<"+Object(b.g)("\u2318-\u21E7-X")+">"),n.innerHTML='<svg><use xlink:href="#vditor-icon-trashcan"></use></svg>',n.className="vditor-icon vditor-tooltipped vditor-tooltipped__n",n.onclick=function(){var o=Object(E.b)(t.wysiwyg.element);o.setStartAfter(e),Object(E.h)(o),e.remove(),me(t),Re(t)},t.wysiwyg.popover.insertAdjacentElement("beforeend",n)},$e=function(e,t,n,o){if(!n.isComposing){if(n.key==="Tab")return o.focus(),o.select(),void n.preventDefault();if(!Object(b.d)(n)&&!n.shiftKey&&n.altKey&&n.key==="Enter"){var r=Object(E.b)(e);t.insertAdjacentHTML("afterend",c.a.ZWSP),r.setStartAfter(t.nextSibling),r.collapse(!0),Object(E.h)(r),n.preventDefault()}}},gt=function(e,t){e.wysiwyg.popover.innerHTML="";var n=function(){r.value.trim()!==""&&(t.innerHTML=r.value),t.setAttribute("href",a.value),t.setAttribute("title",h.value)};t.querySelectorAll("[data-marker]").forEach(function(m){m.removeAttribute("data-marker")});var o=document.createElement("span");o.setAttribute("aria-label",Z.a[e.options.lang].textIsNotEmpty),o.className="vditor-tooltipped vditor-tooltipped__n";var r=document.createElement("input");o.appendChild(r),r.className="vditor-input",r.setAttribute("placeholder",Z.a[e.options.lang].textIsNotEmpty),r.style.width="120px",r.value=t.innerHTML||"",r.oninput=function(){n()},r.onkeydown=function(m){Oe(e,m)||$e(e.wysiwyg.element,t,m,a)};var i=document.createElement("span");i.setAttribute("aria-label",Z.a[e.options.lang].link),i.className="vditor-tooltipped vditor-tooltipped__n";var a=document.createElement("input");i.appendChild(a),a.className="vditor-input",a.setAttribute("placeholder",Z.a[e.options.lang].link),a.value=t.getAttribute("href")||"",a.oninput=function(){n()},a.onkeydown=function(m){Oe(e,m)||$e(e.wysiwyg.element,t,m,h)};var d=document.createElement("span");d.setAttribute("aria-label",Z.a[e.options.lang].tooltipText),d.className="vditor-tooltipped vditor-tooltipped__n";var h=document.createElement("input");d.appendChild(h),h.className="vditor-input",h.setAttribute("placeholder",Z.a[e.options.lang].tooltipText),h.style.width="60px",h.value=t.getAttribute("title")||"",h.oninput=function(){n()},h.onkeydown=function(m){Oe(e,m)||$e(e.wysiwyg.element,t,m,r)},Me(t,e),e.wysiwyg.popover.insertAdjacentElement("beforeend",o),e.wysiwyg.popover.insertAdjacentElement("beforeend",i),e.wysiwyg.popover.insertAdjacentElement("beforeend",d),Le(e,t)},Ve=function(e){e.currentMode==="wysiwyg"?Re(e):e.currentMode==="ir"&&Xe(e)},Pt=function(e,t,n){n===void 0&&(n={enableAddUndoStack:!0,enableHint:!1,enableInput:!0});var o=e.wysiwyg.element;o.innerHTML=e.lute.Md2VditorDOM(t),o.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(r){ie(r,e),r.previousElementSibling.setAttribute("style","display:none")}),me(e,n)},xn=function(e,t,n){for(var o=e.startContainer.parentElement,r=!1,i="",a="",d=function(O){var A=Dt(O.startContainer),V=Nt(O.startContainer),N=O.startContainer.textContent,P=O.startOffset,D="",L="";return(N.substr(0,P)!==""&&N.substr(0,P)!==c.a.ZWSP||A)&&(D=""+A+N.substr(0,P)),(N.substr(P)!==""&&N.substr(P)!==c.a.ZWSP||V)&&(L=""+N.substr(P)+V),{afterHTML:L,beforeHTML:D}}(e),h=d.beforeHTML,m=d.afterHTML;o&&!r;){var y=o.tagName;if(y==="STRIKE"&&(y="S"),y==="I"&&(y="EM"),y==="B"&&(y="STRONG"),y==="S"||y==="STRONG"||y==="EM"){var T="",j="",I="";o.parentElement.getAttribute("data-block")!=="0"&&(j=Dt(o),I=Nt(o)),(h||j)&&(h=T=j+"<"+y+">"+h+"</"+y+">"),(n==="bold"&&y==="STRONG"||n==="italic"&&y==="EM"||n==="strikeThrough"&&y==="S")&&(T+=""+i+c.a.ZWSP+"<wbr>"+a,r=!0),(m||I)&&(T+=m="<"+y+">"+m+"</"+y+">"+I),o.parentElement.getAttribute("data-block")!=="0"?(o=o.parentElement).innerHTML=T:(o.outerHTML=T,o=o.parentElement),i="<"+y+">"+i,a="</"+y+">"+a}else r=!0}Object(E.f)(t.wysiwyg.element,e)},ve=function(e,t){var n,o=this;this.element=document.createElement("div"),t.className&&(n=this.element.classList).add.apply(n,t.className.split(" "));var r=t.hotkey?" <"+Object(b.g)(t.hotkey)+">":"";t.level===2&&(r=t.hotkey?" &lt;"+Object(b.g)(t.hotkey)+"&gt;":"");var i=t.tip?t.tip+r:Z.a[e.options.lang][t.name]+r,a=t.name==="upload"?"div":"button";if(t.level===2)this.element.innerHTML="<"+a+' data-type="'+t.name+'">'+i+"</"+a+">";else{this.element.classList.add("vditor-toolbar__item");var d=document.createElement(a);d.setAttribute("data-type",t.name),d.className="vditor-tooltipped vditor-tooltipped__"+t.tipPosition,d.setAttribute("aria-label",i),d.innerHTML=t.icon,this.element.appendChild(d)}t.prefix&&this.element.children[0].addEventListener(Object(b.b)(),function(h){h.preventDefault(),o.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)||(e.currentMode==="wysiwyg"?function(m,y,T){if(!(m.wysiwyg.composingLock&&T instanceof CustomEvent)){var j=!0,I=!0;m.wysiwyg.element.querySelector("wbr")&&m.wysiwyg.element.querySelector("wbr").remove();var O=Object(E.b)(m.wysiwyg.element),A=y.getAttribute("data-type");if(y.classList.contains("vditor-menu--current"))if(A==="strike"&&(A="strikeThrough"),A==="quote"){var V=Object(x.f)(O.startContainer,"BLOCKQUOTE");V||(V=O.startContainer.childNodes[O.startOffset]),V&&(j=!1,y.classList.remove("vditor-menu--current"),O.insertNode(document.createElement("wbr")),V.outerHTML=V.innerHTML.trim()===""?'<p data-block="0">'+V.innerHTML+"</p>":V.innerHTML,Object(E.f)(m.wysiwyg.element,O))}else if(A==="inline-code"){var N=Object(x.f)(O.startContainer,"CODE");N||(N=O.startContainer.childNodes[O.startOffset]),N&&(N.outerHTML=N.innerHTML.replace(c.a.ZWSP,"")+"<wbr>",Object(E.f)(m.wysiwyg.element,O))}else A==="link"?(O.collapsed&&O.selectNode(O.startContainer.parentElement),document.execCommand("unlink",!1,"")):A==="check"||A==="list"||A==="ordered-list"?(dt(m,O,A),Object(E.f)(m.wysiwyg.element,O),j=!1,y.classList.remove("vditor-menu--current")):(j=!1,y.classList.remove("vditor-menu--current"),O.toString()===""?xn(O,m,A):document.execCommand(A,!1,""));else{m.wysiwyg.element.childNodes.length===0&&(m.wysiwyg.element.innerHTML='<p data-block="0"><wbr></p>',Object(E.f)(m.wysiwyg.element,O));var P=Object(x.c)(O.startContainer);if(A==="quote"){if(P||(P=O.startContainer.childNodes[O.startOffset]),P){j=!1,y.classList.add("vditor-menu--current"),O.insertNode(document.createElement("wbr"));var D=Object(x.f)(O.startContainer,"LI");D&&P.contains(D)?D.innerHTML='<blockquote data-block="0">'+D.innerHTML+"</blockquote>":P.outerHTML='<blockquote data-block="0">'+P.outerHTML+"</blockquote>",Object(E.f)(m.wysiwyg.element,O)}}else if(A==="check"||A==="list"||A==="ordered-list")dt(m,O,A,!1),Object(E.f)(m.wysiwyg.element,O),j=!1,C(m.toolbar.elements,["check","list","ordered-list"]),y.classList.add("vditor-menu--current");else if(A==="inline-code"){if(O.toString()==="")(L=document.createElement("code")).textContent=c.a.ZWSP,O.insertNode(L),O.setStart(L.firstChild,1),O.collapse(!0),Object(E.h)(O);else if(O.startContainer.nodeType===3){var L=document.createElement("code");O.surroundContents(L),O.insertNode(L),Object(E.h)(O)}y.classList.add("vditor-menu--current")}else if(A==="code")(L=document.createElement("div")).className="vditor-wysiwyg__block",L.setAttribute("data-type","code-block"),L.setAttribute("data-block","0"),L.setAttribute("data-marker","```"),O.toString()===""?L.innerHTML=`<pre><code><wbr>
</code></pre>`:(L.innerHTML="<pre><code>"+O.toString()+"<wbr></code></pre>",O.deleteContents()),O.insertNode(L),P&&(P.outerHTML=m.lute.SpinVditorDOM(P.outerHTML)),Object(E.f)(m.wysiwyg.element,O),m.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(ge){ie(ge,m)}),y.classList.add("vditor-menu--disabled");else if(A==="link"){if(O.toString()===""){var q=document.createElement("a");q.innerText=c.a.ZWSP,O.insertNode(q),O.setStart(q.firstChild,1),O.collapse(!0),gt(m,q);var J=m.wysiwyg.popover.querySelector("input");J.value="",J.focus(),I=!1}else{(L=document.createElement("a")).setAttribute("href",""),L.innerHTML=O.toString(),O.surroundContents(L),O.insertNode(L),Object(E.h)(O),gt(m,L);var Q=m.wysiwyg.popover.querySelectorAll("input");Q[0].value=L.innerText,Q[1].focus()}j=!1,y.classList.add("vditor-menu--current")}else if(A==="table"){var ee='<table data-block="0"><thead><tr><th>col1<wbr></th><th>col2</th><th>col3</th></tr></thead><tbody><tr><td> </td><td> </td><td> </td></tr><tr><td> </td><td> </td><td> </td></tr></tbody></table>';if(O.toString().trim()==="")P&&P.innerHTML.trim().replace(c.a.ZWSP,"")===""?P.outerHTML=ee:document.execCommand("insertHTML",!1,ee),O.selectNode(m.wysiwyg.element.querySelector("wbr").previousSibling),m.wysiwyg.element.querySelector("wbr").remove(),Object(E.h)(O);else{ee='<table data-block="0"><thead><tr>';var Y=O.toString().split(`
`),K=Y[0].split(",").length>Y[0].split("	").length?",":"	";Y.forEach(function(ge,ke){ke===0?(ge.split(K).forEach(function(he,Ae){ee+=Ae===0?"<th>"+he+"<wbr></th>":"<th>"+he+"</th>"}),ee+="</tr></thead>"):(ee+=ke===1?"<tbody><tr>":"<tr>",ge.split(K).forEach(function(he){ee+="<td>"+he+"</td>"}),ee+="</tr>")}),ee+="</tbody></table>",document.execCommand("insertHTML",!1,ee),Object(E.f)(m.wysiwyg.element,O)}j=!1,y.classList.add("vditor-menu--disabled")}else if(A==="line"){if(P){var oe=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;P.innerHTML.trim()===""?P.outerHTML=oe:P.insertAdjacentHTML("afterend",oe),Object(E.f)(m.wysiwyg.element,O)}}else if(j=!1,y.classList.add("vditor-menu--current"),A==="strike"&&(A="strikeThrough"),O.toString()!==""||A!=="bold"&&A!=="italic"&&A!=="strikeThrough")document.execCommand(A,!1,"");else{var Ce="strong";A==="italic"?Ce="em":A==="strikeThrough"&&(Ce="s"),(L=document.createElement(Ce)).textContent=c.a.ZWSP,O.insertNode(L),L.previousSibling&&L.previousSibling.textContent===c.a.ZWSP&&(L.previousSibling.textContent=""),O.setStart(L.firstChild,1),O.collapse(!0),Object(E.h)(O)}}j&&Re(m),I&&me(m)}}(e,o.element.children[0],h):e.currentMode==="ir"?In(e,o.element.children[0],t.prefix||"",t.suffix||""):Mn(e,o.element.children[0],t.prefix||"",t.suffix||""))})},_n=(l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var r in o)o.hasOwnProperty(r)&&(n[r]=o[r])})(e,t)},function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}),Pe=function(e,t,n){var o;if(typeof n!="string"?(B(e,["subToolbar","hint"]),n.preventDefault(),o=p(e)):o=n,e.currentMode!==t||typeof n=="string"){if(e.devtools&&e.devtools.renderEchart(e),e.options.preview.mode==="both"&&t==="sv"?e.preview.element.style.display="block":e.preview.element.style.display="none",S(e.toolbar.elements,c.a.EDIT_TOOLBARS),C(e.toolbar.elements,c.a.EDIT_TOOLBARS),w(e.toolbar.elements,["outdent","indent"]),t==="ir")M(e.toolbar.elements,["both"]),R(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="block",e.lute.SetVditorIR(!0),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!1),e.currentMode="ir",e.ir.element.innerHTML=e.lute.Md2VditorIRDOM(o),De(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),je(e),e.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(i){ie(i,e)}),e.ir.element.querySelectorAll(".vditor-toc").forEach(function(i){Object(Ne.a)(i,{cdn:e.options.cdn,math:e.options.preview.math})});else if(t==="wysiwyg")M(e.toolbar.elements,["both"]),R(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.sv.element.style.display="none",e.wysiwyg.element.parentElement.style.display="block",e.ir.element.parentElement.style.display="none",e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!0),e.lute.SetVditorSV(!1),e.currentMode="wysiwyg",je(e),Pt(e,o,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),e.wysiwyg.element.querySelectorAll(".vditor-toc").forEach(function(i){Object(Ne.a)(i,{cdn:e.options.cdn,math:e.options.preview.math})}),e.wysiwyg.popover.style.display="none";else if(t==="sv"){R(e.toolbar.elements,["both"]),M(e.toolbar.elements,["outdent","indent","outline","insert-before","insert-after"]),e.wysiwyg.element.parentElement.style.display="none",e.ir.element.parentElement.style.display="none",(e.options.preview.mode==="both"||e.options.preview.mode==="editor")&&(e.sv.element.style.display="block"),e.lute.SetVditorIR(!1),e.lute.SetVditorWYSIWYG(!1),e.lute.SetVditorSV(!0),e.currentMode="sv";var r=Vt(o,e);r==="<div data-block='0'></div>"&&(r=""),e.sv.element.innerHTML=r,we(e,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),je(e)}e.undo.resetIcon(e),typeof n!="string"&&(e[e.currentMode].element.focus(),Ve(e)),z(e),ot(e),e.toolbar.elements["edit-mode"]&&(e.toolbar.elements["edit-mode"].querySelectorAll("button").forEach(function(i){i.classList.remove("vditor-menu--current")}),e.toolbar.elements["edit-mode"].querySelector('button[data-mode="'+e.currentMode+'"]').classList.add("vditor-menu--current")),e.outline.toggle(e,e.currentMode!=="sv"&&e.options.outline.enable)}},Sn=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=document.createElement("div");return i.className="vditor-hint"+(o.level===2?"":" vditor-panel--arrow"),i.innerHTML='<button data-mode="wysiwyg">'+Z.a[n.options.lang].wysiwyg+" &lt;"+Object(b.g)("\u2318-\u2325-7")+`></button>
<button data-mode="ir">`+Z.a[n.options.lang].instantRendering+" &lt;"+Object(b.g)("\u2318-\u2325-8")+`></button>
<button data-mode="sv">`+Z.a[n.options.lang].splitView+" &lt;"+Object(b.g)("\u2318-\u2325-9")+"></button>",r.element.appendChild(i),r._bindEvent(n,i,o),r}return _n(t,e),t.prototype._bindEvent=function(n,o,r){var i=this.element.children[0];F(n,o,i,r.level),o.children.item(0).addEventListener(Object(b.b)(),function(a){Pe(n,"wysiwyg",a),a.preventDefault(),a.stopPropagation()}),o.children.item(1).addEventListener(Object(b.b)(),function(a){Pe(n,"ir",a),a.preventDefault(),a.stopPropagation()}),o.children.item(2).addEventListener(Object(b.b)(),function(a){Pe(n,"sv",a),a.preventDefault(),a.stopPropagation()})},t}(ve),Bt=function(e){switch(e.currentMode){case"ir":return e.ir.element;case"wysiwyg":return e.wysiwyg.element;case"sv":return e.sv.element}},qt=function(e,t){e.options.upload.setHeaders&&(e.options.upload.headers=e.options.upload.setHeaders()),e.options.upload.headers&&Object.keys(e.options.upload.headers).forEach(function(n){t.setRequestHeader(n,e.options.upload.headers[n])})},Cn=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(m){try{h(o.next(m))}catch(y){i(y)}}function d(m){try{h(o.throw(m))}catch(y){i(y)}}function h(m){var y;m.done?r(m.value):(y=m.value,y instanceof n?y:new n(function(T){T(y)})).then(a,d)}h((o=o.apply(e,t||[])).next())})},On=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function d(h){return function(m){return function(y){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&y[0]?o.return:y[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,y[1])).done)return r;switch(o=0,r&&(y=[2&y[0],r.value]),y[0]){case 0:case 1:r=y;break;case 4:return a.label++,{value:y[1],done:!1};case 5:a.label++,o=y[1],y=[0];continue;case 7:y=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||y[0]!==6&&y[0]!==2)){a=0;continue}if(y[0]===3&&(!r||y[1]>r[0]&&y[1]<r[3])){a.label=y[1];break}if(y[0]===6&&a.label<r[1]){a.label=r[1],r=y;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(y);break}r[2]&&a.ops.pop(),a.trys.pop();continue}y=t.call(e,a)}catch(T){y=[6,T],o=0}finally{n=r=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([h,m])}}},Tn=function(){this.isUploading=!1,this.element=document.createElement("div"),this.element.className="vditor-upload"},at=function(e,t,n){return Cn(void 0,void 0,void 0,function(){var o,r,i,a,d,h,m,y,T,j,I,O,A,V;return On(this,function(N){switch(N.label){case 0:for(o=[],r=e.options.upload.multiple===!0?t.length:1,O=0;O<r;O++)(i=t[O])instanceof DataTransferItem&&(i=i.getAsFile()),o.push(i);return e.options.upload.handler?typeof(a=e.options.upload.handler(o))=="string"?(e.tip.show(a),[2]):[2]:e.options.upload.url&&e.upload?e.options.upload.file?[4,e.options.upload.file(o)]:[3,2]:(n&&(n.value=""),e.tip.show("please config: options.upload.url"),[2]);case 1:o=N.sent(),N.label=2;case 2:if(e.options.upload.validate&&typeof(a=e.options.upload.validate(o))=="string")return e.tip.show(a),[2];if(d=Bt(e),e.upload.range=Object(E.b)(d),(h=function(P,D){P.tip.hide();for(var L=[],q="",J="",Q=P.options.lang,ee=function(oe,Ce){var ge=D[Ce],ke=!0;ge.name||(q+="<li>"+Z.a[Q].nameEmpty+"</li>",ke=!1),ge.size>P.options.upload.max&&(q+="<li>"+ge.name+" "+Z.a[Q].over+" "+P.options.upload.max/1024/1024+"M</li>",ke=!1);var he=ge.name.lastIndexOf("."),Ae=ge.name.substr(he),Te=P.options.upload.filename(ge.name.substr(0,he))+Ae;P.options.upload.accept&&(P.options.upload.accept.split(",").some(function(Be){var _e=Be.trim();if(_e.indexOf(".")===0){if(Ae.toLowerCase()===_e.toLowerCase())return!0}else if(ge.type.split("/")[0]===_e.split("/")[0])return!0;return!1})||(q+="<li>"+ge.name+" "+Z.a[Q].fileTypeError+"</li>",ke=!1)),ke&&(L.push(ge),J+="<li>"+Te+" "+Z.a[Q].uploading+"</li>")},Y=D.length,K=0;K<Y;K++)ee(0,K);return P.tip.show("<ul>"+q+J+"</ul>"),L}(e,o)).length===0)return n&&(n.value=""),[2];for(m=new FormData,y=e.options.upload.extraData,T=0,j=Object.keys(y);T<j.length;T++)I=j[T],m.append(I,y[I]);for(O=0,A=h.length;O<A;O++)m.append(e.options.upload.fieldName,h[O]);return(V=new XMLHttpRequest).open("POST",e.options.upload.url),e.options.upload.token&&V.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(V.withCredentials=!0),qt(e,V),e.upload.isUploading=!0,d.setAttribute("contenteditable","false"),V.onreadystatechange=function(){if(V.readyState===XMLHttpRequest.DONE){if(e.upload.isUploading=!1,d.setAttribute("contenteditable","true"),V.status>=200&&V.status<300)if(e.options.upload.success)e.options.upload.success(d,V.responseText);else{var P=V.responseText;e.options.upload.format&&(P=e.options.upload.format(t,V.responseText)),function(D,L){Bt(L).focus();var q=JSON.parse(D),J="";q.code===1&&(J=""+q.msg),q.data.errFiles&&q.data.errFiles.length>0&&(J="<ul><li>"+J+"</li>",q.data.errFiles.forEach(function(ee){var Y=ee.lastIndexOf("."),K=L.options.upload.filename(ee.substr(0,Y))+ee.substr(Y);J+="<li>"+K+" "+Z.a[L.options.lang].uploadError+"</li>"}),J+="</ul>"),J?L.tip.show(J):L.tip.hide();var Q="";Object.keys(q.data.succMap).forEach(function(ee){var Y=q.data.succMap[ee],K=ee.lastIndexOf("."),oe=ee.substr(K),Ce=L.options.upload.filename(ee.substr(0,K))+oe;(oe=oe.toLowerCase()).indexOf(".wav")===0||oe.indexOf(".mp3")===0||oe.indexOf(".ogg")===0?L.currentMode==="wysiwyg"?Q+=`<div class="vditor-wysiwyg__block" data-type="html-block"
 data-block="0"><pre><code>&lt;audio controls="controls" src="`+Y+'"&gt;&lt;/audio&gt;</code></pre>':L.currentMode==="ir"?Q+='<audio controls="controls" src="'+Y+`"></audio>
`:Q+="["+Ce+"]("+Y+`)
`:oe.indexOf(".apng")===0||oe.indexOf(".bmp")===0||oe.indexOf(".gif")===0||oe.indexOf(".ico")===0||oe.indexOf(".cur")===0||oe.indexOf(".jpg")===0||oe.indexOf(".jpeg")===0||oe.indexOf(".jfif")===0||oe.indexOf(".pjp")===0||oe.indexOf(".pjpeg")===0||oe.indexOf(".png")===0||oe.indexOf(".svg")===0||oe.indexOf(".webp")===0?L.currentMode==="wysiwyg"?Q+='<img alt="'+Ce+'" src="'+Y+'">':Q+="!["+Ce+"]("+Y+`)
`:L.currentMode==="wysiwyg"?Q+='<a href="'+Y+'">'+Ce+"</a>":Q+="["+Ce+"]("+Y+`)
`}),Object(E.h)(L.upload.range),document.execCommand("insertHTML",!1,Q),L.upload.range=getSelection().getRangeAt(0).cloneRange()}(P,e)}else e.options.upload.error?e.options.upload.error(V.responseText):e.tip.show(V.responseText);n&&(n.value=""),e.upload.element.style.display="none"}},V.upload.onprogress=function(P){if(P.lengthComputable){var D=P.loaded/P.total*100;e.upload.element.style.display="block",e.upload.element.style.width=D+"%"}},V.send(m),[2]}})})},Qe=function(e,t){return Object(E.e)(e,t)?getSelection().toString():""},bt=function(e,t){t.addEventListener("focus",function(){e.options.focus&&e.options.focus(p(e)),B(e,["subToolbar"])})},Ut=function(e,t){t.addEventListener("dblclick",function(n){n.target.tagName==="IMG"&&Object(pe.a)(n.target,e.options.lang,e.options.theme)})},yt=function(e,t){t.addEventListener("blur",function(n){if(e.currentMode==="ir"){var o=e.ir.element.querySelector(".vditor-ir__node--expand");o&&o.classList.remove("vditor-ir__node--expand")}else e.currentMode!=="wysiwyg"||e.wysiwyg.selectPopover.contains(n.relatedTarget)||e.wysiwyg.hideComment();e.options.blur&&e.options.blur(p(e))})},wt=function(e,t){(e.options.upload.url||e.options.upload.handler)&&t.addEventListener("drop",function(n){if(n.dataTransfer.types[0]==="Files"){var o=n.dataTransfer.items;o.length>0&&at(e,o),n.preventDefault()}})},kt=function(e,t,n){t.addEventListener("copy",function(o){return n(o,e)})},Et=function(e,t,n){t.addEventListener("cut",function(o){n(o,e),e.options.comment.enable&&e.currentMode==="wysiwyg"&&e.wysiwyg.getComments(e),document.execCommand("delete")})},be=function(e){if(e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)),e.options.typewriterMode){var t=e[e.currentMode].element,n=Object(E.a)(t).top;typeof e.options.height!="string"||e.element.classList.contains("vditor--fullscreen")||window.scrollTo(window.scrollX,n+e.element.offsetTop+e.toolbar.element.offsetHeight-window.innerHeight/2+10),(typeof e.options.height=="number"||e.element.classList.contains("vditor--fullscreen"))&&(t.scrollTop=n+t.scrollTop-t.clientHeight/2+10)}},xt=function(e,t){t.addEventListener("keydown",function(n){if(!(e.options.hint.extend.length>1||e.toolbar.elements.emoji)||!e.hint.select(n,e)){if(e.options.comment.enable&&e.currentMode==="wysiwyg"&&(n.key==="Backspace"||X("\u2318-X",n))&&e.wysiwyg.getComments(e),e.currentMode==="sv"){if(function(r,i){var a,d,h,m,y;if(r.sv.composingLock=i.isComposing,i.isComposing||(i.key.indexOf("Arrow")!==-1||i.key==="Meta"||i.key==="Control"||i.key==="Alt"||i.key==="Shift"||i.key==="CapsLock"||i.key==="Escape"||/^F\d{1,2}$/.test(i.key)||r.undo.recordFirstPosition(r,i),i.key!=="Enter"&&i.key!=="Tab"&&i.key!=="Backspace"&&i.key.indexOf("Arrow")===-1&&!Object(b.d)(i)&&i.key!=="Escape"))return!1;var T=Object(E.b)(r.sv.element),j=T.startContainer;T.startContainer.nodeType!==3&&T.startContainer.tagName==="DIV"&&(j=T.startContainer.childNodes[T.startOffset-1]);var I=Object(x.d)(j,"data-type","text"),O=Object(x.d)(j,"data-type","blockquote-marker");if(!O&&T.startOffset===0&&I&&I.previousElementSibling&&I.previousElementSibling.getAttribute("data-type")==="blockquote-marker"&&(O=I.previousElementSibling),O&&i.key==="Enter"&&!Object(b.d)(i)&&!i.altKey&&O.nextElementSibling.textContent.trim()===""&&Object(E.c)(O,r.sv.element,T).start===O.textContent.length)return((a=O.previousElementSibling)===null||a===void 0?void 0:a.getAttribute("data-type"))==="padding"&&O.previousElementSibling.setAttribute("data-action","enter-remove"),O.remove(),we(r),i.preventDefault(),!0;var A=Object(x.d)(j,"data-type","li-marker"),V=Object(x.d)(j,"data-type","task-marker"),N=A;if(N||V&&V.nextElementSibling.getAttribute("data-type")!=="task-marker"&&(N=V),N||T.startOffset!==0||!I||!I.previousElementSibling||I.previousElementSibling.getAttribute("data-type")!=="li-marker"&&I.previousElementSibling.getAttribute("data-type")!=="task-marker"||(N=I.previousElementSibling),N){var P=Object(E.c)(N,r.sv.element,T).start,D=N.getAttribute("data-type")==="task-marker",L=N;if(D&&(L=N.previousElementSibling.previousElementSibling.previousElementSibling),P===N.textContent.length){if(i.key==="Enter"&&!Object(b.d)(i)&&!i.altKey&&!i.shiftKey&&N.nextElementSibling.textContent.trim()==="")return((d=L.previousElementSibling)===null||d===void 0?void 0:d.getAttribute("data-type"))==="padding"?(L.previousElementSibling.remove(),te(r)):(D&&(L.remove(),N.previousElementSibling.previousElementSibling.remove(),N.previousElementSibling.remove()),N.nextElementSibling.remove(),N.remove(),we(r)),i.preventDefault(),!0;if(i.key==="Tab")return L.insertAdjacentHTML("beforebegin",'<span data-type="padding">'+L.textContent.replace(/\S/g," ")+"</span>"),/^\d/.test(L.textContent)&&(L.textContent=L.textContent.replace(/^\d{1,}/,"1"),T.selectNodeContents(N.firstChild),T.collapse(!1)),te(r),i.preventDefault(),!0}}if(Tt(r,T,i))return!0;var q=Object(x.d)(j,"data-block","0"),J=Object($.b)(j,"SPAN");if(i.key==="Enter"&&!Object(b.d)(i)&&!i.altKey&&!i.shiftKey&&q){var Q=!1,ee=q.textContent.match(/^\n+/);Object(E.c)(q,r.sv.element).start<=(ee?ee[0].length:0)&&(Q=!0);var Y=`
`;if(J){if(((h=J.previousElementSibling)===null||h===void 0?void 0:h.getAttribute("data-action"))==="enter-remove")return J.previousElementSibling.remove(),we(r),i.preventDefault(),!0;Y+=Ln(J)}return T.insertNode(document.createTextNode(Y)),T.collapse(!1),q&&q.textContent.trim()!==""&&!Q?te(r):we(r),i.preventDefault(),!0}if(i.key==="Backspace"&&!Object(b.d)(i)&&!i.altKey&&!i.shiftKey){if(J&&((m=J.previousElementSibling)===null||m===void 0?void 0:m.getAttribute("data-type"))==="newline"&&Object(E.c)(J,r.sv.element,T).start===1&&J.getAttribute("data-type").indexOf("code-block-")===-1)return T.setStart(J,0),T.extractContents(),J.textContent.trim()!==""?te(r):we(r),i.preventDefault(),!0;if(q&&Object(E.c)(q,r.sv.element,T).start===0&&q.previousElementSibling){T.extractContents();var K=q.previousElementSibling.lastElementChild;return K.getAttribute("data-type")==="newline"&&(K.remove(),K=q.previousElementSibling.lastElementChild),K.getAttribute("data-type")!=="newline"&&(K.insertAdjacentHTML("afterend",q.innerHTML),q.remove()),q.textContent.trim()===""||((y=q.previousElementSibling)===null||y===void 0?void 0:y.querySelector('[data-type="code-block-open-marker"]'))?(K.getAttribute("data-type")!=="newline"&&(T.selectNodeContents(K.lastChild),T.collapse(!1)),we(r)):te(r),i.preventDefault(),!0}}return!1}(e,n))return}else if(e.currentMode==="wysiwyg"){if(function(r,i){if(r.wysiwyg.composingLock=i.isComposing,i.isComposing)return!1;i.key.indexOf("Arrow")!==-1||i.key==="Meta"||i.key==="Control"||i.key==="Alt"||i.key==="Shift"||i.key==="CapsLock"||i.key==="Escape"||/^F\d{1,2}$/.test(i.key)||r.undo.recordFirstPosition(r,i);var a=Object(E.b)(r.wysiwyg.element),d=a.startContainer;if(!Kt(i,r,d)||(Ft(a,r,i),sn(a),i.key!=="Enter"&&i.key!=="Tab"&&i.key!=="Backspace"&&i.key.indexOf("Arrow")===-1&&!Object(b.d)(i)&&i.key!=="Escape"&&i.key!=="Delete"))return!1;var h=Object(x.c)(d),m=Object(x.f)(d,"P");if(Yt(i,r,m,a)||Xt(a,r,m,i)||nn(r,i,a))return!0;var y=Object(x.e)(d,"vditor-wysiwyg__block");if(y){if(i.key==="Escape"&&y.children.length===2)return r.wysiwyg.popover.style.display="none",y.firstElementChild.style.display="none",r.wysiwyg.element.blur(),i.preventDefault(),!0;if(!Object(b.d)(i)&&!i.shiftKey&&i.altKey&&i.key==="Enter"&&y.getAttribute("data-type")==="code-block"){var T=r.wysiwyg.popover.querySelector(".vditor-input");return T.focus(),T.select(),i.preventDefault(),!0}if(y.getAttribute("data-block")==="0"&&(rn(r,i,y.firstElementChild,a)||et(r,i,a,y.firstElementChild,y)||y.getAttribute("data-type")!=="yaml-front-matter"&&We(r,i,a,y.firstElementChild,y)))return!0}if(on(r,a,i,m))return!0;var j=Object(x.h)(d,"BLOCKQUOTE");if(j&&!i.shiftKey&&i.altKey&&i.key==="Enter"){Object(b.d)(i)?a.setStartBefore(j):a.setStartAfter(j),Object(E.h)(a);var I=document.createElement("p");return I.setAttribute("data-block","0"),I.innerHTML=`
`,a.insertNode(I),a.collapse(!0),Object(E.h)(a),me(r),be(r),i.preventDefault(),!0}var O,A=Object($.a)(d);if(A){if(A.tagName==="H6"&&d.textContent.length===a.startOffset&&!Object(b.d)(i)&&!i.shiftKey&&!i.altKey&&i.key==="Enter"){var V=document.createElement("p");return V.textContent=`
`,V.setAttribute("data-block","0"),d.parentElement.insertAdjacentElement("afterend",V),a.setStart(V,0),Object(E.h)(a),me(r),be(r),i.preventDefault(),!0}var N;if(X("\u2318-=",i))return(N=parseInt(A.tagName.substr(1),10)-1)>0&&(it(r,"h"+N),me(r)),i.preventDefault(),!0;if(X("\u2318--",i))return(N=parseInt(A.tagName.substr(1),10)+1)<7&&(it(r,"h"+N),me(r)),i.preventDefault(),!0;i.key!=="Backspace"||Object(b.d)(i)||i.shiftKey||i.altKey||A.textContent!==""||ht(r)}if(an(r,a,i))return!0;if(i.altKey&&i.key==="Enter"&&!Object(b.d)(i)&&!i.shiftKey){var P=Object(x.f)(d,"A"),D=Object(x.d)(d,"data-type","link-ref"),L=Object(x.d)(d,"data-type","footnotes-ref");if(P||D||L||A&&A.tagName.length===2){var q=r.wysiwyg.popover.querySelector("input");q.focus(),q.select()}}if(Oe(r,i))return!0;if(X("\u2318-\u21E7-U",i)&&(O=r.wysiwyg.popover.querySelector('[data-type="up"]'))||X("\u2318-\u21E7-D",i)&&(O=r.wysiwyg.popover.querySelector('[data-type="down"]')))return O.click(),i.preventDefault(),!0;if(Tt(r,a,i))return!0;if(!Object(b.d)(i)&&i.shiftKey&&!i.altKey&&i.key==="Enter"&&d.parentElement.tagName!=="LI"&&d.parentElement.tagName!=="P")return["STRONG","S","STRONG","I","EM","B"].includes(d.parentElement.tagName)?a.insertNode(document.createTextNode(`
`+c.a.ZWSP)):a.insertNode(document.createTextNode(`
`)),a.collapse(!1),Object(E.h)(a),me(r),be(r),i.preventDefault(),!0;if(i.key==="Backspace"&&!Object(b.d)(i)&&!i.shiftKey&&!i.altKey&&a.toString()===""){if(ln(r,a,i,m))return!0;if(h){if(h.previousElementSibling&&h.previousElementSibling.classList.contains("vditor-wysiwyg__block")&&h.previousElementSibling.getAttribute("data-block")==="0"){var J=Object(E.c)(h,r.wysiwyg.element,a).start;if(J===0&&a.startOffset===0||J===1&&h.innerText.startsWith(c.a.ZWSP))return Ye(h.previousElementSibling.lastElementChild,r,!1),h.innerHTML.trim().replace(c.a.ZWSP,"")===""&&(h.remove(),me(r)),i.preventDefault(),!0}var Q=a.startOffset;if(a.toString()===""&&d.nodeType===3&&d.textContent.charAt(Q-2)===`
`&&d.textContent.charAt(Q-1)!==c.a.ZWSP&&["STRONG","S","STRONG","I","EM","B"].includes(d.parentElement.tagName))return d.textContent=d.textContent.substring(0,Q-1)+c.a.ZWSP,a.setStart(d,Q),a.collapse(!0),me(r),i.preventDefault(),!0;d.textContent===c.a.ZWSP&&a.startOffset===1&&!d.previousSibling&&function(Y){for(var K=Y.startContainer.nextSibling;K&&K.textContent==="";)K=K.nextSibling;return!(!K||K.nodeType===3||K.tagName!=="CODE"&&K.getAttribute("data-type")!=="math-inline"&&K.getAttribute("data-type")!=="html-entity"&&K.getAttribute("data-type")!=="html-inline")}(a)&&(d.textContent=""),h.querySelectorAll("span.vditor-wysiwyg__block[data-type='math-inline']").forEach(function(Y){Y.firstElementChild.style.display="inline",Y.lastElementChild.style.display="none"}),h.querySelectorAll("span.vditor-wysiwyg__block[data-type='html-entity']").forEach(function(Y){Y.firstElementChild.style.display="inline",Y.lastElementChild.style.display="none"})}}if(Object(b.e)()&&a.startOffset===1&&d.textContent.indexOf(c.a.ZWSP)>-1&&d.previousSibling&&d.previousSibling.nodeType!==3&&d.previousSibling.tagName==="CODE"&&(i.key==="Backspace"||i.key==="ArrowLeft"))return a.selectNodeContents(d.previousSibling),a.collapse(!1),i.preventDefault(),!0;if(cn(i,h,a))return i.preventDefault(),!0;if(Gt(a,i.key),i.key==="ArrowDown"){var ee=d.nextSibling;ee&&ee.nodeType!==3&&ee.getAttribute("data-type")==="math-inline"&&a.setStartAfter(ee)}return!(!h||!Se(h,r,i,a))&&(i.preventDefault(),!0)}(e,n))return}else if(e.currentMode==="ir"&&function(r,i){if(r.ir.composingLock=i.isComposing,i.isComposing)return!1;i.key.indexOf("Arrow")!==-1||i.key==="Meta"||i.key==="Control"||i.key==="Alt"||i.key==="Shift"||i.key==="CapsLock"||i.key==="Escape"||/^F\d{1,2}$/.test(i.key)||r.undo.recordFirstPosition(r,i);var a=Object(E.b)(r.ir.element),d=a.startContainer;if(!Kt(i,r,d)||(Ft(a,r,i),sn(a),i.key!=="Enter"&&i.key!=="Tab"&&i.key!=="Backspace"&&i.key.indexOf("Arrow")===-1&&!Object(b.d)(i)&&i.key!=="Escape"&&i.key!=="Delete"))return!1;var h=Object(x.d)(d,"data-newline","1");if(!Object(b.d)(i)&&!i.altKey&&!i.shiftKey&&i.key==="Enter"&&h&&a.startOffset<h.textContent.length){var m=h.previousElementSibling;m&&(a.insertNode(document.createTextNode(m.textContent)),a.collapse(!1));var y=h.nextSibling;y&&(a.insertNode(document.createTextNode(y.textContent)),a.collapse(!0))}var T=Object(x.f)(d,"P");if(Yt(i,r,T,a)||Xt(a,r,T,i)||on(r,a,i,T))return!0;var j=Object(x.e)(d,"vditor-ir__marker--pre");if(j&&j.tagName==="PRE"){var I=j.firstChild;if(rn(r,i,j,a)||(I.getAttribute("data-type")==="math-block"||I.getAttribute("data-type")==="html-block")&&We(r,i,a,I,j.parentElement)||et(r,i,a,I,j.parentElement))return!0}var O=Object(x.d)(d,"data-type","code-block-info");if(O){if(i.key==="Enter"||i.key==="Tab")return a.selectNodeContents(O.nextElementSibling.firstChild),a.collapse(!0),i.preventDefault(),B(r,["hint"]),!0;if(i.key==="Backspace"){var A=Object(E.c)(O,r.ir.element).start;A===1&&a.setStart(d,0),A===2&&(r.hint.recentLanguage="")}if(We(r,i,a,O,O.parentElement))return B(r,["hint"]),!0}var V=Object(x.f)(d,"TD")||Object(x.f)(d,"TH");if(i.key.indexOf("Arrow")>-1&&V){var N=Nn(V);if(N&&We(r,i,a,V,N))return!0;var P=Dn(V);if(P&&et(r,i,a,V,P))return!0}if(nn(r,i,a)||an(r,a,i)||Tt(r,a,i))return!0;var D=Object($.a)(d);if(D){var L;if(X("\u2318-=",i))return(L=D.querySelector(".vditor-ir__marker--heading"))&&L.textContent.trim().length>1&&tt(r,L.textContent.substr(1)),i.preventDefault(),!0;if(X("\u2318--",i))return(L=D.querySelector(".vditor-ir__marker--heading"))&&L.textContent.trim().length<6&&tt(r,L.textContent.trim()+"# "),i.preventDefault(),!0}var q=Object(x.c)(d);if(i.key==="Backspace"&&!Object(b.d)(i)&&!i.shiftKey&&!i.altKey&&a.toString()===""){if(ln(r,a,i,T))return!0;if(q&&q.previousElementSibling&&(q.previousElementSibling.getAttribute("data-type")==="code-block"||q.previousElementSibling.getAttribute("data-type")==="math-block")){var J=Object(E.c)(q,r.ir.element,a).start;if(J===0||J===1&&q.innerText.startsWith(c.a.ZWSP))return a.selectNodeContents(q.previousElementSibling.querySelector(".vditor-ir__marker--pre code")),a.collapse(!1),fe(a,r),q.textContent.trim().replace(c.a.ZWSP,"")===""&&(q.remove(),De(r)),i.preventDefault(),!0}if(D){var Q=D.firstElementChild.textContent.length;Object(E.c)(D,r.ir.element).start===Q&&(a.setStart(D.firstElementChild.firstChild,Q-1),a.collapse(!0),Object(E.h)(a))}}return!(i.key!=="ArrowUp"&&i.key!=="ArrowDown"||!q||(q.querySelectorAll(".vditor-ir__node").forEach(function(ee){ee.contains(d)||ee.classList.add("vditor-ir__node--hidden")}),!cn(i,q,a)))||(Gt(a,i.key),!(!q||!Se(q,r,i,a))&&(i.preventDefault(),!0))}(e,n))return;if(e.options.ctrlEnter&&X("\u2318-Enter",n))return e.options.ctrlEnter(p(e)),void n.preventDefault();if(X("\u2318-Z",n)&&!e.toolbar.elements.undo)return e.undo.undo(e),void n.preventDefault();if(X("\u2318-Y",n)&&!e.toolbar.elements.redo)return e.undo.redo(e),void n.preventDefault();if(n.key==="Escape")return e.hint.element.style.display==="block"?e.hint.element.style.display="none":e.options.esc&&!n.isComposing&&e.options.esc(p(e)),void n.preventDefault();if(Object(b.d)(n)&&n.altKey&&!n.shiftKey&&/^Digit[1-6]$/.test(n.code)){if(e.currentMode==="wysiwyg"){var o=n.code.replace("Digit","H");Object(x.f)(getSelection().getRangeAt(0).startContainer,o)?ht(e):it(e,o),me(e)}else e.currentMode==="sv"?Wt(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" "):e.currentMode==="ir"&&tt(e,"#".repeat(parseInt(n.code.replace("Digit",""),10))+" ");return n.preventDefault(),!0}if(Object(b.d)(n)&&n.altKey&&!n.shiftKey&&/^Digit[7-9]$/.test(n.code))return n.code==="Digit7"?Pe(e,"wysiwyg",n):n.code==="Digit8"?Pe(e,"ir",n):n.code==="Digit9"&&Pe(e,"sv",n),!0;e.options.toolbar.find(function(r){return!r.hotkey||r.toolbar?!!r.toolbar&&!!r.toolbar.find(function(i){return!!i.hotkey&&(X(i.hotkey,n)?(e.toolbar.elements[i.name].children[0].dispatchEvent(new CustomEvent(Object(b.b)())),n.preventDefault(),!0):void 0)}):X(r.hotkey,n)?(e.toolbar.elements[r.name].children[0].dispatchEvent(new CustomEvent(Object(b.b)())),n.preventDefault(),!0):void 0})}})},_t=function(e,t){t.addEventListener("selectstart",function(n){t.onmouseup=function(){setTimeout(function(){var o=Qe(e[e.currentMode].element);o.trim()?(e.currentMode==="wysiwyg"&&e.options.comment.enable&&(Object(x.d)(n.target,"data-type","footnotes-block")||Object(x.d)(n.target,"data-type","link-ref-defs-block")?e.wysiwyg.hideComment():e.wysiwyg.showComment()),e.options.select&&e.options.select(o)):e.currentMode==="wysiwyg"&&e.options.comment.enable&&e.wysiwyg.hideComment()})}})},zt=function(e,t){var n=Object(E.b)(e.sv.element);n.extractContents(),n.insertNode(document.createTextNode(Lute.Caret)),n.insertNode(document.createTextNode(t));var o=Object(x.d)(n.startContainer,"data-block","0");o||(o=e.sv.element);var r="<div data-block='0'>"+e.lute.Md2VditorSVDOM(o.textContent).replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>";o.isEqualNode(e.sv.element)?o.innerHTML=r:o.outerHTML=r,Object(E.f)(e.sv.element,n),be(e)},lt=function(e,t,n){n===void 0&&(n=!0);var o=e;for(o.nodeType===3&&(o=o.parentElement);o;){if(o.getAttribute("data-type")===t)return o;o=n?o.previousElementSibling:o.nextElementSibling}return!1},Vt=function(e,t){return ne("SpinVditorSVDOM",e,"argument",t.options.debugger),e="<div data-block='0'>"+t.lute.SpinVditorSVDOM(e).replace(/<span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span><span data-type="newline"><br \/><span style="display: none">\n<\/span><\/span></g,`<span data-type="newline"><br /><span style="display: none">
</span></span><span data-type="newline"><br /><span style="display: none">
</span></span></div><div data-block="0"><`)+"</div>",ne("SpinVditorSVDOM",e,"result",t.options.debugger),e},Ln=function(e){var t=e.getAttribute("data-type"),n=e.previousElementSibling,o=t&&t!=="text"&&t!=="table"&&t!=="heading-marker"&&t!=="newline"&&t!=="yaml-front-matter-open-marker"&&t!=="yaml-front-matter-close-marker"&&t!=="code-block-info"&&t!=="code-block-close-marker"&&t!=="code-block-open-marker"?e.textContent:"",r=!1;for(t==="newline"&&(r=!0);n&&!r;){var i=n.getAttribute("data-type");if(i==="li-marker"||i==="blockquote-marker"||i==="task-marker"||i==="padding"){var a=n.textContent;if(i!=="li-marker"||t!=="code-block-open-marker"&&t!=="code-block-info")if(t==="code-block-close-marker"&&n.nextElementSibling.isSameNode(e)){var d=lt(e,"code-block-open-marker");d&&d.previousElementSibling&&(n=d.previousElementSibling,o=a+o)}else o=a+o;else o=a.replace(/\S/g," ")+o}else i==="newline"&&(r=!0);n=n.previousElementSibling}return o},we=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&e.hint.render(e),e.preview.render(e);var n=p(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&Object(b.a)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),clearTimeout(e.sv.processTimeoutId),e.sv.processTimeoutId=window.setTimeout(function(){t.enableAddUndoStack&&!e.sv.composingLock&&e.undo.addToUndoStack(e)},e.options.undoDelay)},Wt=function(e,t){var n=Object(E.b)(e.sv.element),o=Object($.b)(n.startContainer,"SPAN");o&&o.textContent.trim()!==""&&(t=`
`+t),n.collapse(!0),document.execCommand("insertHTML",!1,t)},Mn=function(e,t,n,o){var r=Object(E.b)(e.sv.element),i=t.getAttribute("data-type");e.sv.element.childNodes.length===0&&(e.sv.element.innerHTML=`<span data-type="p" data-block="0"><span data-type="text"><wbr></span></span><span data-type="newline"><br><span style="display: none">
</span></span>`,Object(E.f)(e.sv.element,r));var a=Object(x.c)(r.startContainer),d=Object($.b)(r.startContainer,"SPAN");if(a){if(i==="link"){var h=void 0;return h=r.toString()===""?""+n+Lute.Caret+o:""+n+r.toString()+o.replace(")",Lute.Caret+")"),void document.execCommand("insertHTML",!1,h)}if(i==="italic"||i==="bold"||i==="strike"||i==="inline-code"||i==="code"||i==="table"||i==="line")return h=void 0,h=r.toString()===""?""+n+Lute.Caret+(i==="code"?"":o):""+n+r.toString()+Lute.Caret+(i==="code"?"":o),i==="table"||i==="code"&&d&&d.textContent!==""?h=`

`+h:i==="line"&&(h=`

`+n+`
`+Lute.Caret),void document.execCommand("insertHTML",!1,h);if((i==="check"||i==="list"||i==="ordered-list"||i==="quote")&&d){var m="* ";i==="check"?m="* [ ] ":i==="ordered-list"?m="1. ":i==="quote"&&(m="> ");var y=lt(d,"newline");return y?y.insertAdjacentText("afterend",m):a.insertAdjacentText("afterbegin",m),void te(e)}Object(E.f)(e.sv.element,r),we(e)}},st=function(e,t,n){var o,r=Object(x.c)(t.startContainer);if(r||(r=e.wysiwyg.element),n&&n.inputType!=="formatItalic"&&n.inputType!=="deleteByDrag"&&n.inputType!=="insertFromDrop"&&n.inputType!=="formatBold"&&n.inputType!=="formatRemove"&&n.inputType!=="formatStrikeThrough"&&n.inputType!=="insertUnorderedList"&&n.inputType!=="insertOrderedList"&&n.inputType!=="formatOutdent"&&n.inputType!=="formatIndent"&&n.inputType!==""||!n){var i=function(D){for(var L=D.previousSibling;L;){if(L.nodeType!==3&&L.tagName==="A"&&!L.previousSibling&&L.innerHTML.replace(c.a.ZWSP,"")===""&&L.nextSibling)return L;L=L.previousSibling}return!1}(t.startContainer);i&&i.remove(),e.wysiwyg.element.querySelectorAll("wbr").forEach(function(D){D.remove()}),t.insertNode(document.createElement("wbr")),r.querySelectorAll("[style]").forEach(function(D){D.removeAttribute("style")}),r.querySelectorAll(".vditor-comment").forEach(function(D){D.textContent.trim()===""&&(D.classList.remove("vditor-comment","vditor-comment--focus"),D.removeAttribute("data-cmtids"))}),(o=r.previousElementSibling)===null||o===void 0||o.querySelectorAll(".vditor-comment").forEach(function(D){D.textContent.trim()===""&&(D.classList.remove("vditor-comment","vditor-comment--focus"),D.removeAttribute("data-cmtids"))});var a="";r.getAttribute("data-type")==="link-ref-defs-block"&&(r=e.wysiwyg.element);var d,h=r.isEqualNode(e.wysiwyg.element),m=Object(x.d)(r,"data-type","footnotes-block");if(h)a=r.innerHTML;else{var y=Object(x.b)(t.startContainer);if(y&&!m){var T=Object($.b)(t.startContainer,"BLOCKQUOTE");r=T?Object(x.c)(t.startContainer)||r:y}if(m&&(r=m),a=r.outerHTML,r.tagName==="UL"||r.tagName==="OL"){var j=r.previousElementSibling,I=r.nextElementSibling;!j||j.tagName!=="UL"&&j.tagName!=="OL"||(a=j.outerHTML+a,j.remove()),!I||I.tagName!=="UL"&&I.tagName!=="OL"||(a+=I.outerHTML,I.remove()),a=a.replace("<div><wbr><br></div>","<li><p><wbr><br></p></li>")}e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']").forEach(function(D){D&&!r.isEqualNode(D)&&(a+=D.outerHTML,D.remove())}),e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']").forEach(function(D){D&&!r.isEqualNode(D)&&(a+=D.outerHTML,D.remove())})}if((a=a.replace(/<\/(strong|b)><strong data-marker="\W{2}">/g,"").replace(/<\/(em|i)><em data-marker="\W{1}">/g,"").replace(/<\/(s|strike)><s data-marker="~{1,2}">/g,""))==='<p data-block="0">```<wbr></p>'&&e.hint.recentLanguage&&(a='<p data-block="0">```<wbr></p>'.replace("```","```"+e.hint.recentLanguage)),ne("SpinVditorDOM",a,"argument",e.options.debugger),a=e.lute.SpinVditorDOM(a),ne("SpinVditorDOM",a,"result",e.options.debugger),h)r.innerHTML=a;else if(r.outerHTML=a,m){var O=Object(x.h)(e.wysiwyg.element.querySelector("wbr"),"LI");if(O){var A=e.wysiwyg.element.querySelector('sup[data-type="footnotes-ref"][data-footnotes-label="'+O.getAttribute("data-marker")+'"]');A&&A.setAttribute("aria-label",O.textContent.trim().substr(0,24))}}var V,N=e.wysiwyg.element.querySelectorAll("[data-type='link-ref-defs-block']");N.forEach(function(D,L){L===0?d=D:(d.insertAdjacentHTML("beforeend",D.innerHTML),D.remove())}),N.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",N[0]);var P=e.wysiwyg.element.querySelectorAll("[data-type='footnotes-block']");P.forEach(function(D,L){L===0?V=D:(V.insertAdjacentHTML("beforeend",D.innerHTML),D.remove())}),P.length>0&&e.wysiwyg.element.insertAdjacentElement("beforeend",P[0]),Object(E.f)(e.wysiwyg.element,t),e.wysiwyg.element.querySelectorAll(".vditor-wysiwyg__preview[data-render='2']").forEach(function(D){ie(D,e)}),n&&(n.inputType==="deleteContentBackward"||n.inputType==="deleteContentForward")&&e.options.comment.enable&&(e.wysiwyg.triggerRemoveComment(e),e.options.comment.adjustTop(e.wysiwyg.getComments(e,!0)))}z(e),me(e,{enableAddUndoStack:!0,enableHint:!0,enableInput:!0})},jn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},An=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(m){try{h(o.next(m))}catch(y){i(y)}}function d(m){try{h(o.throw(m))}catch(y){i(y)}}function h(m){var y;m.done?r(m.value):(y=m.value,y instanceof n?y:new n(function(T){T(y)})).then(a,d)}h((o=o.apply(e,t||[])).next())})},Hn=function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function d(h){return function(m){return function(y){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&y[0]?o.return:y[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,y[1])).done)return r;switch(o=0,r&&(y=[2&y[0],r.value]),y[0]){case 0:case 1:r=y;break;case 4:return a.label++,{value:y[1],done:!1};case 5:a.label++,o=y[1],y=[0];continue;case 7:y=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!((r=r.length>0&&r[r.length-1])||y[0]!==6&&y[0]!==2)){a=0;continue}if(y[0]===3&&(!r||y[1]>r[0]&&y[1]<r[3])){a.label=y[1];break}if(y[0]===6&&a.label<r[1]){a.label=r[1],r=y;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(y);break}r[2]&&a.ops.pop(),a.trys.pop();continue}y=t.call(e,a)}catch(T){y=[6,T],o=0}finally{n=r=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([h,m])}}},Kt=function(e,t,n){if(e.keyCode===229&&e.code===""&&e.key==="Unidentified"&&t.currentMode!=="sv"){var o=Object(x.c)(n);if(o&&o.textContent.trim()==="")return t[t.currentMode].composingLock=!0,!1}return!0},Ft=function(e,t,n){if(!(n.key==="Enter"||n.key==="Tab"||n.key==="Backspace"||n.key.indexOf("Arrow")>-1||Object(b.d)(n)||n.key==="Escape"||n.shiftKey||n.altKey)){var o=Object(x.f)(e.startContainer,"P")||Object(x.f)(e.startContainer,"LI");if(o&&Object(E.c)(o,t[t.currentMode].element,e).start===0){var r=document.createTextNode(c.a.ZWSP);e.insertNode(r),e.setStartAfter(r)}}},Gt=function(e,t){if(t==="ArrowDown"||t==="ArrowUp"){var n=Object(x.d)(e.startContainer,"data-type","math-inline")||Object(x.d)(e.startContainer,"data-type","html-entity")||Object(x.d)(e.startContainer,"data-type","html-inline");n&&(t==="ArrowDown"&&e.setStartAfter(n.parentElement),t==="ArrowUp"&&e.setStartBefore(n.parentElement))}},ct=function(e,t){var n=Object(E.b)(e[e.currentMode].element),o=Object(x.c)(n.startContainer);o&&(o.insertAdjacentHTML(t,'<p data-block="0">'+c.a.ZWSP+`<wbr>
</p>`),Object(E.f)(e[e.currentMode].element,n),Ve(e),ae(e))},Nn=function(e){var t=Object(x.f)(e,"TABLE");return!(!t||!t.rows[0].cells[0].isSameNode(e))&&t},Dn=function(e){var t=Object(x.f)(e,"TABLE");return!(!t||!t.lastElementChild.lastElementChild.lastElementChild.isSameNode(e))&&t},Zt=function(e,t,n){n===void 0&&(n=!0);var o=e.previousElementSibling;return o||(o=e.parentElement.previousElementSibling?e.parentElement.previousElementSibling.lastElementChild:e.parentElement.parentElement.tagName==="TBODY"&&e.parentElement.parentElement.previousElementSibling?e.parentElement.parentElement.previousElementSibling.lastElementChild.lastElementChild:null),o&&(t.selectNodeContents(o),n||t.collapse(!1),Object(E.h)(t)),o},et=function(e,t,n,o,r){var i=Object(E.c)(o,e[e.currentMode].element,n);if(t.key==="ArrowDown"&&o.textContent.trimRight().substr(i.start).indexOf(`
`)===-1||t.key==="ArrowRight"&&i.start>=o.textContent.trimRight().length){var a=r.nextElementSibling;return!a||a&&(a.tagName==="TABLE"||a.getAttribute("data-type"))?(r.insertAdjacentHTML("afterend",'<p data-block="0">'+c.a.ZWSP+"<wbr></p>"),Object(E.f)(e[e.currentMode].element,n)):(n.selectNodeContents(a),n.collapse(!0),Object(E.h)(n)),t.preventDefault(),!0}return!1},We=function(e,t,n,o,r){var i=Object(E.c)(o,e[e.currentMode].element,n);if(t.key==="ArrowUp"&&o.textContent.substr(0,i.start).indexOf(`
`)===-1||(t.key==="ArrowLeft"||t.key==="Backspace"&&n.toString()==="")&&i.start===0){var a=r.previousElementSibling;return!a||a&&(a.tagName==="TABLE"||a.getAttribute("data-type"))?(r.insertAdjacentHTML("beforebegin",'<p data-block="0">'+c.a.ZWSP+"<wbr></p>"),Object(E.f)(e[e.currentMode].element,n)):(n.selectNodeContents(a),n.collapse(!1),Object(E.h)(n)),t.preventDefault(),!0}return!1},dt=function(e,t,n,o){o===void 0&&(o=!0);var r=Object(x.f)(t.startContainer,"LI");if(e[e.currentMode].element.querySelectorAll("wbr").forEach(function(y){y.remove()}),t.insertNode(document.createElement("wbr")),o&&r){for(var i="",a=0;a<r.parentElement.childElementCount;a++){var d=r.parentElement.children[a].querySelector("input");d&&d.remove(),i+='<p data-block="0">'+r.parentElement.children[a].innerHTML.trimLeft()+"</p>"}r.parentElement.insertAdjacentHTML("beforebegin",i),r.parentElement.remove()}else if(r)if(n==="check")r.parentElement.querySelectorAll("li").forEach(function(y){y.insertAdjacentHTML("afterbegin",'<input type="checkbox" />'+(y.textContent.indexOf(" ")===0?"":" ")),y.classList.add("vditor-task")});else{r.querySelector("input")&&r.parentElement.querySelectorAll("li").forEach(function(y){y.querySelector("input").remove(),y.classList.remove("vditor-task")});var h=void 0;(h=n==="list"?document.createElement("ul"):document.createElement("ol")).innerHTML=r.parentElement.innerHTML,r.parentElement.parentNode.replaceChild(h,r.parentElement)}else{var m=Object(x.d)(t.startContainer,"data-block","0");m||(e[e.currentMode].element.querySelector("wbr").remove(),(m=e[e.currentMode].element.querySelector("p")).innerHTML="<wbr>"),n==="check"?(m.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li class="vditor-task"><input type="checkbox" /> '+m.innerHTML+"</li></ul>"),m.remove()):n==="list"?(m.insertAdjacentHTML("beforebegin",'<ul data-block="0"><li>'+m.innerHTML+"</li></ul>"),m.remove()):n==="ordered-list"&&(m.insertAdjacentHTML("beforebegin",'<ol data-block="0"><li>'+m.innerHTML+"</li></ol>"),m.remove())}},Jt=function(e,t,n){var o=t.previousElementSibling;if(t&&o){var r=[t];Array.from(n.cloneContents().children).forEach(function(h,m){h.nodeType!==3&&t&&h.textContent.trim()!==""&&t.getAttribute("data-node-id")===h.getAttribute("data-node-id")&&(m!==0&&r.push(t),t=t.nextElementSibling)}),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(h){h.remove()}),n.insertNode(document.createElement("wbr"));var i=o.parentElement,a="";r.forEach(function(h){var m=h.getAttribute("data-marker");m.length!==1&&(m="1"+m.slice(-1)),a+='<li data-node-id="'+h.getAttribute("data-node-id")+'" data-marker="'+m+'">'+h.innerHTML+"</li>",h.remove()}),o.insertAdjacentHTML("beforeend","<"+i.tagName+' data-block="0">'+a+"</"+i.tagName+">"),e.currentMode==="wysiwyg"?i.outerHTML=e.lute.SpinVditorDOM(i.outerHTML):i.outerHTML=e.lute.SpinVditorIRDOM(i.outerHTML),Object(E.f)(e[e.currentMode].element,n);var d=Object(x.b)(n.startContainer);d&&d.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(h){ie(h,e),e.currentMode==="wysiwyg"&&h.previousElementSibling.setAttribute("style","display:none")}),ae(e),Ve(e)}else e[e.currentMode].element.focus()},St=function(e,t,n,o){var r=Object(x.f)(t.parentElement,"LI");if(r){e[e.currentMode].element.querySelectorAll("wbr").forEach(function(T){T.remove()}),n.insertNode(document.createElement("wbr"));var i=t.parentElement,a=i.cloneNode(),d=[t];Array.from(n.cloneContents().children).forEach(function(T,j){T.nodeType!==3&&t&&T.textContent.trim()!==""&&t.getAttribute("data-node-id")===T.getAttribute("data-node-id")&&(j!==0&&d.push(t),t=t.nextElementSibling)});var h=!1,m="";i.querySelectorAll("li").forEach(function(T){h&&(m+=T.outerHTML,T.nextElementSibling||T.previousElementSibling?T.remove():T.parentElement.remove()),T.isSameNode(d[d.length-1])&&(h=!0)}),d.reverse().forEach(function(T){r.insertAdjacentElement("afterend",T)}),m&&(a.innerHTML=m,d[0].insertAdjacentElement("beforeend",a)),e.currentMode==="wysiwyg"?o.outerHTML=e.lute.SpinVditorDOM(o.outerHTML):o.outerHTML=e.lute.SpinVditorIRDOM(o.outerHTML),Object(E.f)(e[e.currentMode].element,n);var y=Object(x.b)(n.startContainer);y&&y.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(T){ie(T,e),e.currentMode==="wysiwyg"&&T.previousElementSibling.setAttribute("style","display:none")}),ae(e),Ve(e)}else e[e.currentMode].element.focus()},pt=function(e,t){for(var n=getSelection().getRangeAt(0).startContainer.parentElement,o=e.rows[0].cells.length,r=e.rows.length,i=0,a=0;a<r;a++)for(var d=0;d<o;d++)if(e.rows[a].cells[d].isSameNode(n)){i=d;break}for(var h=0;h<r;h++)e.rows[h].cells[i].setAttribute("align",t)},Ct=function(e){var t=e.trimRight().split(`
`).pop();return t!==""&&(t.replace(/ |-/g,"")===""||t.replace(/ |_/g,"")===""||t.replace(/ |\*/g,"")==="")&&t.replace(/ /g,"").length>2&&!(t.indexOf("-")>-1&&t.trimLeft().indexOf(" ")===-1&&e.trimRight().split(`
`).length>1)&&t.indexOf("    ")!==0&&t.indexOf("	")!==0},Ot=function(e){var t=e.trimRight().split(`
`);return(e=t.pop()).indexOf("    ")!==0&&e.indexOf("	")!==0&&(e=e.trimLeft())!==""&&t.length!==0&&(e.replace(/-/g,"")===""||e.replace(/=/g,"")==="")},ae=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),e.currentMode==="wysiwyg"?me(e,t):e.currentMode==="ir"?De(e,t):e.currentMode==="sv"&&we(e,t)},Xt=function(e,t,n,o){var r=e.startContainer,i=Object(x.f)(r,"LI");if(i){if(!Object(b.d)(o)&&!o.altKey&&o.key==="Enter"&&!o.shiftKey&&n&&i.contains(n)&&n.nextElementSibling)return i&&!i.textContent.endsWith(`
`)&&i.insertAdjacentText("beforeend",`
`),e.insertNode(document.createTextNode(`

`)),e.collapse(!1),ae(t),o.preventDefault(),!0;if(!(Object(b.d)(o)||o.shiftKey||o.altKey||o.key!=="Backspace"||i.previousElementSibling||e.toString()!==""||Object(E.c)(i,t[t.currentMode].element,e).start!==0))return i.nextElementSibling?(i.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+i.innerHTML+"</p>"),i.remove()):i.parentElement.outerHTML='<p data-block="0"><wbr>'+i.innerHTML+"</p>",Object(E.f)(t[t.currentMode].element,e),ae(t),o.preventDefault(),!0;if(!Object(b.d)(o)&&!o.altKey&&o.key==="Tab"){var a=!1;if((e.startOffset===0&&(r.nodeType===3&&!r.previousSibling||r.nodeType!==3&&r.nodeName==="LI")||i.classList.contains("vditor-task")&&e.startOffset===1&&r.previousSibling.nodeType!==3&&r.previousSibling.tagName==="INPUT")&&(a=!0),a||e.toString()!=="")return o.shiftKey?St(t,i,e,i.parentElement):Jt(t,i,e),o.preventDefault(),!0}}return!1},Tt=function(e,t,n){if(e.options.tab&&n.key==="Tab")return n.shiftKey||(t.toString()===""?(t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1)):(t.extractContents(),t.insertNode(document.createTextNode(e.options.tab)),t.collapse(!1))),Object(E.h)(t),ae(e),n.preventDefault(),!0},Yt=function(e,t,n,o){if(n){if(!Object(b.d)(e)&&!e.altKey&&e.key==="Enter"){var r=String.raw(u||(u=jn(["",""],["",""])),n.textContent).replace(/\\\|/g,"").trim(),i=r.split("|");if(r.startsWith("|")&&r.endsWith("|")&&i.length>3){var a=i.map(function(){return"---"}).join("|");return a=n.textContent+`
`+a.substring(3,a.length-3)+`
|<wbr>`,n.outerHTML=t.lute.SpinVditorDOM(a),Object(E.f)(t[t.currentMode].element,o),ae(t),be(t),e.preventDefault(),!0}if(Ct(n.innerHTML)&&n.previousElementSibling){var d="",h=n.innerHTML.trimRight().split(`
`);return h.length>1&&(h.pop(),d='<p data-block="0">'+h.join(`
`)+"</p>"),n.insertAdjacentHTML("afterend",d+`<hr data-block="0"><p data-block="0"><wbr>
</p>`),n.remove(),Object(E.f)(t[t.currentMode].element,o),ae(t),be(t),e.preventDefault(),!0}if(Ot(n.innerHTML))return t.currentMode==="wysiwyg"?n.outerHTML=t.lute.SpinVditorDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`):n.outerHTML=t.lute.SpinVditorIRDOM(n.innerHTML+`<p data-block="0"><wbr>
</p>`),Object(E.f)(t[t.currentMode].element,o),ae(t),be(t),e.preventDefault(),!0}if(o.collapsed&&n.previousElementSibling&&e.key==="Backspace"&&!Object(b.d)(e)&&!e.altKey&&!e.shiftKey&&n.textContent.trimRight().split(`
`).length>1&&Object(E.c)(n,t[t.currentMode].element,o).start===0){var m=Object(x.a)(n.previousElementSibling);return m.textContent.endsWith(`
`)||(m.textContent=m.textContent+`
`),m.parentElement.insertAdjacentHTML("beforeend","<wbr>"+n.innerHTML),n.remove(),Object(E.f)(t[t.currentMode].element,o),!1}return!1}},$t=function(e,t,n){for(var o="",r=0;r<n.parentElement.childElementCount;r++)o+="<td>"+(r===0?" <wbr>":" ")+"</td>";n.tagName==="TH"?n.parentElement.parentElement.insertAdjacentHTML("afterend","<tbody><tr>"+o+"</tr></tbody>"):n.parentElement.insertAdjacentHTML("afterend","<tr>"+o+"</tr>"),Object(E.f)(e[e.currentMode].element,t),ae(e),be(e)},Qt=function(e,t,n){for(var o=0,r=n.previousElementSibling;r;)o++,r=r.previousElementSibling;for(var i=0;i<t.rows.length;i++)i===0?t.rows[i].cells[o].insertAdjacentHTML("afterend","<th> </th>"):t.rows[i].cells[o].insertAdjacentHTML("afterend","<td> </td>");ae(e)},en=function(e,t,n){if(n.tagName==="TD"){var o=n.parentElement.parentElement;n.parentElement.previousElementSibling?t.selectNodeContents(n.parentElement.previousElementSibling.lastElementChild):t.selectNodeContents(o.previousElementSibling.lastElementChild.lastElementChild),o.childElementCount===1?o.remove():n.parentElement.remove(),t.collapse(!1),Object(E.h)(t),ae(e)}},tn=function(e,t,n,o){for(var r=0,i=o.previousElementSibling;i;)r++,i=i.previousElementSibling;(o.previousElementSibling||o.nextElementSibling)&&(t.selectNodeContents(o.previousElementSibling||o.nextElementSibling),t.collapse(!0));for(var a=0;a<n.rows.length;a++){var d=n.rows[a].cells;if(d.length===1){n.remove(),Ve(e);break}d[r].remove()}Object(E.h)(t),ae(e)},nn=function(e,t,n){var o=n.startContainer,r=Object(x.f)(o,"TD")||Object(x.f)(o,"TH");if(r){if(!Object(b.d)(t)&&!t.altKey&&t.key==="Enter"){r.lastElementChild&&(!r.lastElementChild||r.lastElementChild.isSameNode(r.lastChild)&&r.lastElementChild.tagName==="BR")||r.insertAdjacentHTML("beforeend","<br>");var i=document.createElement("br");return n.insertNode(i),n.setStartAfter(i),ae(e),be(e),t.preventDefault(),!0}if(t.key==="Tab")return t.shiftKey?(Zt(r,n),t.preventDefault(),!0):((y=r.nextElementSibling)||(y=r.parentElement.nextElementSibling?r.parentElement.nextElementSibling.firstElementChild:r.parentElement.parentElement.tagName==="THEAD"&&r.parentElement.parentElement.nextElementSibling?r.parentElement.parentElement.nextElementSibling.firstElementChild.firstElementChild:null),y&&(n.selectNodeContents(y),Object(E.h)(n)),t.preventDefault(),!0);var a=r.parentElement.parentElement.parentElement;if(t.key==="ArrowUp"){if(t.preventDefault(),r.tagName==="TH")return a.previousElementSibling?(n.selectNodeContents(a.previousElementSibling),n.collapse(!1),Object(E.h)(n)):ct(e,"beforebegin"),!0;for(var d=0,h=r.parentElement;d<h.cells.length&&!h.cells[d].isSameNode(r);d++);var m=h.previousElementSibling;return m||(m=h.parentElement.previousElementSibling.firstChild),n.selectNodeContents(m.cells[d]),n.collapse(!1),Object(E.h)(n),!0}if(t.key==="ArrowDown"){var y;if(t.preventDefault(),!(h=r.parentElement).nextElementSibling&&r.tagName==="TD")return a.nextElementSibling?(n.selectNodeContents(a.nextElementSibling),n.collapse(!0),Object(E.h)(n)):ct(e,"afterend"),!0;for(d=0;d<h.cells.length&&!h.cells[d].isSameNode(r);d++);return(y=h.nextElementSibling)||(y=h.parentElement.nextElementSibling.firstChild),n.selectNodeContents(y.cells[d]),n.collapse(!0),Object(E.h)(n),!0}if(e.currentMode==="wysiwyg"&&!Object(b.d)(t)&&t.key==="Enter"&&!t.shiftKey&&t.altKey){var T=e.wysiwyg.popover.querySelector(".vditor-input");return T.focus(),T.select(),t.preventDefault(),!0}if(!Object(b.d)(t)&&!t.shiftKey&&!t.altKey&&t.key==="Backspace"&&n.startOffset===0&&n.toString()==="")return!Zt(r,n,!1)&&a&&(a.textContent.trim()===""?(a.outerHTML=`<p data-block="0"><wbr>
</p>`,Object(E.f)(e[e.currentMode].element,n)):(n.setStartBefore(a),n.collapse(!0)),ae(e)),t.preventDefault(),!0;if(X("\u2318-=",t))return $t(e,n,r),t.preventDefault(),!0;if(X("\u2318-\u21E7-=",t))return Qt(e,a,r),t.preventDefault(),!0;if(X("\u2318--",t))return en(e,n,r),t.preventDefault(),!0;if(X("\u2318-\u21E7--",t))return tn(e,n,a,r),t.preventDefault(),!0;if(X("\u2318-\u21E7-L",t)){if(e.currentMode==="ir")return pt(a,"left"),ae(e),t.preventDefault(),!0;if(j=e.wysiwyg.popover.querySelector('[data-type="left"]'))return j.click(),t.preventDefault(),!0}if(X("\u2318-\u21E7-C",t)){if(e.currentMode==="ir")return pt(a,"center"),ae(e),t.preventDefault(),!0;if(j=e.wysiwyg.popover.querySelector('[data-type="center"]'))return j.click(),t.preventDefault(),!0}if(X("\u2318-\u21E7-R",t)){if(e.currentMode==="ir")return pt(a,"right"),ae(e),t.preventDefault(),!0;var j;if(j=e.wysiwyg.popover.querySelector('[data-type="right"]'))return j.click(),t.preventDefault(),!0}}return!1},rn=function(e,t,n,o){if(n.tagName==="PRE"&&X("\u2318-A",t))return o.selectNodeContents(n.firstElementChild),t.preventDefault(),!0;if(e.options.tab&&t.key==="Tab"&&!t.shiftKey&&o.toString()==="")return o.insertNode(document.createTextNode(e.options.tab)),o.collapse(!1),ae(e),t.preventDefault(),!0;if(t.key==="Backspace"&&!Object(b.d)(t)&&!t.shiftKey&&!t.altKey){var r=Object(E.c)(n,e[e.currentMode].element,o);if((r.start===0||r.start===1&&n.innerText===`
`)&&o.toString()==="")return n.parentElement.outerHTML='<p data-block="0"><wbr>'+n.firstElementChild.innerHTML+"</p>",Object(E.f)(e[e.currentMode].element,o),ae(e),t.preventDefault(),!0}return!Object(b.d)(t)&&!t.altKey&&t.key==="Enter"&&(n.firstElementChild.textContent.endsWith(`
`)||n.firstElementChild.insertAdjacentText("beforeend",`
`),o.extractContents(),o.insertNode(document.createTextNode(`
`)),o.collapse(!1),Object(E.h)(o),e.currentMode==="wysiwyg"?st(e,o):le(e,o),be(e),t.preventDefault(),!0)},on=function(e,t,n,o){var r=t.startContainer,i=Object(x.f)(r,"BLOCKQUOTE");if(i&&t.toString()===""){if(n.key==="Backspace"&&!Object(b.d)(n)&&!n.shiftKey&&!n.altKey&&Object(E.c)(i,e[e.currentMode].element,t).start===0)return t.insertNode(document.createElement("wbr")),i.outerHTML=i.innerHTML,Object(E.f)(e[e.currentMode].element,t),ae(e),n.preventDefault(),!0;if(o&&n.key==="Enter"&&!Object(b.d)(n)&&!n.shiftKey&&!n.altKey&&o.parentElement.tagName==="BLOCKQUOTE"){var a=!1;if(o.innerHTML.replace(c.a.ZWSP,"")===`
`||o.innerHTML.replace(c.a.ZWSP,"")===""?(a=!0,o.remove()):o.innerHTML.endsWith(`

`)&&Object(E.c)(o,e[e.currentMode].element,t).start===o.textContent.length-1&&(o.innerHTML=o.innerHTML.substr(0,o.innerHTML.length-2),a=!0),a)return i.insertAdjacentHTML("afterend",'<p data-block="0">'+c.a.ZWSP+`<wbr>
</p>`),Object(E.f)(e[e.currentMode].element,t),ae(e),n.preventDefault(),!0}var d=Object(x.c)(r);if(e.currentMode==="wysiwyg"&&d&&X("\u2318-\u21E7-:",n))return t.insertNode(document.createElement("wbr")),d.outerHTML='<blockquote data-block="0">'+d.outerHTML+"</blockquote>",Object(E.f)(e.wysiwyg.element,t),me(e),n.preventDefault(),!0;if(et(e,n,t,i,i)||We(e,n,t,i,i))return!0}return!1},an=function(e,t,n){var o=t.startContainer,r=Object(x.e)(o,"vditor-task");if(r){if(X("\u2318-\u21E7-J",n)){var i=r.firstElementChild;return i.checked?i.removeAttribute("checked"):i.setAttribute("checked","checked"),ae(e),n.preventDefault(),!0}if(n.key==="Backspace"&&!Object(b.d)(n)&&!n.shiftKey&&!n.altKey&&t.toString()===""&&t.startOffset===1&&(o.nodeType===3&&o.previousSibling&&o.previousSibling.tagName==="INPUT"||o.nodeType!==3)){var a=r.previousElementSibling;return r.querySelector("input").remove(),a?(Object(x.a)(a).parentElement.insertAdjacentHTML("beforeend","<wbr>"+r.innerHTML.trim()),r.remove()):(r.parentElement.insertAdjacentHTML("beforebegin",'<p data-block="0"><wbr>'+(r.innerHTML.trim()||`
`)+"</p>"),r.nextElementSibling?r.remove():r.parentElement.remove()),Object(E.f)(e[e.currentMode].element,t),ae(e),n.preventDefault(),!0}if(n.key==="Enter"&&!Object(b.d)(n)&&!n.shiftKey&&!n.altKey){if(r.textContent.trim()==="")if(Object(x.e)(r.parentElement,"vditor-task")){var d=Object(x.b)(o);d&&St(e,r,t,d)}else if(r.nextElementSibling){var h="",m="",y=!1;Array.from(r.parentElement.children).forEach(function(O){r.isSameNode(O)?y=!0:y?h+=O.outerHTML:m+=O.outerHTML});var T=r.parentElement.tagName,j=r.parentElement.tagName==="OL"?"":' data-marker="'+r.parentElement.getAttribute("data-marker")+'"',I="";m&&(I=r.parentElement.tagName==="UL"?"":' start="1"',m="<"+T+' data-tight="true"'+j+' data-block="0">'+m+"</"+T+">"),r.parentElement.outerHTML=m+`<p data-block="0"><wbr>
</p><`+T+`
 data-tight="true"`+j+' data-block="0"'+I+">"+h+"</"+T+">"}else r.parentElement.insertAdjacentHTML("afterend",`<p data-block="0"><wbr>
</p>`),r.parentElement.querySelectorAll("li").length===1?r.parentElement.remove():r.remove();else o.nodeType!==3&&t.startOffset===0&&o.firstChild.tagName==="INPUT"?t.setStart(o.childNodes[1],1):(t.setEndAfter(r.lastChild),r.insertAdjacentHTML("afterend",'<li class="vditor-task" data-marker="'+r.getAttribute("data-marker")+'"><input type="checkbox"> <wbr></li>'),document.querySelector("wbr").after(t.extractContents()));return Object(E.f)(e[e.currentMode].element,t),ae(e),be(e),n.preventDefault(),!0}}return!1},ln=function(e,t,n,o){if(t.startContainer.nodeType!==3){var r=t.startContainer.children[t.startOffset];if(r&&r.tagName==="HR")return t.selectNodeContents(r.previousElementSibling),t.collapse(!1),n.preventDefault(),!0}if(o){var i=o.previousElementSibling;if(i&&Object(E.c)(o,e[e.currentMode].element,t).start===0&&(Object(b.e)()&&i.tagName==="HR"||i.tagName==="TABLE")){if(i.tagName==="TABLE"){var a=i.lastElementChild.lastElementChild.lastElementChild;a.innerHTML=a.innerHTML.trimLeft()+"<wbr>"+o.textContent.trim(),o.remove()}else i.remove();return Object(E.f)(e[e.currentMode].element,t),ae(e),n.preventDefault(),!0}}return!1},sn=function(e){Object(b.e)()&&e.startContainer.nodeType!==3&&e.startContainer.tagName==="HR"&&e.setStartBefore(e.startContainer)},cn=function(e,t,n){var o,r;if(!Object(b.e)())return!1;if(e.key==="ArrowUp"&&t&&((o=t.previousElementSibling)===null||o===void 0?void 0:o.tagName)==="TABLE"){var i=t.previousElementSibling;return n.selectNodeContents(i.rows[i.rows.length-1].lastElementChild),n.collapse(!1),e.preventDefault(),!0}return!(e.key!=="ArrowDown"||!t||((r=t.nextElementSibling)===null||r===void 0?void 0:r.tagName)!=="TABLE")&&(n.selectNodeContents(t.nextElementSibling.rows[0].cells[0]),n.collapse(!0),e.preventDefault(),!0)},Lt=function(e,t,n){return An(void 0,void 0,void 0,function(){var o,r,i,a,d,h,m,y,T,j,I,O,A;return Hn(this,function(V){switch(V.label){case 0:return t.stopPropagation(),t.preventDefault(),o=t.clipboardData.getData("text/html"),r=t.clipboardData.getData("text/plain"),i={},a=function(N,P){if(!P)return["",Lute.WalkContinue];var D=N.TokensStr();if(N.__internal_object__.Parent.Type===34&&D&&D.indexOf("file://")===-1&&e.options.upload.linkToImgUrl){var L=new XMLHttpRequest;L.open("POST",e.options.upload.linkToImgUrl),e.options.upload.token&&L.setRequestHeader("X-Upload-Token",e.options.upload.token),e.options.upload.withCredentials&&(L.withCredentials=!0),qt(e,L),L.setRequestHeader("Content-Type","application/json; charset=utf-8"),L.onreadystatechange=function(){if(L.readyState===XMLHttpRequest.DONE){if(L.status===200){var q=L.responseText;e.options.upload.linkToImgFormat&&(q=e.options.upload.linkToImgFormat(L.responseText));var J=JSON.parse(q);if(J.code!==0)return void e.tip.show(J.msg);var Q=J.data.originalURL;if(e.currentMode==="sv")e.sv.element.querySelectorAll(".vditor-sv__marker--link").forEach(function(Y){Y.textContent===Q&&(Y.textContent=J.data.url)});else{var ee=e[e.currentMode].element.querySelector('img[src="'+Q+'"]');ee.src=J.data.url,e.currentMode==="ir"&&(ee.previousElementSibling.previousElementSibling.innerHTML=J.data.url)}ae(e)}else e.tip.show(L.responseText);e.options.upload.linkToImgCallback&&e.options.upload.linkToImgCallback(L.responseText)}},L.send(JSON.stringify({url:D}))}return e.currentMode==="ir"?['<span class="vditor-ir__marker vditor-ir__marker--link">'+D+"</span>",Lute.WalkContinue]:e.currentMode==="wysiwyg"?["",Lute.WalkContinue]:['<span class="vditor-sv__marker--link">'+D+"</span>",Lute.WalkContinue]},o.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<a href="'+r+'">'+r+"</a>"&&o.replace(/&amp;/g,"&").replace(/<(|\/)(html|body|meta)[^>]*?>/gi,"").trim()!=='<!--StartFragment--><a href="'+r+'">'+r+"</a><!--EndFragment-->"||(o=""),(d=new DOMParser().parseFromString(o,"text/html")).body&&(o=d.body.innerHTML),e.wysiwyg.getComments(e),h=e[e.currentMode].element.scrollHeight,m=function(N,P,D){D===void 0&&(D="sv");var L=document.createElement("div");L.innerHTML=N;var q=!1;L.childElementCount===1&&L.lastElementChild.style.fontFamily.indexOf("monospace")>-1&&(q=!0);var J=L.querySelectorAll("pre");if(L.childElementCount===1&&J.length===1&&J[0].className!=="vditor-wysiwyg"&&J[0].className!=="vditor-sv"&&(q=!0),N.indexOf(`
<p class="p1">`)===0&&(q=!0),L.childElementCount===1&&L.firstElementChild.tagName==="TABLE"&&L.querySelector(".line-number")&&L.querySelector(".line-content")&&(q=!0),q){var Q=P||N;return/\n/.test(Q)||J.length===1?D==="wysiwyg"?'<div class="vditor-wysiwyg__block" data-block="0" data-type="code-block"><pre><code>'+Q.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"<wbr></code></pre></div>":"\n```\n"+Q.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"\n```":D==="wysiwyg"?"<code>"+Q.replace(/&/g,"&amp;").replace(/</g,"&lt;")+"</code><wbr>":"`"+Q+"`"}return!1}(o,r,e.currentMode),(y=e.currentMode==="sv"?Object(x.d)(t.target,"data-type","code-block"):Object(x.f)(t.target,"CODE"))?(e.currentMode==="sv"?document.execCommand("insertHTML",!1,r.replace(/&/g,"&amp;").replace(/</g,"&lt;")):(T=Object(E.c)(t.target,e[e.currentMode].element),y.parentElement.tagName!=="PRE"&&(r+=c.a.ZWSP),y.textContent=y.textContent.substring(0,T.start)+r+y.textContent.substring(T.end),Object(E.g)(T.start+r.length,T.start+r.length,y.parentElement),((A=y.parentElement)===null||A===void 0?void 0:A.nextElementSibling.classList.contains("vditor-"+e.currentMode+"__preview"))&&(y.parentElement.nextElementSibling.innerHTML=y.outerHTML,ie(y.parentElement.nextElementSibling,e))),[3,6]):[3,1];case 1:return m?(n.pasteCode(m),[3,6]):[3,2];case 2:return o.trim()===""?[3,3]:((j=document.createElement("div")).innerHTML=o,j.querySelectorAll("[style]").forEach(function(N){N.removeAttribute("style")}),j.querySelectorAll(".vditor-copy").forEach(function(N){N.remove()}),e.currentMode==="ir"?(i.HTML2VditorIRDOM={renderLinkDest:a},e.lute.SetJSRenderers({renderers:i}),Object(E.d)(e.lute.HTML2VditorIRDOM(j.innerHTML),e)):e.currentMode==="wysiwyg"?(i.HTML2VditorDOM={renderLinkDest:a},e.lute.SetJSRenderers({renderers:i}),Object(E.d)(e.lute.HTML2VditorDOM(j.innerHTML),e)):(i.Md2VditorSVDOM={renderLinkDest:a},e.lute.SetJSRenderers({renderers:i}),zt(e,e.lute.HTML2Md(j.innerHTML).trimRight())),e.outline.render(e),[3,6]);case 3:return t.clipboardData.files.length>0&&e.options.upload.url?[4,at(e,t.clipboardData.files)]:[3,5];case 4:return V.sent(),[3,6];case 5:r.trim()!==""&&t.clipboardData.files.length===0&&(e.currentMode==="ir"?(i.Md2VditorIRDOM={renderLinkDest:a},e.lute.SetJSRenderers({renderers:i}),Object(E.d)(e.lute.Md2VditorIRDOM(r),e)):e.currentMode==="wysiwyg"?(i.Md2VditorDOM={renderLinkDest:a},e.lute.SetJSRenderers({renderers:i}),Object(E.d)(e.lute.Md2VditorDOM(r),e)):(i.Md2VditorSVDOM={renderLinkDest:a},e.lute.SetJSRenderers({renderers:i}),zt(e,r)),e.outline.render(e)),V.label=6;case 6:return e.currentMode!=="sv"&&((I=Object(x.c)(Object(E.b)(e[e.currentMode].element).startContainer))&&(O=Object(E.b)(e[e.currentMode].element),e[e.currentMode].element.querySelectorAll("wbr").forEach(function(N){N.remove()}),O.insertNode(document.createElement("wbr")),e.currentMode==="wysiwyg"?I.outerHTML=e.lute.SpinVditorDOM(I.outerHTML):I.outerHTML=e.lute.SpinVditorIRDOM(I.outerHTML),Object(E.f)(e[e.currentMode].element,O)),e[e.currentMode].element.querySelectorAll(".vditor-"+e.currentMode+"__preview[data-render='2']").forEach(function(N){ie(N,e)})),e.wysiwyg.triggerRemoveComment(e),ae(e),e[e.currentMode].element.scrollHeight-h>Math.min(e[e.currentMode].element.clientHeight,window.innerHeight)/2&&be(e),[2]}})})},dn=function(e){e.hint.render(e);var t=Object(E.b)(e.ir.element).startContainer,n=Object(x.d)(t,"data-type","code-block-info");if(n)if(n.textContent.replace(c.a.ZWSP,"")===""&&e.hint.recentLanguage)n.textContent=c.a.ZWSP+e.hint.recentLanguage,Object(E.b)(e.ir.element).selectNodeContents(n);else{var o=[],r=n.textContent.substring(0,Object(E.c)(n,e.ir.element).start).replace(c.a.ZWSP,"");c.a.CODE_LANGUAGES.forEach(function(i){i.indexOf(r.toLowerCase())>-1&&o.push({html:i,value:i})}),e.hint.genHTML(o,r,e)}},De=function(e,t){t===void 0&&(t={enableAddUndoStack:!0,enableHint:!1,enableInput:!0}),t.enableHint&&dn(e),clearTimeout(e.ir.processTimeoutId),e.ir.processTimeoutId=window.setTimeout(function(){if(!e.ir.composingLock){var n=p(e);typeof e.options.input=="function"&&t.enableInput&&e.options.input(n),e.options.counter.enable&&e.counter.render(e,n),e.options.cache.enable&&Object(b.a)()&&(localStorage.setItem(e.options.cache.id,n),e.options.cache.after&&e.options.cache.after(n)),e.devtools&&e.devtools.renderEchart(e),t.enableAddUndoStack&&e.undo.addToUndoStack(e)}},e.options.undoDelay)},tt=function(e,t){var n=Object(E.b)(e.ir.element),o=Object(x.c)(n.startContainer)||n.startContainer;if(o){var r=o.querySelector(".vditor-ir__marker--heading");r?r.innerHTML=t:(o.insertAdjacentText("afterbegin",t),n.selectNodeContents(o),n.collapse(!1)),le(e,n.cloneRange()),Xe(e)}},ut=function(e,t,n){var o=Object(x.d)(e.startContainer,"data-type",n);if(o){o.firstElementChild.remove(),o.lastElementChild.remove(),e.insertNode(document.createElement("wbr"));var r=document.createElement("div");r.innerHTML=t.lute.SpinVditorIRDOM(o.outerHTML),o.outerHTML=r.firstElementChild.innerHTML.trim()}},In=function(e,t,n,o){var r=Object(E.b)(e.ir.element),i=t.getAttribute("data-type"),a=r.startContainer;a.nodeType===3&&(a=a.parentElement);var d=!0;if(t.classList.contains("vditor-menu--current"))if(i==="quote"){var h=Object(x.f)(a,"BLOCKQUOTE");h&&(r.insertNode(document.createElement("wbr")),h.outerHTML=h.innerHTML.trim()===""?'<p data-block="0">'+h.innerHTML+"</p>":h.innerHTML)}else if(i==="link"){var m=Object(x.d)(r.startContainer,"data-type","a");if(m){var y=Object(x.e)(r.startContainer,"vditor-ir__link");y?(r.insertNode(document.createElement("wbr")),m.outerHTML=y.innerHTML):m.outerHTML=m.querySelector(".vditor-ir__link").innerHTML+"<wbr>"}}else i==="italic"?ut(r,e,"em"):i==="bold"?ut(r,e,"strong"):i==="strike"?ut(r,e,"s"):i==="inline-code"?ut(r,e,"code"):i!=="check"&&i!=="list"&&i!=="ordered-list"||(dt(e,r,i),d=!1,t.classList.remove("vditor-menu--current"));else{e.ir.element.childNodes.length===0&&(e.ir.element.innerHTML='<p data-block="0"><wbr></p>',Object(E.f)(e.ir.element,r));var T=Object(x.c)(r.startContainer);if(i==="line"){if(T){var j=`<hr data-block="0"><p data-block="0"><wbr>
</p>`;T.innerHTML.trim()===""?T.outerHTML=j:T.insertAdjacentHTML("afterend",j)}}else if(i==="quote")T&&(r.insertNode(document.createElement("wbr")),T.outerHTML='<blockquote data-block="0">'+T.outerHTML+"</blockquote>",d=!1,t.classList.add("vditor-menu--current"));else if(i==="link"){var I=void 0;I=r.toString()===""?n+"<wbr>"+o:""+n+r.toString()+o.replace(")","<wbr>)"),document.execCommand("insertHTML",!1,I),d=!1,t.classList.add("vditor-menu--current")}else if(i==="italic"||i==="bold"||i==="strike"||i==="inline-code"||i==="code"||i==="table"){I=void 0,r.toString()===""?I=n+"<wbr>"+o:(I=i==="code"||i==="table"?""+n+r.toString()+"<wbr>"+o:""+n+r.toString()+o+"<wbr>",r.deleteContents()),i!=="table"&&i!=="code"||(I=`
`+I+`

`);var O=document.createElement("span");O.innerHTML=I,r.insertNode(O),le(e,r),i==="table"&&(r.selectNodeContents(getSelection().getRangeAt(0).startContainer.parentElement),Object(E.h)(r))}else i!=="check"&&i!=="list"&&i!=="ordered-list"||(dt(e,r,i,!1),d=!1,C(e.toolbar.elements,["check","list","ordered-list"]),t.classList.add("vditor-menu--current"))}Object(E.f)(e.ir.element,r),De(e),d&&Xe(e)},Rn=function(){function e(t){var n=this;this.splitChar="",this.lastIndex=-1,this.fillEmoji=function(o,r){n.element.style.display="none";var i=decodeURIComponent(o.getAttribute("data-value")),a=window.getSelection().getRangeAt(0);if(r.currentMode==="ir"){var d=Object(x.d)(a.startContainer,"data-type","code-block-info");if(d)return d.textContent=c.a.ZWSP+i.trimRight(),a.selectNodeContents(d),a.collapse(!1),De(r),d.parentElement.querySelectorAll("code").forEach(function(y){y.className="language-"+i.trimRight()}),ie(d.parentElement.querySelector(".vditor-ir__preview"),r),void(n.recentLanguage=i.trimRight())}if(r.currentMode==="wysiwyg"&&a.startContainer.nodeType!==3&&a.startContainer.firstElementChild.classList.contains("vditor-input")){var h=a.startContainer.firstElementChild;return h.value=i.trimRight(),a.selectNodeContents(h),a.collapse(!1),h.dispatchEvent(new CustomEvent("input")),void(n.recentLanguage=i.trimRight())}if(a.setStart(a.startContainer,n.lastIndex),a.deleteContents(),n.splitChar===":"&&i.indexOf(":")>-1&&r.currentMode!=="sv"?(Object(E.d)(r.lute.SpinVditorDOM(i),r),a.insertNode(document.createTextNode(" "))):Object(E.d)(r.lute.SpinVditorDOM(i),r),a.collapse(!1),Object(E.h)(a),r.currentMode==="wysiwyg")(m=Object(x.e)(a.startContainer,"vditor-wysiwyg__block"))&&m.lastElementChild.classList.contains("vditor-wysiwyg__preview")&&(m.lastElementChild.innerHTML=m.firstElementChild.innerHTML,ie(m.lastElementChild,r));else if(r.currentMode==="ir"){var m;(m=Object(x.e)(a.startContainer,"vditor-ir__marker--pre"))&&m.nextElementSibling.classList.contains("vditor-ir__preview")&&(m.nextElementSibling.innerHTML=m.innerHTML,ie(m.nextElementSibling,r))}ae(r)},this.timeId=-1,this.element=document.createElement("div"),this.element.className="vditor-hint",this.recentLanguage="",t.push({key:":"})}return e.prototype.render=function(t){var n=this;if(window.getSelection().focusNode){var o,r=getSelection().getRangeAt(0);o=r.startContainer.textContent.substring(0,r.startOffset)||"";var i=this.getKey(o,t.options.hint.extend);if(i===void 0)this.element.style.display="none",clearTimeout(this.timeId);else if(this.splitChar===":"){var a=i===""?t.options.hint.emoji:t.lute.GetEmojis(),d=[];Object.keys(a).forEach(function(h){h.indexOf(i.toLowerCase())===0&&(a[h].indexOf(".")>-1?d.push({html:'<img src="'+a[h]+'" title=":'+h+':"/> :'+h+":",value:":"+h+":"}):d.push({html:'<span class="vditor-hint__emoji">'+a[h]+"</span>"+h,value:a[h]}))}),this.genHTML(d,i,t)}else t.options.hint.extend.forEach(function(h){h.key===n.splitChar&&(clearTimeout(n.timeId),n.timeId=window.setTimeout(function(){n.genHTML(h.hint(i),i,t)},t.options.hint.delay))})}},e.prototype.genHTML=function(t,n,o){var r=this;if(t.length!==0){var i=o[o.currentMode].element,a=Object(E.a)(i),d=a.left+(o.options.outline.position==="left"?o.outline.element.offsetWidth:0),h=a.top,m="";t.forEach(function(T,j){if(!(j>7)){var I=T.html;if(n!==""){var O=I.lastIndexOf(">")+1,A=I.substr(O),V=A.toLowerCase().indexOf(n.toLowerCase());V>-1&&(A=A.substring(0,V)+"<b>"+A.substring(V,V+n.length)+"</b>"+A.substring(V+n.length),I=I.substr(0,O)+A)}m+='<button data-value="'+encodeURIComponent(T.value)+` "
`+(j===0?"class='vditor-hint--current'":"")+"> "+I+"</button>"}}),this.element.innerHTML=m;var y=parseInt(document.defaultView.getComputedStyle(i,null).getPropertyValue("line-height"),10);this.element.style.top=h+(y||22)+"px",this.element.style.left=d+"px",this.element.style.display="block",this.element.style.right="auto",this.element.querySelectorAll("button").forEach(function(T){T.addEventListener("click",function(j){r.fillEmoji(T,o),j.preventDefault()})}),this.element.getBoundingClientRect().bottom>window.innerHeight&&(this.element.style.top=h-this.element.offsetHeight+"px"),this.element.getBoundingClientRect().right>window.innerWidth&&(this.element.style.left="auto",this.element.style.right="0")}else this.element.style.display="none"},e.prototype.select=function(t,n){if(this.element.querySelectorAll("button").length===0||this.element.style.display==="none")return!1;var o=this.element.querySelector(".vditor-hint--current");if(t.key==="ArrowDown")return t.preventDefault(),t.stopPropagation(),o.removeAttribute("class"),o.nextElementSibling?o.nextElementSibling.className="vditor-hint--current":this.element.children[0].className="vditor-hint--current",!0;if(t.key==="ArrowUp"){if(t.preventDefault(),t.stopPropagation(),o.removeAttribute("class"),o.previousElementSibling)o.previousElementSibling.className="vditor-hint--current";else{var r=this.element.children.length;this.element.children[r-1].className="vditor-hint--current"}return!0}return!(Object(b.d)(t)||t.shiftKey||t.altKey||t.key!=="Enter"||t.isComposing)&&(t.preventDefault(),t.stopPropagation(),this.fillEmoji(o,n),!0)},e.prototype.getKey=function(t,n){var o,r=this;if(this.lastIndex=-1,this.splitChar="",n.forEach(function(h){var m=t.lastIndexOf(h.key);r.lastIndex<m&&(r.splitChar=h.key,r.lastIndex=m)}),this.lastIndex===-1)return o;var i=t.split(this.splitChar),a=i[i.length-1];if(i.length>1&&a.trim()===a)if(i.length===2&&i[0]===""&&i[1].length<32)o=i[1];else{var d=i[i.length-2].slice(-1);Object(v.a)(d)===" "&&a.length<32&&(o=a)}return o},e}(),Pn=function(){function e(t){this.composingLock=!1;var n=document.createElement("div");n.className="vditor-ir",n.innerHTML='<pre class="vditor-reset" placeholder="'+t.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>`,this.element=n.firstElementChild,this.bindEvent(t),bt(t,this.element),Ut(t,this.element),yt(t,this.element),xt(t,this.element),_t(t,this.element),wt(t,this.element),kt(t,this.element,this.copy),Et(t,this.element,this.copy)}return e.prototype.copy=function(t,n){var o=getSelection().getRangeAt(0);if(o.toString()!==""){t.stopPropagation(),t.preventDefault();var r=document.createElement("div");r.appendChild(o.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorIRDOM2Md(r.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(o){Lt(t,o,{pasteCode:function(r){document.execCommand("insertHTML",!1,r)}})}),this.element.addEventListener("compositionstart",function(o){n.composingLock=!0}),this.element.addEventListener("compositionend",function(o){Object(b.e)()||le(t,getSelection().getRangeAt(0).cloneRange()),n.composingLock=!1}),this.element.addEventListener("input",function(o){o.inputType!=="deleteByDrag"&&o.inputType!=="insertFromDrop"&&(n.preventInput?n.preventInput=!1:n.composingLock||le(t,getSelection().getRangeAt(0).cloneRange(),!1,o))}),this.element.addEventListener("click",function(o){if(o.target.tagName==="INPUT")return o.target.checked?o.target.setAttribute("checked","checked"):o.target.removeAttribute("checked"),n.preventInput=!0,void De(t);var r=Object(E.b)(n.element),i=Object(x.e)(o.target,"vditor-ir__preview");if(i||(i=Object(x.e)(r.startContainer,"vditor-ir__preview")),i&&(i.previousElementSibling.firstElementChild?r.selectNodeContents(i.previousElementSibling.firstElementChild):r.selectNodeContents(i.previousElementSibling),r.collapse(!0),Object(E.h)(r),be(t)),o.target.tagName==="IMG"){var a=o.target.parentElement.querySelector(".vditor-ir__marker--link");a&&(r.selectNode(a),Object(E.h)(r))}if(o.target.isEqualNode(n.element)&&n.element.lastElementChild&&r.collapsed){var d=n.element.lastElementChild.getBoundingClientRect();o.y>d.top+d.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(c.a.ZWSP,"")===""?(r.selectNodeContents(n.element.lastElementChild),r.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+c.a.ZWSP+"<wbr></p>"),Object(E.f)(n.element,r)))}r.toString()===""?fe(r,t):setTimeout(function(){fe(Object(E.b)(n.element),t)}),W(o,t),Xe(t)}),this.element.addEventListener("keyup",function(o){if(!o.isComposing&&!Object(b.d)(o))if(o.key==="Enter"&&be(t),Xe(t),o.key!=="Backspace"&&o.key!=="Delete"||t.ir.element.innerHTML===""||t.ir.element.childNodes.length!==1||!t.ir.element.firstElementChild||t.ir.element.firstElementChild.tagName!=="P"||t.ir.element.firstElementChild.childElementCount!==0||t.ir.element.textContent!==""&&t.ir.element.textContent!==`
`){var r=Object(E.b)(n.element);o.key==="Backspace"?(Object(b.e)()&&r.startContainer.textContent===`
`&&r.startOffset===1&&(r.startContainer.textContent="",fe(r,t)),n.element.querySelectorAll(".language-math").forEach(function(a){var d=a.querySelector("br");d&&d.remove()})):o.key.indexOf("Arrow")>-1?(o.key!=="ArrowLeft"&&o.key!=="ArrowRight"||dn(t),fe(r,t)):o.keyCode===229&&o.code===""&&o.key==="Unidentified"&&fe(r,t);var i=Object(x.e)(r.startContainer,"vditor-ir__preview");if(i){if(o.key==="ArrowUp"||o.key==="ArrowLeft")return i.previousElementSibling.firstElementChild?r.selectNodeContents(i.previousElementSibling.firstElementChild):r.selectNodeContents(i.previousElementSibling),r.collapse(!1),o.preventDefault(),!0;if(i.tagName==="SPAN"&&(o.key==="ArrowDown"||o.key==="ArrowRight"))return i.parentElement.getAttribute("data-type")==="html-entity"?(i.parentElement.insertAdjacentText("afterend",c.a.ZWSP),r.setStart(i.parentElement.nextSibling,1)):r.selectNodeContents(i.parentElement.lastElementChild),r.collapse(!1),o.preventDefault(),!0}}else t.ir.element.innerHTML=""})},e}(),pn=function(e){return e.currentMode==="sv"?e.lute.Md2HTML(p(e)):e.currentMode==="wysiwyg"?e.lute.VditorDOM2HTML(e.wysiwyg.element.innerHTML):e.currentMode==="ir"?e.lute.VditorIRDOM2HTML(e.ir.element.innerHTML):void 0},Bn=g(24),un=g(22),qn=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-outline",this.element.innerHTML='<div class="vditor-outline__title">'+t+`</div>
<div class="vditor-outline__content"></div>`}return e.prototype.render=function(t){return t.preview.element.style.display==="block"?Object(un.a)(t.preview.element.lastElementChild,this.element.lastElementChild,t):Object(un.a)(t[t.currentMode].element,this.element.lastElementChild,t)},e.prototype.toggle=function(t,n){var o;n===void 0&&(n=!0);var r=(o=t.toolbar.elements.outline)===null||o===void 0?void 0:o.firstElementChild;if(n&&window.innerWidth>=c.a.MOBILE_WIDTH?(this.element.style.display="block",this.render(t),r==null||r.classList.add("vditor-menu--current")):(this.element.style.display="none",r==null||r.classList.remove("vditor-menu--current")),getSelection().rangeCount>0){var i=getSelection().getRangeAt(0);t[t.currentMode].element.contains(i.startContainer)?Object(E.h)(i):t[t.currentMode].element.focus()}je(t)},e}(),Un=g(19),zn=function(){function e(t){var n=this;this.element=document.createElement("div"),this.element.className="vditor-preview";var o=document.createElement("div");o.className="vditor-reset",t.options.classes.preview&&o.classList.add(t.options.classes.preview),o.style.maxWidth=t.options.preview.maxWidth+"px",o.addEventListener("copy",function(m){if(m.target.tagName!=="TEXTAREA"){var y=document.createElement("div");y.className="vditor-reset",y.appendChild(getSelection().getRangeAt(0).cloneContents()),n.copyToX(t,y),m.preventDefault()}}),o.addEventListener("click",function(m){var y=Object(x.f)(m.target,"SPAN");if(y&&Object(x.e)(y,"vditor-toc")){var T=o.querySelector("#"+y.getAttribute("data-target-id"));T&&(n.element.scrollTop=T.offsetTop)}else m.target.tagName==="IMG"&&Object(pe.a)(m.target,t.options.lang,t.options.theme)});var r=t.options.preview.actions,i=document.createElement("div");i.className="vditor-preview__action";for(var a=[],d=0;d<r.length;d++){var h=r[d];if(typeof h!="object")switch(h){case"desktop":a.push('<button type="button" class="vditor-preview__action--current" data-type="desktop">Desktop</button>');break;case"tablet":a.push('<button type="button" data-type="tablet">Tablet</button>');break;case"mobile":a.push('<button type="button" data-type="mobile">Mobile/Wechat</button>');break;case"mp-wechat":a.push('<button type="button" data-type="mp-wechat" class="vditor-tooltipped vditor-tooltipped__w" aria-label="\u590D\u5236\u5230\u516C\u4F17\u53F7"><svg><use xlink:href="#vditor-icon-mp-wechat"></use></svg></button>');break;case"zhihu":a.push('<button type="button" data-type="zhihu" class="vditor-tooltipped vditor-tooltipped__w" aria-label="\u590D\u5236\u5230\u77E5\u4E4E"><svg><use xlink:href="#vditor-icon-zhihu"></use></svg></button>')}else a.push('<button type="button" data-type="'+h.key+'" class="'+h.className+'"'+(h.tooltip?' aria-label="'+h.tooltip+'"':"")+'">'+h.text+"</button>")}i.innerHTML=a.join(""),this.element.appendChild(i),this.element.appendChild(o),i.addEventListener(Object(b.b)(),function(m){var y=Object($.b)(m.target,"BUTTON");if(y){var T=y.getAttribute("data-type"),j=r.find(function(I){return(I==null?void 0:I.key)===T});j?j.click(T):T!=="mp-wechat"&&T!=="zhihu"?(o.style.width=T==="desktop"?"auto":T==="tablet"?"780px":"360px",o.scrollWidth>o.parentElement.clientWidth&&(o.style.width="auto"),n.render(t),i.querySelectorAll("button").forEach(function(I){I.classList.remove("vditor-preview__action--current")}),y.classList.add("vditor-preview__action--current")):n.copyToX(t,n.element.lastElementChild.cloneNode(!0),T)}})}return e.prototype.render=function(t,n){var o=this;if(clearTimeout(this.mdTimeoutId),this.element.style.display!=="none")if(n)this.element.lastElementChild.innerHTML=n;else if(p(t).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")!==""){var r=new Date().getTime(),i=p(t);this.mdTimeoutId=window.setTimeout(function(){if(t.options.preview.url){var a=new XMLHttpRequest;a.open("POST",t.options.preview.url),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(a.status===200){var h=JSON.parse(a.responseText);if(h.code!==0)return void t.tip.show(h.msg);t.options.preview.transform&&(h.data=t.options.preview.transform(h.data)),o.element.lastElementChild.innerHTML=h.data,o.afterRender(t,r)}else{var m=t.lute.Md2HTML(i);t.options.preview.transform&&(m=t.options.preview.transform(m)),o.element.lastElementChild.innerHTML=m,o.afterRender(t,r)}},a.send(JSON.stringify({markdownText:i}))}else{var d=t.lute.Md2HTML(i);t.options.preview.transform&&(d=t.options.preview.transform(d)),o.element.lastElementChild.innerHTML=d,o.afterRender(t,r)}},t.options.preview.delay)}else this.element.lastElementChild.innerHTML="";else this.element.getAttribute("data-type")==="renderPerformance"&&t.tip.hide()},e.prototype.afterRender=function(t,n){t.options.preview.parse&&t.options.preview.parse(this.element);var o=new Date().getTime()-n;new Date().getTime()-n>2600?(t.tip.show(Z.a[t.options.lang].performanceTip.replace("${x}",o.toString())),t.preview.element.setAttribute("data-type","renderPerformance")):t.preview.element.getAttribute("data-type")==="renderPerformance"&&(t.tip.hide(),t.preview.element.removeAttribute("data-type"));var r=t.preview.element.querySelector(".vditor-comment--focus");r&&r.classList.remove("vditor-comment--focus"),Object(ce.a)(t.preview.element.lastElementChild,t.options.lang),Object(xe.a)(t.options.preview.hljs,t.preview.element.lastElementChild,t.options.cdn),Object(rt.a)(t.preview.element.lastElementChild,t.options.cdn,t.options.theme),Object(de.a)(t.preview.element.lastElementChild,t.options.cdn),Object(Ee.a)(t.preview.element.lastElementChild,t.options.cdn),Object(se.a)(t.preview.element.lastElementChild,t.options.cdn,t.options.theme),Object(G.a)(t.preview.element.lastElementChild,t.options.cdn,t.options.theme),Object(ue.a)(t.preview.element.lastElementChild,t.options.cdn),Object(Un.a)(t.preview.element.lastElementChild);var i=t.preview.element,a=t.outline.render(t);a===""&&(a="[ToC]"),i.querySelectorAll('[data-type="toc-block"]').forEach(function(d){d.innerHTML=a,Object(Ne.a)(d,{cdn:t.options.cdn,math:t.options.preview.math})}),Object(Ne.a)(t.preview.element.lastElementChild,{cdn:t.options.cdn,math:t.options.preview.math})},e.prototype.copyToX=function(t,n,o){o===void 0&&(o="mp-wechat"),o!=="zhihu"?n.querySelectorAll(".katex-html .base").forEach(function(i){i.style.display="initial"}):n.querySelectorAll(".language-math").forEach(function(i){i.outerHTML='<img class="Formula-image" data-eeimg="true" src="//www.zhihu.com/equation?tex=" alt="'+i.getAttribute("data-math")+'\\" style="display: block; margin: 0 auto; max-width: 100%;">'}),n.style.backgroundColor="#fff",n.querySelectorAll("code").forEach(function(i){i.style.backgroundImage="none"}),this.element.append(n);var r=n.ownerDocument.createRange();r.selectNode(n),Object(E.h)(r),document.execCommand("copy"),this.element.lastElementChild.remove(),t.tip.show("\u5DF2\u590D\u5236\uFF0C\u53EF\u5230"+(o==="zhihu"?"\u77E5\u4E4E":"\u5FAE\u4FE1\u516C\u4F17\u53F7\u5E73\u53F0")+"\u8FDB\u884C\u7C98\u8D34")},e}(),Vn=function(){function e(t){this.element=document.createElement("div"),this.element.className="vditor-resize vditor-resize--"+t.options.resize.position,this.element.innerHTML='<div><svg><use xlink:href="#vditor-icon-resize"></use></svg></div>',this.bindEvent(t)}return e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("mousedown",function(o){var r=document,i=o.clientY,a=t.element.offsetHeight,d=63+t.element.querySelector(".vditor-toolbar").clientHeight;r.ondragstart=function(){return!1},window.captureEvents&&window.captureEvents(),n.element.classList.add("vditor-resize--selected"),r.onmousemove=function(h){t.options.resize.position==="top"?t.element.style.height=Math.max(d,a+(i-h.clientY))+"px":t.element.style.height=Math.max(d,a+(h.clientY-i))+"px",t.options.typewriterMode&&(t.sv.element.style.paddingBottom=t.sv.element.parentElement.offsetHeight/2+"px")},r.onmouseup=function(){t.options.resize.after&&t.options.resize.after(t.element.offsetHeight-a),window.captureEvents&&window.captureEvents(),r.onmousemove=null,r.onmouseup=null,r.ondragstart=null,r.onselectstart=null,r.onselect=null,n.element.classList.remove("vditor-resize--selected")}})},e}(),Wn=function(){function e(t){this.composingLock=!1,this.element=document.createElement("pre"),this.element.className="vditor-sv vditor-reset",this.element.setAttribute("placeholder",t.options.placeholder),this.element.setAttribute("contenteditable","true"),this.element.setAttribute("spellcheck","false"),this.bindEvent(t),bt(t,this.element),yt(t,this.element),xt(t,this.element),_t(t,this.element),wt(t,this.element),kt(t,this.element,this.copy),Et(t,this.element,this.copy)}return e.prototype.copy=function(t,n){t.stopPropagation(),t.preventDefault(),t.clipboardData.setData("text/plain",Qe(n[n.currentMode].element))},e.prototype.bindEvent=function(t){var n=this;this.element.addEventListener("paste",function(o){Lt(t,o,{pasteCode:function(r){document.execCommand("insertHTML",!1,r)}})}),this.element.addEventListener("scroll",function(){if(t.preview.element.style.display==="block"){var o=n.element.scrollTop,r=n.element.clientHeight,i=n.element.scrollHeight-parseFloat(n.element.style.paddingBottom||"0"),a=t.preview.element;a.scrollTop=o/r>.5?(o+r)*a.scrollHeight/i-r:o*a.scrollHeight/i}}),this.element.addEventListener("compositionstart",function(o){n.composingLock=!0}),this.element.addEventListener("compositionend",function(o){Object(b.e)()||te(t,o),n.composingLock=!1}),this.element.addEventListener("input",function(o){o.inputType!=="deleteByDrag"&&o.inputType!=="insertFromDrop"&&(n.composingLock||(n.preventInput?n.preventInput=!1:te(t,o)))}),this.element.addEventListener("keyup",function(o){o.isComposing||Object(b.d)(o)||(o.key!=="Backspace"&&o.key!=="Delete"||t.sv.element.innerHTML===""||t.sv.element.childNodes.length!==1||!t.sv.element.firstElementChild||t.sv.element.firstElementChild.tagName!=="DIV"||t.sv.element.firstElementChild.childElementCount!==2||t.sv.element.firstElementChild.textContent!==""&&t.sv.element.textContent!==`
`?o.key==="Enter"&&be(t):t.sv.element.innerHTML="")})},e}(),Kn=function(){function e(){this.element=document.createElement("div"),this.element.className="vditor-tip"}return e.prototype.show=function(t,n){var o=this;if(n===void 0&&(n=6e3),this.element.className="vditor-tip vditor-tip--show",n===0)return this.element.innerHTML='<div class="vditor-tip__content">'+t+`
<div class="vditor-tip__close">X</div></div>`,void this.element.querySelector(".vditor-tip__close").addEventListener("click",function(){o.hide()});this.element.innerHTML='<div class="vditor-tip__content">'+t+"</div>",setTimeout(function(){o.hide()},n)},e.prototype.hide=function(){this.element.className="vditor-messageElementtip",this.element.innerHTML=""},e}(),Mt=function(e,t){if(t.options.preview.mode!==e){switch(t.options.preview.mode=e,e){case"both":t.sv.element.style.display="block",t.preview.element.style.display="block",t.preview.render(t),_(t.toolbar.elements,["both"]);break;case"editor":t.sv.element.style.display="block",t.preview.element.style.display="none",C(t.toolbar.elements,["both"])}t.devtools&&t.devtools.renderEchart(t)}},Fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gn=function(e){function t(n,o){var r=e.call(this,n,o)||this;return n.options.preview.mode==="both"&&r.element.children[0].classList.add("vditor-menu--current"),r.element.children[0].addEventListener(Object(b.b)(),function(i){r.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)||(i.preventDefault(),n.currentMode==="sv"&&(n.options.preview.mode==="both"?Mt("editor",n):Mt("both",n)))}),r}return Fn(t,e),t}(ve),Zn=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__br"},fn=g(21),Jn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xn=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=r.element.children[0],a=document.createElement("div");a.className="vditor-hint"+(o.level===2?"":" vditor-panel--arrow");var d="";return c.a.CODE_THEME.forEach(function(h){d+="<button>"+h+"</button>"}),a.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+d+"</div>",a.addEventListener(Object(b.b)(),function(h){h.target.tagName==="BUTTON"&&(B(n,["subToolbar"]),n.options.preview.hljs.style=h.target.textContent,Object(fn.a)(h.target.textContent,n.options.cdn),h.preventDefault(),h.stopPropagation())}),r.element.appendChild(a),F(n,a,i,o.level),r}return Jn(t,e),t}(ve),Yn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),$n=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=r.element.children[0],a=document.createElement("div");a.className="vditor-hint"+(o.level===2?"":" vditor-panel--arrow");var d="";return Object.keys(n.options.preview.theme.list).forEach(function(h){d+='<button data-type="'+h+'">'+n.options.preview.theme.list[h]+"</button>"}),a.innerHTML='<div style="overflow: auto;max-height:'+window.innerHeight/2+'px">'+d+"</div>",a.addEventListener(Object(b.b)(),function(h){h.target.tagName==="BUTTON"&&(B(n,["subToolbar"]),n.options.preview.theme.current=h.target.getAttribute("data-type"),Object(vt.a)(n.options.preview.theme.current,n.options.preview.theme.path),h.preventDefault(),h.stopPropagation())}),r.element.appendChild(a),F(n,a,i,o.level),r}return Yn(t,e),t}(ve),Qn=function(){function e(t){this.element=document.createElement("span"),this.element.className="vditor-counter vditor-tooltipped vditor-tooltipped__nw",this.render(t,"")}return e.prototype.render=function(t,n){var o=n.endsWith(`
`)?n.length-1:n.length;if(t.options.counter.type==="text"&&t[t.currentMode]){var r=t[t.currentMode].element.cloneNode(!0);r.querySelectorAll(".vditor-wysiwyg__preview").forEach(function(i){i.remove()}),o=r.textContent.length}typeof t.options.counter.max=="number"?(o>t.options.counter.max?this.element.className="vditor-counter vditor-counter--error":this.element.className="vditor-counter",this.element.innerHTML=o+"/"+t.options.counter.max):this.element.innerHTML=""+o,this.element.setAttribute("aria-label",t.options.counter.type),t.options.counter.after&&t.options.counter.after(o,{enable:t.options.counter.enable,max:t.options.counter.max,type:t.options.counter.type})},e}(),er=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),tr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].innerHTML=o.icon,r.element.children[0].addEventListener(Object(b.b)(),function(i){i.preventDefault(),i.currentTarget.classList.contains(c.a.CLASS_MENU_DISABLED)||o.click(i,n)}),r}return er(t,e),t}(ve),nr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),rr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.firstElementChild.addEventListener(Object(b.b)(),function(i){var a=r.element.firstElementChild;a.classList.contains(c.a.CLASS_MENU_DISABLED)||(i.preventDefault(),a.classList.contains("vditor-menu--current")?(a.classList.remove("vditor-menu--current"),n.devtools.element.style.display="none",je(n)):(a.classList.add("vditor-menu--current"),n.devtools.element.style.display="block",je(n),n.devtools.renderEchart(n)))}),r}return nr(t,e),t}(ve),or=function(){this.element=document.createElement("div"),this.element.className="vditor-toolbar__divider"},ir=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),ar=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=document.createElement("div");i.className="vditor-panel vditor-panel--arrow";var a="";Object.keys(n.options.hint.emoji).forEach(function(h){var m=n.options.hint.emoji[h];m.indexOf(".")>-1?a+='<button data-value=":'+h+': " data-key=":'+h+`:"><img
data-value=":`+h+': " data-key=":'+h+':" class="vditor-emojis__icon" src="'+m+'"/></button>':a+='<button data-value="'+m+` "
 data-key="`+h+'"><span class="vditor-emojis__icon">'+m+"</span></button>"});var d=`<div class="vditor-emojis__tail">
    <span class="vditor-emojis__tip"></span><span>`+(n.options.hint.emojiTail||"")+`</span>
</div>`;return i.innerHTML='<div class="vditor-emojis" style="max-height: '+(n.options.height==="auto"?"auto":n.options.height-80)+'px">'+a+"</div>"+d,r.element.appendChild(i),F(n,i,r.element.children[0],o.level),r._bindEvent(n,i),r}return ir(t,e),t.prototype._bindEvent=function(n,o){o.querySelectorAll(".vditor-emojis button").forEach(function(r){r.addEventListener(Object(b.b)(),function(i){i.preventDefault();var a=r.getAttribute("data-value"),d=Object(E.b)(n[n.currentMode].element),h=a;if(n.currentMode==="wysiwyg"?h=n.lute.SpinVditorDOM(a):n.currentMode==="ir"&&(h=n.lute.SpinVditorIRDOM(a)),a.indexOf(":")>-1&&n.currentMode!=="sv"){var m=document.createElement("div");m.innerHTML=h,h=m.firstElementChild.firstElementChild.outerHTML+" ",Object(E.d)(h,n)}else d.extractContents(),d.insertNode(document.createTextNode(a));d.collapse(!1),Object(E.h)(d),o.style.display="none",ae(n)}),r.addEventListener("mouseover",function(i){i.target.tagName==="BUTTON"&&(o.querySelector(".vditor-emojis__tip").innerHTML=i.target.getAttribute("data-key"))})})},t}(ve),mn=function(e,t,n){var o=document.createElement("a");"download"in o?(o.download=n,o.style.display="none",o.href=URL.createObjectURL(new Blob([t])),document.body.appendChild(o),o.click(),o.remove()):e.tip.show(Z.a[e.options.lang].downloadTip,0)},lr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),sr=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=r.element.children[0],a=document.createElement("div");return a.className="vditor-hint"+(o.level===2?"":" vditor-panel--arrow"),a.innerHTML=`<button data-type="markdown">Markdown</button>
<button data-type="pdf">PDF</button>
<button data-type="html">HTML</button>`,a.addEventListener(Object(b.b)(),function(d){var h=d.target;if(h.tagName==="BUTTON"){switch(h.getAttribute("data-type")){case"markdown":(function(m){var y=p(m);mn(m,y,y.substr(0,10)+".md")})(n);break;case"pdf":(function(m){m.tip.show(Z.a[m.options.lang].generate,3800);var y=document.querySelector("iframe");y.contentDocument.open(),y.contentDocument.write('<link rel="stylesheet" href="'+m.options.cdn+`/dist/index.css"/>
<script src="`+m.options.cdn+`/dist/method.min.js"></script>
<div id="preview"></div>
<script>
window.addEventListener("message", (e) => {
  if(!e.data) {
    return;
  }
  Vditor.preview(document.getElementById('preview'), e.data, {
    markdown: {
      theme: "`+m.options.preview.theme+`"
    },
    hljs: {
      style: "`+m.options.preview.hljs.style+`"
    }
  });
  setTimeout(() => {
        window.print();
    }, 3600);
}, false);
</script>`),y.contentDocument.close(),setTimeout(function(){y.contentWindow.postMessage(p(m),"*")},200)})(n);break;case"html":(function(m){var y=pn(m),T='<html><head><link rel="stylesheet" type="text/css" href="'+m.options.cdn+`/dist/index.css"/>
<script src="`+m.options.cdn+`/dist/method.min.js"></script></head>
<body><div class="vditor-reset" id="preview">`+y+`</div>
<script>
    const previewElement = document.getElementById('preview')
    Vditor.setContentTheme('`+m.options.preview.theme.current+"', '"+m.options.preview.theme.path+`');
    Vditor.codeRender(previewElement, '`+m.options.lang+`');
    Vditor.highlightRender(`+JSON.stringify(m.options.preview.hljs)+", previewElement, '"+m.options.cdn+`');
    Vditor.mathRender(previewElement, {
        cdn: '`+m.options.cdn+`',
        math: `+JSON.stringify(m.options.preview.math)+`,
    });
    Vditor.mermaidRender(previewElement, '`+m.options.cdn+"', '"+m.options.theme+`');
    Vditor.flowchartRender(previewElement, '`+m.options.cdn+`');
    Vditor.graphvizRender(previewElement, '`+m.options.cdn+`');
    Vditor.chartRender(previewElement, '`+m.options.cdn+"', '"+m.options.theme+`');
    Vditor.mindmapRender(previewElement, '`+m.options.cdn+"', '"+m.options.theme+`');
    Vditor.abcRender(previewElement, '`+m.options.cdn+`');
    Vditor.mediaRender(previewElement);
</script></body></html>`;mn(m,T,y.substr(0,10)+".html")})(n)}B(n,["subToolbar"]),d.preventDefault(),d.stopPropagation()}}),r.element.appendChild(a),F(n,a,i,o.level),r}return lr(t,e),t}(ve),cr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),dr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r._bindEvent(n,o),r}return cr(t,e),t.prototype._bindEvent=function(n,o){this.element.children[0].addEventListener(Object(b.b)(),function(r){r.preventDefault(),n.element.className.includes("vditor--fullscreen")?(o.level||(this.innerHTML=o.icon),n.element.style.zIndex="",document.body.style.overflow="",n.element.classList.remove("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(i){var a=n.toolbar.elements[i].firstChild;a&&(a.className=a.className.replace("__s","__n"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__s","__n"))):(o.level||(this.innerHTML='<svg><use xlink:href="#vditor-icon-contract"></use></svg>'),n.element.style.zIndex=n.options.fullscreen.index.toString(),document.body.style.overflow="hidden",n.element.classList.add("vditor--fullscreen"),Object.keys(n.toolbar.elements).forEach(function(i){var a=n.toolbar.elements[i].firstChild;a&&(a.className=a.className.replace("__n","__s"))}),n.counter&&(n.counter.element.className=n.counter.element.className.replace("__n","__s"))),n.devtools&&n.devtools.renderEchart(n),o.click&&o.click(r,n),je(n),ot(n)})},t}(ve),pr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),ur=function(e){function t(n,o){var r=e.call(this,n,o)||this,i=document.createElement("div");return i.className="vditor-hint vditor-panel--arrow",i.innerHTML='<button data-tag="h1" data-value="# ">Heading 1 '+Object(b.g)("&lt;\u2318-\u2325-1>")+`</button>
<button data-tag="h2" data-value="## ">Heading 2 &lt;`+Object(b.g)("\u2318-\u2325-2")+`></button>
<button data-tag="h3" data-value="### ">Heading 3 &lt;`+Object(b.g)("\u2318-\u2325-3")+`></button>
<button data-tag="h4" data-value="#### ">Heading 4 &lt;`+Object(b.g)("\u2318-\u2325-4")+`></button>
<button data-tag="h5" data-value="##### ">Heading 5 &lt;`+Object(b.g)("\u2318-\u2325-5")+`></button>
<button data-tag="h6" data-value="###### ">Heading 6 &lt;`+Object(b.g)("\u2318-\u2325-6")+"></button>",r.element.appendChild(i),r._bindEvent(n,i),r}return pr(t,e),t.prototype._bindEvent=function(n,o){var r=this.element.children[0];r.addEventListener(Object(b.b)(),function(a){a.preventDefault(),r.classList.contains(c.a.CLASS_MENU_DISABLED)||(r.blur(),r.classList.contains("vditor-menu--current")?(n.currentMode==="wysiwyg"?(ht(n),me(n)):n.currentMode==="ir"&&tt(n,""),r.classList.remove("vditor-menu--current")):(B(n,["subToolbar"]),o.style.display="block"))});for(var i=0;i<6;i++)o.children.item(i).addEventListener(Object(b.b)(),function(a){a.preventDefault(),n.currentMode==="wysiwyg"?(it(n,a.target.getAttribute("data-tag")),me(n),r.classList.add("vditor-menu--current")):n.currentMode==="ir"?(tt(n,a.target.getAttribute("data-value")),r.classList.add("vditor-menu--current")):Wt(n,a.target.getAttribute("data-value")),o.style.display="none"})},t}(ve),fr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),mr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener(Object(b.b)(),function(i){i.preventDefault(),n.tip.show(`<div style="margin-bottom:14px;font-size: 14px;line-height: 22px;min-width:300px;max-width: 360px;display: flex;">
<div style="margin-top: 14px;flex: 1">
    <div>Markdown \u4F7F\u7528\u6307\u5357</div>
    <ul style="list-style: none">
        <li><a href="https://ld246.com/article/1583308420519" target="_blank">\u8BED\u6CD5\u901F\u67E5\u624B\u518C</a></li>
        <li><a href="https://ld246.com/article/1583129520165" target="_blank">\u57FA\u7840\u8BED\u6CD5</a></li>
        <li><a href="https://ld246.com/article/1583305480675" target="_blank">\u6269\u5C55\u8BED\u6CD5</a></li>
        <li><a href="https://ld246.com/article/1582778815353" target="_blank">\u952E\u76D8\u5FEB\u6377\u952E</a></li>
    </ul>
</div>
<div style="margin-top: 14px;flex: 1">
    <div>Vditor \u652F\u6301</div>
    <ul style="list-style: none">
        <li><a href="https://github.com/Vanessa219/vditor/issues" target="_blank">Issues</a></li>
        <li><a href="https://ld246.com/tag/vditor" target="_blank">\u5B98\u65B9\u8BA8\u8BBA\u533A</a></li>
        <li><a href="https://ld246.com/article/1549638745630" target="_blank">\u5F00\u53D1\u624B\u518C</a></li>
        <li><a href="https://ld246.com/guide/markdown" target="_blank">\u6F14\u793A\u5730\u5740</a></li>
    </ul>
</div></div>`,0)}),r}return fr(t,e),t}(ve),vr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),hr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener(Object(b.b)(),function(i){if(i.preventDefault(),!r.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)&&n.currentMode!=="sv"){var a=Object(E.b)(n[n.currentMode].element),d=Object(x.f)(a.startContainer,"LI");d&&Jt(n,d,a)}}),r}return vr(t,e),t}(ve),gr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),br=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener(Object(b.b)(),function(i){i.preventDefault(),n.tip.show(`<div style="max-width: 520px; font-size: 14px;line-height: 22px;margin-bottom: 14px;">
<p style="text-align: center;margin: 14px 0">
    <em>\u4E0B\u4E00\u4EE3\u7684 Markdown \u7F16\u8F91\u5668\uFF0C\u4E3A\u672A\u6765\u800C\u6784\u5EFA</em>
</p>
<div style="display: flex;margin-bottom: 14px;flex-wrap: wrap;align-items: center">
    <img src="https://cdn.jsdelivr.net/npm/vditor/src/assets/images/logo.png" style="margin: 0 auto;height: 68px"/>
    <div>&nbsp;&nbsp;</div>
    <div style="flex: 1;min-width: 250px">
        Vditor \u662F\u4E00\u6B3E\u6D4F\u89C8\u5668\u7AEF\u7684 Markdown \u7F16\u8F91\u5668\uFF0C\u652F\u6301\u6240\u89C1\u5373\u6240\u5F97\u3001\u5373\u65F6\u6E32\u67D3\uFF08\u7C7B\u4F3C Typora\uFF09\u548C\u5206\u5C4F\u9884\u89C8\u6A21\u5F0F\u3002
        \u5B83\u4F7F\u7528 TypeScript \u5B9E\u73B0\uFF0C\u652F\u6301\u539F\u751F JavaScript\u3001Vue\u3001React\u3001Angular\uFF0C\u63D0\u4F9B<a target="_blank" href="https://b3log.org/siyuan">\u684C\u9762\u7248</a>\u3002
    </div>
</div>
<div style="display: flex;flex-wrap: wrap;">
    <ul style="list-style: none;flex: 1;min-width:148px">
        <li>
        \u9879\u76EE\u5730\u5740\uFF1A<a href="https://b3log.org/vditor" target="_blank">b3log.org/vditor</a>
        </li>
        <li>
        \u5F00\u6E90\u534F\u8BAE\uFF1AMIT
        </li>
    </ul>
    <ul style="list-style: none;margin-right: 18px">
        <li>
        \u7EC4\u4EF6\u7248\u672C\uFF1AVditor v`+c.b+" / Lute v"+Lute.Version+`
        </li>
        <li>
        \u8D5E\u52A9\u6350\u8D60\uFF1A<a href="https://ld246.com/sponsor" target="_blank">https://ld246.com/sponsor</a>
        </li>
    </ul>
</div>
</div>`,0)}),r}return gr(t,e),t}(ve),yr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),wr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener(Object(b.b)(),function(i){i.preventDefault(),r.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)||n.currentMode==="sv"||ct(n,"afterend")}),r}return yr(t,e),t}(ve),kr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Er=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener(Object(b.b)(),function(i){i.preventDefault(),r.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)||n.currentMode==="sv"||ct(n,"beforebegin")}),r}return kr(t,e),t}(ve),xr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),_r=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r.element.children[0].addEventListener(Object(b.b)(),function(i){if(i.preventDefault(),!r.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)&&n.currentMode!=="sv"){var a=Object(E.b)(n[n.currentMode].element),d=Object(x.f)(a.startContainer,"LI");d&&St(n,d,a,d.parentElement)}}),r}return xr(t,e),t}(ve),Sr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return n.options.outline&&r.element.firstElementChild.classList.add("vditor-menu--current"),r.element.children[0].addEventListener(Object(b.b)(),function(i){i.preventDefault(),n.toolbar.elements.outline.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)||(n.options.outline.enable=!r.element.firstElementChild.classList.contains("vditor-menu--current"),n.outline.toggle(n,n.options.outline.enable))}),r}return Sr(t,e),t}(ve),Or=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r._bindEvent(n),r}return Or(t,e),t.prototype._bindEvent=function(n){var o=this;this.element.children[0].addEventListener(Object(b.b)(),function(r){r.preventDefault();var i=o.element.firstElementChild;if(!i.classList.contains(c.a.CLASS_MENU_DISABLED)){var a=c.a.EDIT_TOOLBARS.concat(["both","edit-mode","devtools"]);i.classList.contains("vditor-menu--current")?(i.classList.remove("vditor-menu--current"),n.currentMode==="sv"?(n.sv.element.style.display="block",n.options.preview.mode==="both"?n.preview.element.style.display="block":n.preview.element.style.display="none"):(n[n.currentMode].element.parentElement.style.display="block",n.preview.element.style.display="none"),S(n.toolbar.elements,a),n.outline.render(n)):(w(n.toolbar.elements,a),n.preview.element.style.display="block",n.currentMode==="sv"?n.sv.element.style.display="none":n[n.currentMode].element.parentElement.style.display="none",n.preview.render(n),i.classList.add("vditor-menu--current"),B(n,["subToolbar","hint","popover"]),setTimeout(function(){n.outline.render(n)},n.options.preview.delay+10)),je(n)}})},t}(ve),Lr=function(){function e(t){var n;if(this.SAMPLE_RATE=5e3,this.isRecording=!1,this.readyFlag=!1,this.leftChannel=[],this.rightChannel=[],this.recordingLength=0,typeof AudioContext!="undefined")n=new AudioContext;else{if(!webkitAudioContext)return;n=new webkitAudioContext}this.DEFAULT_SAMPLE_RATE=n.sampleRate;var o=n.createGain();n.createMediaStreamSource(t).connect(o),this.recorder=n.createScriptProcessor(2048,2,1),this.recorder.onaudioprocess=null,o.connect(this.recorder),this.recorder.connect(n.destination),this.readyFlag=!0}return e.prototype.cloneChannelData=function(t,n){this.leftChannel.push(new Float32Array(t)),this.rightChannel.push(new Float32Array(n)),this.recordingLength+=2048},e.prototype.startRecordingNewWavFile=function(){this.readyFlag&&(this.isRecording=!0,this.leftChannel.length=this.rightChannel.length=0,this.recordingLength=0)},e.prototype.stopRecording=function(){this.isRecording=!1},e.prototype.buildWavFileBlob=function(){for(var t=this.mergeBuffers(this.leftChannel),n=this.mergeBuffers(this.rightChannel),o=new Float32Array(t.length),r=0;r<t.length;++r)o[r]=.5*(t[r]+n[r]);this.DEFAULT_SAMPLE_RATE>this.SAMPLE_RATE&&(o=this.downSampleBuffer(o,this.SAMPLE_RATE));var i=44+2*o.length,a=new ArrayBuffer(i),d=new DataView(a);this.writeUTFBytes(d,0,"RIFF"),d.setUint32(4,i,!0),this.writeUTFBytes(d,8,"WAVE"),this.writeUTFBytes(d,12,"fmt "),d.setUint32(16,16,!0),d.setUint16(20,1,!0),d.setUint16(22,1,!0),d.setUint32(24,this.SAMPLE_RATE,!0),d.setUint32(28,2*this.SAMPLE_RATE,!0),d.setUint16(32,2,!0),d.setUint16(34,16,!0);var h=2*o.length;this.writeUTFBytes(d,36,"data"),d.setUint32(40,h,!0);for(var m=o.length,y=44,T=0;T<m;T++)d.setInt16(y,32767*o[T],!0),y+=2;return new Blob([d],{type:"audio/wav"})},e.prototype.downSampleBuffer=function(t,n){if(n===this.DEFAULT_SAMPLE_RATE||n>this.DEFAULT_SAMPLE_RATE)return t;for(var o=this.DEFAULT_SAMPLE_RATE/n,r=Math.round(t.length/o),i=new Float32Array(r),a=0,d=0;a<i.length;){for(var h=Math.round((a+1)*o),m=0,y=0,T=d;T<h&&T<t.length;T++)m+=t[T],y++;i[a]=m/y,a++,d=h}return i},e.prototype.mergeBuffers=function(t){for(var n=new Float32Array(this.recordingLength),o=0,r=t.length,i=0;i<r;++i){var a=t[i];n.set(a,o),o+=a.length}return n},e.prototype.writeUTFBytes=function(t,n,o){for(var r=o.length,i=0;i<r;i++)t.setUint8(n+i,o.charCodeAt(i))},e}(),Mr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),jr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return r._bindEvent(n),r}return Mr(t,e),t.prototype._bindEvent=function(n){var o,r=this;this.element.children[0].addEventListener(Object(b.b)(),function(i){if(i.preventDefault(),!r.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)){var a=n[n.currentMode].element;if(o)if(o.isRecording){o.stopRecording(),n.tip.hide();var d=new File([o.buildWavFileBlob()],"record"+new Date().getTime()+".wav",{type:"video/webm"});at(n,[d]),r.element.children[0].classList.remove("vditor-menu--current")}else n.tip.show(Z.a[n.options.lang].recording),a.setAttribute("contenteditable","false"),o.startRecordingNewWavFile(),r.element.children[0].classList.add("vditor-menu--current");else navigator.mediaDevices.getUserMedia({audio:!0}).then(function(h){(o=new Lr(h)).recorder.onaudioprocess=function(m){if(o.isRecording){var y=m.inputBuffer.getChannelData(0),T=m.inputBuffer.getChannelData(1);o.cloneChannelData(y,T)}},o.startRecordingNewWavFile(),n.tip.show(Z.a[n.options.lang].recording),a.setAttribute("contenteditable","false"),r.element.children[0].classList.add("vditor-menu--current")}).catch(function(){n.tip.show(Z.a[n.options.lang]["record-tip"])})}})},t}(ve),Ar=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Hr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return w({redo:r.element},["redo"]),r.element.children[0].addEventListener(Object(b.b)(),function(i){i.preventDefault(),r.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)||n.undo.redo(n)}),r}return Ar(t,e),t}(ve),Nr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dr=function(e){function t(n,o){var r=e.call(this,n,o)||this;return w({undo:r.element},["undo"]),r.element.children[0].addEventListener(Object(b.b)(),function(i){i.preventDefault(),r.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED)||n.undo.undo(n)}),r}return Nr(t,e),t}(ve),Ir=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rr=function(e){function t(n,o){var r=e.call(this,n,o)||this,i='<input type="file"';return n.options.upload.multiple&&(i+=' multiple="multiple"'),n.options.upload.accept&&(i+=' accept="'+n.options.upload.accept+'"'),r.element.children[0].innerHTML=""+(o.icon||'<svg><use xlink:href="#vditor-icon-upload"></use></svg>')+i+">",r._bindEvent(n),r}return Ir(t,e),t.prototype._bindEvent=function(n){var o=this;this.element.children[0].addEventListener(Object(b.b)(),function(r){if(o.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED))return r.stopPropagation(),void r.preventDefault()}),this.element.querySelector("input").addEventListener("change",function(r){if(o.element.firstElementChild.classList.contains(c.a.CLASS_MENU_DISABLED))return r.stopPropagation(),void r.preventDefault();r.target.files.length!==0&&at(n,r.target.files,r.target)})},t}(ve),Pr=function(){function e(t){var n=this,o=t.options;this.elements={},this.element=document.createElement("div"),this.element.className="vditor-toolbar",o.toolbar.forEach(function(r,i){var a=n.genItem(t,r,i);if(n.element.appendChild(a),r.toolbar){var d=document.createElement("div");d.className="vditor-hint vditor-panel--arrow",d.addEventListener(Object(b.b)(),function(h){d.style.display="none"}),r.toolbar.forEach(function(h,m){h.level=2,d.appendChild(n.genItem(t,h,i+m))}),a.appendChild(d),F(t,d,a.children[0])}}),t.options.toolbarConfig.hide&&this.element.classList.add("vditor-toolbar--hide"),t.options.toolbarConfig.pin&&this.element.classList.add("vditor-toolbar--pin"),t.options.counter.enable&&(t.counter=new Qn(t),this.element.appendChild(t.counter.element))}return e.prototype.genItem=function(t,n,o){var r;switch(n.name){case"bold":case"italic":case"more":case"strike":case"line":case"quote":case"list":case"ordered-list":case"check":case"code":case"inline-code":case"link":case"table":r=new ve(t,n);break;case"emoji":r=new ar(t,n);break;case"headings":r=new ur(t,n);break;case"|":r=new or;break;case"br":r=new Zn;break;case"undo":r=new Dr(t,n);break;case"redo":r=new Hr(t,n);break;case"help":r=new mr(t,n);break;case"both":r=new Gn(t,n);break;case"preview":r=new Tr(t,n);break;case"fullscreen":r=new dr(t,n);break;case"upload":r=new Rr(t,n);break;case"record":r=new jr(t,n);break;case"info":r=new br(t,n);break;case"edit-mode":r=new Sn(t,n);break;case"devtools":r=new rr(t,n);break;case"outdent":r=new _r(t,n);break;case"indent":r=new hr(t,n);break;case"outline":r=new Cr(t,n);break;case"insert-after":r=new wr(t,n);break;case"insert-before":r=new Er(t,n);break;case"code-theme":r=new Xn(t,n);break;case"content-theme":r=new $n(t,n);break;case"export":r=new sr(t,n);break;default:r=new tr(t,n)}if(r){var i=n.name;return i!=="br"&&i!=="|"||(i+=o),this.elements[i]=r.element,r.element}},e}(),Br=g(26),qr=g.n(Br),Ur=function(){function e(){this.stackSize=50,this.resetStack(),this.dmp=new qr.a}return e.prototype.clearStack=function(t){this.resetStack(),this.resetIcon(t)},e.prototype.resetIcon=function(t){t.toolbar&&(this[t.currentMode].undoStack.length>1?S(t.toolbar.elements,["undo"]):w(t.toolbar.elements,["undo"]),this[t.currentMode].redoStack.length!==0?S(t.toolbar.elements,["redo"]):w(t.toolbar.elements,["redo"]))},e.prototype.undo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"&&!(this[t.currentMode].undoStack.length<2)){var n=this[t.currentMode].undoStack.pop();n&&(this[t.currentMode].redoStack.push(n),this.renderDiff(n,t),this[t.currentMode].hasUndo=!0,B(t,["hint"]))}},e.prototype.redo=function(t){if(t[t.currentMode].element.getAttribute("contenteditable")!=="false"){var n=this[t.currentMode].redoStack.pop();n&&(this[t.currentMode].undoStack.push(n),this.renderDiff(n,t,!0))}},e.prototype.recordFirstPosition=function(t,n){if(getSelection().rangeCount!==0&&!(this[t.currentMode].undoStack.length!==1||this[t.currentMode].undoStack[0].length===0||this[t.currentMode].redoStack.length>0||Object(b.e)()&&n.key==="Backspace"||Object(b.f)())){var o=this.addCaret(t);o.replace("<wbr>","").replace(" vditor-ir__node--expand","")===this[t.currentMode].undoStack[0][0].diffs[0][1].replace("<wbr>","")&&(this[t.currentMode].undoStack[0][0].diffs[0][1]=o,this[t.currentMode].lastText=o)}},e.prototype.addToUndoStack=function(t){var n=this.addCaret(t,!0),o=this.dmp.diff_main(n,this[t.currentMode].lastText,!0),r=this.dmp.patch_make(n,this[t.currentMode].lastText,o);r.length===0&&this[t.currentMode].undoStack.length>0||(this[t.currentMode].lastText=n,this[t.currentMode].undoStack.push(r),this[t.currentMode].undoStack.length>this.stackSize&&this[t.currentMode].undoStack.shift(),this[t.currentMode].hasUndo&&(this[t.currentMode].redoStack=[],this[t.currentMode].hasUndo=!1,w(t.toolbar.elements,["redo"])),this[t.currentMode].undoStack.length>1&&S(t.toolbar.elements,["undo"]))},e.prototype.renderDiff=function(t,n,o){var r;if(o===void 0&&(o=!1),o){var i=this.dmp.patch_deepCopy(t).reverse();i.forEach(function(d){d.diffs.forEach(function(h){h[0]=-h[0]})}),r=this.dmp.patch_apply(i,this[n.currentMode].lastText)[0]}else r=this.dmp.patch_apply(t,this[n.currentMode].lastText)[0];if(this[n.currentMode].lastText=r,n[n.currentMode].element.innerHTML=r,n.currentMode!=="sv"&&n[n.currentMode].element.querySelectorAll(".vditor-"+n.currentMode+"__preview[data-render='2']").forEach(function(d){ie(d,n)}),n[n.currentMode].element.querySelector("wbr"))Object(E.f)(n[n.currentMode].element,n[n.currentMode].element.ownerDocument.createRange()),be(n);else{var a=getSelection().getRangeAt(0);a.setEndBefore(n[n.currentMode].element),a.collapse(!1)}ae(n,{enableAddUndoStack:!1,enableHint:!1,enableInput:!0}),Ve(n),n[n.currentMode].element.querySelectorAll(".vditor-"+n.currentMode+"__preview[data-render='2']").forEach(function(d){ie(d,n)}),this[n.currentMode].undoStack.length>1?S(n.toolbar.elements,["undo"]):w(n.toolbar.elements,["undo"]),this[n.currentMode].redoStack.length!==0?S(n.toolbar.elements,["redo"]):w(n.toolbar.elements,["redo"])},e.prototype.resetStack=function(){this.ir={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.sv={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]},this.wysiwyg={hasUndo:!1,lastText:"",redoStack:[],undoStack:[]}},e.prototype.addCaret=function(t,n){var o;if(n===void 0&&(n=!1),getSelection().rangeCount!==0&&!t[t.currentMode].element.querySelector("wbr")){var r=getSelection().getRangeAt(0);if(t[t.currentMode].element.contains(r.startContainer)){o=r.cloneRange();var i=document.createElement("span");i.className="vditor-wbr",r.insertNode(i)}}t.ir.element.cloneNode(!0).querySelectorAll(".vditor-"+t.currentMode+"__preview[data-render='1']").forEach(function(d){(d.firstElementChild.classList.contains("language-echarts")||d.firstElementChild.classList.contains("language-mindmap"))&&(d.firstElementChild.removeAttribute("_echarts_instance_"),d.firstElementChild.removeAttribute("data-processed"),d.firstElementChild.innerHTML=d.previousElementSibling.firstElementChild.innerHTML,d.setAttribute("data-render","2")),d.firstElementChild.classList.contains("language-math")&&(d.setAttribute("data-render","2"),d.firstElementChild.textContent=d.firstElementChild.getAttribute("data-math"),d.firstElementChild.removeAttribute("data-math"))});var a=t[t.currentMode].element.innerHTML;return t[t.currentMode].element.querySelectorAll(".vditor-wbr").forEach(function(d){d.remove()}),n&&o&&Object(E.h)(o),a.replace('<span class="vditor-wbr"></span>',"<wbr>")},e}(),zr=g(23),Vr=function(){function e(t){this.defaultOptions={after:void 0,cache:{enable:!0},cdn:c.a.CDN,classes:{preview:""},comment:{enable:!1},counter:{enable:!1,type:"markdown"},debugger:!1,fullscreen:{index:90},height:"auto",hint:{delay:200,emoji:{"+1":"\u{1F44D}","-1":"\u{1F44E}",confused:"\u{1F615}",eyes:"\u{1F440}\uFE0F",heart:"\u2764\uFE0F",rocket:"\u{1F680}\uFE0F",smile:"\u{1F604}",tada:"\u{1F389}\uFE0F"},emojiPath:c.a.CDN+"/dist/images/emoji",extend:[]},icon:"ant",lang:"zh_CN",mode:"ir",outline:{enable:!1,position:"left"},placeholder:"",preview:{actions:["desktop","tablet","mobile","mp-wechat","zhihu"],delay:1e3,hljs:c.a.HLJS_OPTIONS,markdown:c.a.MARKDOWN_OPTIONS,math:c.a.MATH_OPTIONS,maxWidth:800,mode:"both",theme:c.a.THEME_OPTIONS},resize:{enable:!1,position:"bottom"},theme:"classic",toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","record","table","|","undo","redo","|","fullscreen","edit-mode",{name:"more",toolbar:["both","code-theme","content-theme","export","outline","preview","devtools","info","help"]}],toolbarConfig:{hide:!1,pin:!1},typewriterMode:!1,undoDelay:800,upload:{extraData:{},fieldName:"file[]",filename:function(n){return n.replace(/\W/g,"")},linkToImgUrl:"",max:10485760,multiple:!0,url:"",withCredentials:!1},value:"",width:"auto"},this.options=t}return e.prototype.merge=function(){var t,n,o;this.options&&(this.options.toolbar?this.options.toolbar=this.mergeToolbar(this.options.toolbar):this.options.toolbar=this.mergeToolbar(this.defaultOptions.toolbar),((n=(t=this.options.preview)===null||t===void 0?void 0:t.theme)===null||n===void 0?void 0:n.list)&&(this.defaultOptions.preview.theme.list=this.options.preview.theme.list),((o=this.options.hint)===null||o===void 0?void 0:o.emoji)&&(this.defaultOptions.hint.emoji=this.options.hint.emoji),this.options.comment&&(this.defaultOptions.comment=this.options.comment));var r=Object(zr.a)(this.defaultOptions,this.options);if(r.cache.enable&&!r.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");return r},e.prototype.mergeToolbar=function(t){var n=this,o=[{icon:'<svg><use xlink:href="#vditor-icon-export"></use></svg>',name:"export",tipPosition:"ne"},{hotkey:"\u2318-E",icon:'<svg><use xlink:href="#vditor-icon-emoji"></use></svg>',name:"emoji",tipPosition:"ne"},{hotkey:"\u2318-H",icon:'<svg><use xlink:href="#vditor-icon-headings"></use></svg>',name:"headings",tipPosition:"ne"},{hotkey:"\u2318-B",icon:'<svg><use xlink:href="#vditor-icon-bold"></use></svg>',name:"bold",prefix:"**",suffix:"**",tipPosition:"ne"},{hotkey:"\u2318-I",icon:'<svg><use xlink:href="#vditor-icon-italic"></use></svg>',name:"italic",prefix:"*",suffix:"*",tipPosition:"ne"},{hotkey:"\u2318-D",icon:'<svg><use xlink:href="#vditor-icon-strike"></use></svg>',name:"strike",prefix:"~~",suffix:"~~",tipPosition:"ne"},{hotkey:"\u2318-K",icon:'<svg><use xlink:href="#vditor-icon-link"></use></svg>',name:"link",prefix:"[",suffix:"](https://)",tipPosition:"n"},{name:"|"},{hotkey:"\u2318-L",icon:'<svg><use xlink:href="#vditor-icon-list"></use></svg>',name:"list",prefix:"* ",tipPosition:"n"},{hotkey:"\u2318-O",icon:'<svg><use xlink:href="#vditor-icon-ordered-list"></use></svg>',name:"ordered-list",prefix:"1. ",tipPosition:"n"},{hotkey:"\u2318-J",icon:'<svg><use xlink:href="#vditor-icon-check"></use></svg>',name:"check",prefix:"* [ ] ",tipPosition:"n"},{hotkey:"\u2318-\u21E7-I",icon:'<svg><use xlink:href="#vditor-icon-outdent"></use></svg>',name:"outdent",tipPosition:"n"},{hotkey:"\u2318-\u21E7-O",icon:'<svg><use xlink:href="#vditor-icon-indent"></use></svg>',name:"indent",tipPosition:"n"},{name:"|"},{hotkey:"\u2318-;",icon:'<svg><use xlink:href="#vditor-icon-quote"></use></svg>',name:"quote",prefix:"> ",tipPosition:"n"},{hotkey:"\u2318-\u21E7-H",icon:'<svg><use xlink:href="#vditor-icon-line"></use></svg>',name:"line",prefix:"---",tipPosition:"n"},{hotkey:"\u2318-U",icon:'<svg><use xlink:href="#vditor-icon-code"></use></svg>',name:"code",prefix:"```",suffix:"\n```",tipPosition:"n"},{hotkey:"\u2318-G",icon:'<svg><use xlink:href="#vditor-icon-inline-code"></use></svg>',name:"inline-code",prefix:"`",suffix:"`",tipPosition:"n"},{hotkey:"\u2318-\u21E7-B",icon:'<svg><use xlink:href="#vditor-icon-before"></use></svg>',name:"insert-before",tipPosition:"n"},{hotkey:"\u2318-\u21E7-E",icon:'<svg><use xlink:href="#vditor-icon-after"></use></svg>',name:"insert-after",tipPosition:"n"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-upload"></use></svg>',name:"upload",tipPosition:"n"},{icon:'<svg><use xlink:href="#vditor-icon-record"></use></svg>',name:"record",tipPosition:"n"},{hotkey:"\u2318-M",icon:'<svg><use xlink:href="#vditor-icon-table"></use></svg>',name:"table",prefix:"| col1",suffix:` | col2 | col3 |
| --- | --- | --- |
|  |  |  |
|  |  |  |`,tipPosition:"n"},{name:"|"},{hotkey:"\u2318-Z",icon:'<svg><use xlink:href="#vditor-icon-undo"></use></svg>',name:"undo",tipPosition:"nw"},{hotkey:"\u2318-Y",icon:'<svg><use xlink:href="#vditor-icon-redo"></use></svg>',name:"redo",tipPosition:"nw"},{name:"|"},{icon:'<svg><use xlink:href="#vditor-icon-more"></use></svg>',name:"more",tipPosition:"e"},{hotkey:"\u2318-'",icon:'<svg><use xlink:href="#vditor-icon-fullscreen"></use></svg>',name:"fullscreen",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-edit"></use></svg>',name:"edit-mode",tipPosition:"nw"},{hotkey:"\u2318-P",icon:'<svg><use xlink:href="#vditor-icon-both"></use></svg>',name:"both",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-preview"></use></svg>',name:"preview",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-align-center"></use></svg>',name:"outline",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-theme"></use></svg>',name:"content-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-code-theme"></use></svg>',name:"code-theme",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-bug"></use></svg>',name:"devtools",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-info"></use></svg>',name:"info",tipPosition:"nw"},{icon:'<svg><use xlink:href="#vditor-icon-help"></use></svg>',name:"help",tipPosition:"nw"},{name:"br"}],r=[];return t.forEach(function(i){var a=i;o.forEach(function(d){typeof i=="string"&&d.name===i&&(a=d),typeof i=="object"&&d.name===i.name&&(a=Object.assign({},d,i))}),i.toolbar&&(a.toolbar=n.mergeToolbar(i.toolbar)),r.push(a)}),r},e}(),Wr=function(){function e(t){var n=this;this.composingLock=!1,this.commentIds=[];var o=document.createElement("div");o.className="vditor-wysiwyg",o.innerHTML='<pre class="vditor-reset" placeholder="'+t.options.placeholder+`"
 contenteditable="true" spellcheck="false"></pre>
<div class="vditor-panel vditor-panel--none"></div>
<div class="vditor-panel vditor-panel--none">
    <button type="button" aria-label="`+Z.a[t.options.lang].comment+`" class="vditor-icon vditor-tooltipped vditor-tooltipped__n">
        <svg><use xlink:href="#vditor-icon-comment"></use></svg>
    </button>
</div>`,this.element=o.firstElementChild,this.popover=o.firstElementChild.nextElementSibling,this.selectPopover=o.lastElementChild,this.bindEvent(t),bt(t,this.element),Ut(t,this.element),yt(t,this.element),xt(t,this.element),_t(t,this.element),wt(t,this.element),kt(t,this.element,this.copy),Et(t,this.element,this.copy),t.options.comment.enable&&(this.selectPopover.querySelector("button").onclick=function(){var r,i,a=Lute.NewNodeID(),d=getSelection().getRangeAt(0),h=d.cloneRange(),m=d.extractContents(),y=!1,T=!1;m.childNodes.forEach(function(O,A){var V=!1;if(O.nodeType===3?V=!0:O.classList.contains("vditor-comment")?O.classList.contains("vditor-comment")&&O.setAttribute("data-cmtids",O.getAttribute("data-cmtids")+" "+a):V=!0,V)if(O.nodeType!==3&&O.getAttribute("data-block")==="0"&&A===0&&h.startOffset>0)O.innerHTML='<span class="vditor-comment" data-cmtids="'+a+'">'+O.innerHTML+"</span>",r=O;else if(O.nodeType!==3&&O.getAttribute("data-block")==="0"&&A===m.childNodes.length-1&&h.endOffset<h.endContainer.textContent.length)O.innerHTML='<span class="vditor-comment" data-cmtids="'+a+'">'+O.innerHTML+"</span>",i=O;else if(O.nodeType!==3&&O.getAttribute("data-block")==="0")A===0?y=!0:A===m.childNodes.length-1&&(T=!0),O.innerHTML='<span class="vditor-comment" data-cmtids="'+a+'">'+O.innerHTML+"</span>";else{var N=document.createElement("span");N.classList.add("vditor-comment"),N.setAttribute("data-cmtids",a),O.parentNode.insertBefore(N,O),N.appendChild(O)}});var j=Object(x.c)(h.startContainer);j&&(r?(j.insertAdjacentHTML("beforeend",r.innerHTML),r.remove()):j.textContent.trim().replace(c.a.ZWSP,"")===""&&y&&j.remove());var I=Object(x.c)(h.endContainer);I&&(i?(I.insertAdjacentHTML("afterbegin",i.innerHTML),i.remove()):I.textContent.trim().replace(c.a.ZWSP,"")===""&&T&&I.remove()),d.insertNode(m),t.options.comment.add(a,d.toString(),n.getComments(t,!0)),me(t,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}),n.hideComment()})}return e.prototype.getComments=function(t,n){var o=this;if(n===void 0&&(n=!1),t.currentMode!=="wysiwyg"||!t.options.comment.enable)return[];this.commentIds=[],this.element.querySelectorAll(".vditor-comment").forEach(function(i){o.commentIds=o.commentIds.concat(i.getAttribute("data-cmtids").split(" "))}),this.commentIds=Array.from(new Set(this.commentIds));var r=[];return n?(this.commentIds.forEach(function(i){r.push({id:i,top:o.element.querySelector('.vditor-comment[data-cmtids="'+i+'"]').offsetTop})}),r):void 0},e.prototype.triggerRemoveComment=function(t){var n,o,r;if(t.currentMode==="wysiwyg"&&t.options.comment.enable&&t.wysiwyg.commentIds.length>0){var i=JSON.parse(JSON.stringify(this.commentIds));this.getComments(t);var a=(n=i,o=this.commentIds,r=new Set(o),n.filter(function(d){return!r.has(d)}));a.length>0&&t.options.comment.remove(a)}},e.prototype.showComment=function(){var t=Object(E.a)(this.element);this.selectPopover.setAttribute("style","left:"+t.left+"px;display:block;top:"+Math.max(-8,t.top-21)+"px")},e.prototype.hideComment=function(){this.selectPopover.setAttribute("style","display:none")},e.prototype.copy=function(t,n){var o=getSelection().getRangeAt(0);if(o.toString()!==""){t.stopPropagation(),t.preventDefault();var r=Object(x.f)(o.startContainer,"CODE"),i=Object(x.f)(o.endContainer,"CODE");if(r&&i&&i.isSameNode(r)){var a="";return a=r.parentElement.tagName==="PRE"?o.toString():"`"+o.toString()+"`",t.clipboardData.setData("text/plain",a),void t.clipboardData.setData("text/html","")}var d=Object(x.f)(o.startContainer,"A"),h=Object(x.f)(o.endContainer,"A");if(d&&h&&h.isSameNode(d)){var m=d.getAttribute("title")||"";return m&&(m=' "'+m+'"'),t.clipboardData.setData("text/plain","["+o.toString()+"]("+d.getAttribute("href")+m+")"),void t.clipboardData.setData("text/html","")}var y=document.createElement("div");y.appendChild(o.cloneContents()),t.clipboardData.setData("text/plain",n.lute.VditorDOM2Md(y.innerHTML).trim()),t.clipboardData.setData("text/html","")}},e.prototype.bindEvent=function(t){var n=this;window.addEventListener("scroll",function(){if(B(t,["hint"]),n.popover.style.display==="block"&&n.selectPopover.style.display==="block"){var o=parseInt(n.popover.getAttribute("data-top"),10);if(t.options.height==="auto"){if(t.options.toolbarConfig.pin){var r=Math.max(o,window.scrollY-t.element.offsetTop-8)+"px";n.popover.style.display==="block"&&(n.popover.style.top=r),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=r)}}else if(t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0){var i=Math.max(window.scrollY-t.element.offsetTop-8,Math.min(o-t.wysiwyg.element.scrollTop,n.element.clientHeight-21))+"px";n.popover.style.display==="block"&&(n.popover.style.top=i),n.selectPopover.style.display==="block"&&(n.selectPopover.style.top=i)}}}),this.element.addEventListener("scroll",function(){if(B(t,["hint"]),t.options.comment&&t.options.comment.enable&&t.options.comment.scroll&&t.options.comment.scroll(t.wysiwyg.element.scrollTop),n.popover.style.display==="block"){var o=parseInt(n.popover.getAttribute("data-top"),10)-t.wysiwyg.element.scrollTop,r=-8;t.options.toolbarConfig.pin&&t.toolbar.element.getBoundingClientRect().top===0&&(r=window.scrollY-t.element.offsetTop+r);var i=Math.max(r,Math.min(o,n.element.clientHeight-21))+"px";n.popover.style.top=i,n.selectPopover.style.top=i}}),this.element.addEventListener("paste",function(o){Lt(t,o,{pasteCode:function(r){var i=Object(E.b)(n.element),a=document.createElement("template");a.innerHTML=r,i.insertNode(a.content.cloneNode(!0));var d=Object(x.d)(i.startContainer,"data-block","0");d?d.outerHTML=t.lute.SpinVditorDOM(d.outerHTML):t.wysiwyg.element.innerHTML=t.lute.SpinVditorDOM(t.wysiwyg.element.innerHTML),Object(E.f)(t.wysiwyg.element,i)}})}),this.element.addEventListener("compositionstart",function(){n.composingLock=!0}),this.element.addEventListener("compositionend",function(o){var r=Object($.a)(getSelection().getRangeAt(0).startContainer);r&&r.textContent===""?z(t):(Object(b.e)()||st(t,getSelection().getRangeAt(0).cloneRange(),o),n.composingLock=!1)}),this.element.addEventListener("input",function(o){if(o.inputType!=="deleteByDrag"&&o.inputType!=="insertFromDrop"){if(n.preventInput)n.preventInput=!1;else if(!n.composingLock){var r=getSelection().getRangeAt(0),i=Object(x.c)(r.startContainer);if(i||(It(t,r),i=Object(x.c)(r.startContainer)),i){for(var a=Object(E.c)(i,t.wysiwyg.element,r).start,d=!0,h=a-1;h>i.textContent.substr(0,a).lastIndexOf(`
`);h--)if(i.textContent.charAt(h)!==" "&&i.textContent.charAt(h)!=="	"){d=!1;break}a===0&&(d=!1);var m=!0;for(h=a-1;h<i.textContent.length;h++)if(i.textContent.charAt(h)!==" "&&i.textContent.charAt(h)!==`
`){m=!1;break}var y=Object($.a)(getSelection().getRangeAt(0).startContainer);y&&y.textContent===""&&(z(t),y.remove()),d&&i.getAttribute("data-type")!=="code-block"||m||Ot(i.innerHTML)||Ct(i.innerHTML)&&i.previousElementSibling||st(t,r,o)}}}}),this.element.addEventListener("click",function(o){if(o.target.tagName==="INPUT"){var r=o.target;return r.checked?r.setAttribute("checked","checked"):r.removeAttribute("checked"),n.preventInput=!0,void me(t)}if(o.target.tagName!=="IMG"){var i=Object(E.b)(n.element);if(o.target.isEqualNode(n.element)&&n.element.lastElementChild&&i.collapsed){var a=n.element.lastElementChild.getBoundingClientRect();o.y>a.top+a.height&&(n.element.lastElementChild.tagName==="P"&&n.element.lastElementChild.textContent.trim().replace(c.a.ZWSP,"")===""?(i.selectNodeContents(n.element.lastElementChild),i.collapse(!1)):(n.element.insertAdjacentHTML("beforeend",'<p data-block="0">'+c.a.ZWSP+"<wbr></p>"),Object(E.f)(n.element,i)))}Re(t);var d=Object(x.e)(o.target,"vditor-wysiwyg__preview");d||(d=Object(x.e)(Object(E.b)(n.element).startContainer,"vditor-wysiwyg__preview")),d&&Ye(d,t),W(o,t)}else o.target.getAttribute("data-type")==="link-ref"?Rt(t,o.target):function(h,m){var y=h.target;m.wysiwyg.popover.innerHTML="";var T=function(){y.setAttribute("src",I.value),y.setAttribute("alt",A.value),y.setAttribute("title",N.value)},j=document.createElement("span");j.setAttribute("aria-label",Z.a[m.options.lang].imageURL),j.className="vditor-tooltipped vditor-tooltipped__n";var I=document.createElement("input");j.appendChild(I),I.className="vditor-input",I.setAttribute("placeholder",Z.a[m.options.lang].imageURL),I.value=y.getAttribute("src")||"",I.oninput=function(){T()},I.onkeydown=function(P){Oe(m,P)};var O=document.createElement("span");O.setAttribute("aria-label",Z.a[m.options.lang].alternateText),O.className="vditor-tooltipped vditor-tooltipped__n";var A=document.createElement("input");O.appendChild(A),A.className="vditor-input",A.setAttribute("placeholder",Z.a[m.options.lang].alternateText),A.style.width="52px",A.value=y.getAttribute("alt")||"",A.oninput=function(){T()},A.onkeydown=function(P){Oe(m,P)};var V=document.createElement("span");V.setAttribute("aria-label",Z.a[m.options.lang].title),V.className="vditor-tooltipped vditor-tooltipped__n";var N=document.createElement("input");V.appendChild(N),N.className="vditor-input",N.setAttribute("placeholder",Z.a[m.options.lang].title),N.value=y.getAttribute("title")||"",N.oninput=function(){T()},N.onkeydown=function(P){Oe(m,P)},Me(y,m),m.wysiwyg.popover.insertAdjacentElement("beforeend",j),m.wysiwyg.popover.insertAdjacentElement("beforeend",O),m.wysiwyg.popover.insertAdjacentElement("beforeend",V),Le(m,y)}(o,t)}),this.element.addEventListener("keyup",function(o){if(!o.isComposing&&!Object(b.d)(o)){o.key==="Enter"&&be(t),o.key!=="Backspace"&&o.key!=="Delete"||t.wysiwyg.element.innerHTML===""||t.wysiwyg.element.childNodes.length!==1||!t.wysiwyg.element.firstElementChild||t.wysiwyg.element.firstElementChild.tagName!=="P"||t.wysiwyg.element.firstElementChild.childElementCount!==0||t.wysiwyg.element.textContent!==""&&t.wysiwyg.element.textContent!==`
`||(t.wysiwyg.element.innerHTML="");var r=Object(E.b)(n.element);if(o.key==="Backspace"&&Object(b.e)()&&r.startContainer.textContent===`
`&&r.startOffset===1&&(r.startContainer.textContent=""),It(t,r),Re(t),o.key==="ArrowDown"||o.key==="ArrowRight"||o.key==="Backspace"||o.key==="ArrowLeft"||o.key==="ArrowUp"){o.key!=="ArrowLeft"&&o.key!=="ArrowRight"||t.hint.render(t);var i=Object(x.e)(r.startContainer,"vditor-wysiwyg__preview");if(!i&&r.startContainer.nodeType!==3&&r.startOffset>0&&(d=r.startContainer).classList.contains("vditor-wysiwyg__block")&&(i=d.lastElementChild),i)if(i.previousElementSibling.style.display!=="none"){var a=i.previousElementSibling;if(a.tagName==="PRE"&&(a=a.firstElementChild),o.key==="ArrowDown"||o.key==="ArrowRight"){var d,h=function(y){for(var T=y;T&&!T.nextSibling;)T=T.parentElement;return T.nextSibling}(d=i.parentElement);if(h&&h.nodeType!==3){var m=h.querySelector(".vditor-wysiwyg__preview");if(m)return void Ye(m,t)}if(h.nodeType===3){for(;h.textContent.length===0&&h.nextSibling;)h=h.nextSibling;r.setStart(h,1)}else r.setStart(h.firstChild,0)}else r.selectNodeContents(a),r.collapse(!1)}else o.key==="ArrowDown"||o.key==="ArrowRight"?Ye(i,t):Ye(i,t,!1)}}})},e}(),Kr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fr=function(e){function t(n,o){var r=e.call(this)||this;r.version=c.b,typeof n=="string"&&(o?o.cache?o.cache.id||(o.cache.id="vditor"+n):o.cache={id:"vditor"+n}:o={cache:{id:"vditor"+n}},n=document.getElementById(n));var i=new Vr(o).merge();if(!["en_US","ja_JP","ko_KR","zh_CN"].includes(i.lang))throw new Error("options.lang error, see https://ld246.com/article/1549638745630#options");return r.vditor={currentMode:i.mode,element:n,hint:new Rn(i.hint.extend),lute:void 0,options:i,originalInnerHTML:n.innerHTML,outline:new qn(Z.a[i.lang].outline),tip:new Kn},r.vditor.sv=new Wn(r.vditor),r.vditor.undo=new Ur,r.vditor.wysiwyg=new Wr(r.vditor),r.vditor.ir=new Pn(r.vditor),r.vditor.toolbar=new Pr(r.vditor),i.resize.enable&&(r.vditor.resize=new Vn(r.vditor)),r.vditor.toolbar.elements.devtools&&(r.vditor.devtools=new k),(i.upload.url||i.upload.handler)&&(r.vditor.upload=new Tn),Object(f.a)(o._lutePath||i.cdn+"/dist/js/lute/lute.min.js","vditorLuteScript").then(function(){r.vditor.lute=Object(Bn.a)({autoSpace:r.vditor.options.preview.markdown.autoSpace,codeBlockPreview:r.vditor.options.preview.markdown.codeBlockPreview,emojiSite:r.vditor.options.hint.emojiPath,emojis:r.vditor.options.hint.emoji,fixTermTypo:r.vditor.options.preview.markdown.fixTermTypo,footnotes:r.vditor.options.preview.markdown.footnotes,headingAnchor:!1,inlineMathDigit:r.vditor.options.preview.math.inlineDigit,linkBase:r.vditor.options.preview.markdown.linkBase,linkPrefix:r.vditor.options.preview.markdown.linkPrefix,listStyle:r.vditor.options.preview.markdown.listStyle,mark:r.vditor.options.preview.markdown.mark,mathBlockPreview:r.vditor.options.preview.markdown.mathBlockPreview,paragraphBeginningSpace:r.vditor.options.preview.markdown.paragraphBeginningSpace,sanitize:r.vditor.options.preview.markdown.sanitize,toc:r.vditor.options.preview.markdown.toc}),r.vditor.preview=new zn(r.vditor),function(a){a.element.innerHTML="",a.element.classList.add("vditor"),Ht(a),Object(vt.a)(a.options.preview.theme.current,a.options.preview.theme.path),typeof a.options.height=="number"&&(a.element.style.height=a.options.height+"px"),typeof a.options.minHeight=="number"&&(a.element.style.minHeight=a.options.minHeight+"px"),typeof a.options.width=="number"?a.element.style.width=a.options.width+"px":a.element.style.width=a.options.width,a.element.appendChild(a.toolbar.element);var d=document.createElement("div");if(d.className="vditor-content",a.options.outline.position==="left"&&d.appendChild(a.outline.element),d.appendChild(a.wysiwyg.element.parentElement),d.appendChild(a.sv.element),d.appendChild(a.ir.element.parentElement),d.appendChild(a.preview.element),a.toolbar.elements.devtools&&d.appendChild(a.devtools.element),a.options.outline.position==="right"&&(a.outline.element.classList.add("vditor-outline--right"),d.appendChild(a.outline.element)),a.upload&&d.appendChild(a.upload.element),a.options.resize.enable&&d.appendChild(a.resize.element),d.appendChild(a.hint.element),d.appendChild(a.tip.element),a.element.appendChild(d),a.toolbar.elements.export&&a.element.insertAdjacentHTML("beforeend",'<iframe style="width: 100%;height: 0;border: 0"></iframe>'),Pe(a,a.options.mode,En(a)),document.execCommand("DefaultParagraphSeparator",!1,"p"),navigator.userAgent.indexOf("iPhone")>-1&&window.visualViewport!==void 0){var h=!1,m=function(y){h||(h=!0,requestAnimationFrame(function(){h=!1;var T=a.toolbar.element;T.style.transform="none",T.getBoundingClientRect().top<0&&(T.style.transform="translate(0, "+-T.getBoundingClientRect().top+"px)")}))};window.visualViewport.addEventListener("scroll",m),window.visualViewport.addEventListener("resize",m)}}(r.vditor),i.after&&i.after(),i.icon&&Object(f.b)(i.cdn+"/dist/js/icons/"+i.icon+".js","vditorIconScript")}),r}return Kr(t,e),t.prototype.setTheme=function(n,o,r,i){this.vditor.options.theme=n,Ht(this.vditor),o&&(this.vditor.options.preview.theme.current=o,Object(vt.a)(o,i||this.vditor.options.preview.theme.path)),r&&(this.vditor.options.preview.hljs.style=r,Object(fn.a)(r,this.vditor.options.cdn))},t.prototype.getValue=function(){return p(this.vditor)},t.prototype.getCurrentMode=function(){return this.vditor.currentMode},t.prototype.focus=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.focus():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.focus():this.vditor.currentMode==="ir"&&this.vditor.ir.element.focus()},t.prototype.blur=function(){this.vditor.currentMode==="sv"?this.vditor.sv.element.blur():this.vditor.currentMode==="wysiwyg"?this.vditor.wysiwyg.element.blur():this.vditor.currentMode==="ir"&&this.vditor.ir.element.blur()},t.prototype.disabled=function(){B(this.vditor,["subToolbar","hint","popover"]),w(this.vditor.toolbar.elements,c.a.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","false")},t.prototype.enable=function(){S(this.vditor.toolbar.elements,c.a.EDIT_TOOLBARS.concat(["undo","redo","fullscreen","edit-mode"])),this.vditor.undo.resetIcon(this.vditor),this.vditor[this.vditor.currentMode].element.setAttribute("contenteditable","true")},t.prototype.getSelection=function(){return this.vditor.currentMode==="wysiwyg"?Qe(this.vditor.wysiwyg.element):this.vditor.currentMode==="sv"?Qe(this.vditor.sv.element):this.vditor.currentMode==="ir"?Qe(this.vditor.ir.element):void 0},t.prototype.renderPreview=function(n){this.vditor.preview.render(this.vditor,n)},t.prototype.getCursorPosition=function(){return Object(E.a)(this.vditor[this.vditor.currentMode].element)},t.prototype.isUploading=function(){return this.vditor.upload.isUploading},t.prototype.clearCache=function(){localStorage.removeItem(this.vditor.options.cache.id)},t.prototype.disabledCache=function(){this.vditor.options.cache.enable=!1},t.prototype.enableCache=function(){if(!this.vditor.options.cache.id)throw new Error("need options.cache.id, see https://ld246.com/article/1549638745630#options");this.vditor.options.cache.enable=!0},t.prototype.html2md=function(n){return this.vditor.lute.HTML2Md(n)},t.prototype.getHTML=function(){return pn(this.vditor)},t.prototype.tip=function(n,o){this.vditor.tip.show(n,o)},t.prototype.setPreviewMode=function(n){Mt(n,this.vditor)},t.prototype.deleteValue=function(){window.getSelection().isCollapsed||document.execCommand("delete",!1)},t.prototype.updateValue=function(n){document.execCommand("insertHTML",!1,n)},t.prototype.insertValue=function(n,o){o===void 0&&(o=!0),Object(E.b)(this.vditor[this.vditor.currentMode].element).collapse(!0),this.vditor.currentMode==="sv"?(this.vditor.sv.preventInput=!0,document.execCommand("insertText",!1,n),o&&te(this.vditor)):this.vditor.currentMode==="wysiwyg"?(this.vditor.wysiwyg.preventInput=!0,document.execCommand("insertText",!1,n),o&&st(this.vditor,getSelection().getRangeAt(0))):this.vditor.currentMode==="ir"&&(this.vditor.ir.preventInput=!0,document.execCommand("insertText",!1,n),o&&le(this.vditor,getSelection().getRangeAt(0),!0))},t.prototype.setValue=function(n,o){var r=this;o===void 0&&(o=!1),this.vditor.currentMode==="sv"?(this.vditor.sv.element.innerHTML=this.vditor.lute.SpinVditorSVDOM(n),we(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})):this.vditor.currentMode==="wysiwyg"?Pt(this.vditor,n,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1}):(this.vditor.ir.element.innerHTML=this.vditor.lute.Md2VditorIRDOM(n),this.vditor.ir.element.querySelectorAll(".vditor-ir__preview[data-render='2']").forEach(function(i){ie(i,r.vditor)}),De(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})),this.vditor.outline.render(this.vditor),n||(B(this.vditor,["emoji","headings","submenu","hint"]),this.vditor.wysiwyg.popover&&(this.vditor.wysiwyg.popover.style.display="none"),this.clearCache()),o&&this.clearStack()},t.prototype.clearStack=function(){this.vditor.undo.clearStack(this.vditor),this.vditor.undo.addToUndoStack(this.vditor)},t.prototype.destroy=function(){this.vditor.element.innerHTML=this.vditor.originalInnerHTML,this.vditor.element.classList.remove("vditor"),this.vditor.element.removeAttribute("style"),document.getElementById("vditorIconScript").remove(),this.clearCache()},t.prototype.getCommentIds=function(){return this.vditor.currentMode!=="wysiwyg"?[]:this.vditor.wysiwyg.getComments(this.vditor,!0)},t.prototype.hlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var o=function(r){r.classList.remove("vditor-comment--hover"),n.forEach(function(i){r.getAttribute("data-cmtids").indexOf(i)>-1&&r.classList.add("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(r){o(r)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(r){o(r)})}},t.prototype.unHlCommentIds=function(n){if(this.vditor.currentMode==="wysiwyg"){var o=function(r){n.forEach(function(i){r.getAttribute("data-cmtids").indexOf(i)>-1&&r.classList.remove("vditor-comment--hover")})};this.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(r){o(r)}),this.vditor.preview.element.style.display!=="none"&&this.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(r){o(r)})}},t.prototype.removeCommentIds=function(n){var o=this;if(this.vditor.currentMode==="wysiwyg"){var r=function(i,a){var d=i.getAttribute("data-cmtids").split(" ");d.find(function(h,m){if(h===a)return d.splice(m,1),!0}),d.length===0?(i.outerHTML=i.innerHTML,Object(E.b)(o.vditor.element).collapse(!0)):i.setAttribute("data-cmtids",d.join(" "))};n.forEach(function(i){o.vditor.wysiwyg.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a,i)}),o.vditor.preview.element.style.display!=="none"&&o.vditor.preview.element.querySelectorAll(".vditor-comment").forEach(function(a){r(a,i)})}),me(this.vditor,{enableAddUndoStack:!0,enableHint:!1,enableInput:!1})}},t}(s.default);H.default=Fr}]).default})}),ao=Jr(io),Co=`/*!
 * Vditor v3.7.7 - A markdown editor written in TypeScript.
 *   
 * MIT License
 * 
 * Copyright (c) 2018-present B3log \u5F00\u6E90, b3log.org
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */.vditor{--border-color:#d1d5da;--second-color:rgba(88,96,105,0.36);--panel-background-color:#fff;--panel-shadow:0 1px 2px rgba(0,0,0,0.2);--toolbar-background-color:#f6f8fa;--toolbar-icon-color:#586069;--toolbar-icon-hover-color:#4285f4;--toolbar-height:35px;--toolbar-divider-margin-top:8px;--textarea-background-color:#fafbfc;--textarea-text-color:#24292e;--resize-icon-color:var(--toolbar-icon-color);--resize-background-color:var(--toolbar-background-color);--resize-hover-icon-color:var(--panel-background-color);--resize-hover-background-color:var(--toolbar-icon-hover-color);--count-background-color:rgba(27,31,35,0.05);--heading-border-color:#eaecef;--blockquote-color:#6a737d;--ir-heading-color:#660e7a;--ir-title-color:grey;--ir-bi-color:#0033b3;--ir-link-color:green;--ir-bracket-color:#00f;--ir-paren-color:green}.vditor--dark{--border-color:#141414;--second-color:hsla(0,0%,72.5%,0.36);--panel-background-color:#24292e;--panel-shadow:0 1px 2px hsla(0,0%,100%,0.2);--toolbar-background-color:#1d2125;--toolbar-icon-color:#b9b9b9;--toolbar-icon-hover-color:#fff;--textarea-background-color:#2f363d;--textarea-text-color:#d1d5da;--resize-icon-color:var(--border-color);--resize-background-color:var(--second-color);--resize-hover-icon-color:var(--toolbar-icon-hover-color);--resize-hover-background-color:hsla(0,0%,72.5%,0.86);--count-background-color:rgba(66,133,244,0.36);--heading-border-color:var(--textarea-text-color);--blockquote-color:var(--toolbar-icon-color);--ir-heading-color:#9876aa;--ir-title-color:grey;--ir-bi-color:#cc7832;--ir-link-color:#ffc66d;--ir-bracket-color:#287bde;--ir-paren-color:#6a8759}@-webkit-keyframes tooltip-appear{0%{opacity:0}to{opacity:1}}@keyframes tooltip-appear{0%{opacity:0}to{opacity:1}}.vditor-tooltipped{position:relative;cursor:pointer}.vditor-tooltipped:after{z-index:1000000;padding:5px 8px;font-size:11px;font-weight:400;-webkit-font-smoothing:subpixel-antialiased;color:#fff;text-align:center;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-wrap:break-word;white-space:pre;content:attr(aria-label);background:#3b3e43;border-radius:3px;line-height:16px}.vditor-tooltipped:after,.vditor-tooltipped:before{position:absolute;display:none;pointer-events:none;opacity:0}.vditor-tooltipped:before{z-index:1000001;width:0;height:0;color:#3b3e43;content:"";border:5px solid transparent}.vditor-tooltipped--hover:after,.vditor-tooltipped--hover:before,.vditor-tooltipped:active:after,.vditor-tooltipped:active:before,.vditor-tooltipped:focus:after,.vditor-tooltipped:focus:before,.vditor-tooltipped:hover:after,.vditor-tooltipped:hover:before{display:inline-block;text-decoration:none;-webkit-animation-name:tooltip-appear;animation-name:tooltip-appear;-webkit-animation-duration:.15s;animation-duration:.15s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}.vditor-tooltipped__s:after,.vditor-tooltipped__se:after,.vditor-tooltipped__sw:after{top:100%;right:50%;margin-top:5px}.vditor-tooltipped__s:before,.vditor-tooltipped__se:before,.vditor-tooltipped__sw:before{top:auto;right:50%;bottom:-5px;margin-right:-5px;border-bottom-color:#3b3e43}.vditor-tooltipped__se:after{right:auto;left:50%;margin-left:-15px}.vditor-tooltipped__sw:after{margin-right:-15px}.vditor-tooltipped__n:after,.vditor-tooltipped__ne:after,.vditor-tooltipped__nw:after{right:50%;bottom:100%;margin-bottom:5px}.vditor-tooltipped__n:before,.vditor-tooltipped__ne:before,.vditor-tooltipped__nw:before{top:-5px;right:50%;bottom:auto;margin-right:-5px;border-top-color:#3b3e43}.vditor-tooltipped__ne:after{right:auto;left:50%;margin-left:-15px}.vditor-tooltipped__nw:after{margin-right:-15px}.vditor-tooltipped__n:after,.vditor-tooltipped__s:after{transform:translateX(50%)}.vditor-tooltipped__w:after{right:100%;bottom:50%;margin-right:5px;transform:translateY(50%)}.vditor-tooltipped__w:before{top:50%;bottom:50%;left:-5px;margin-top:-5px;border-left-color:#3b3e43}.vditor-tooltipped__e:after{bottom:50%;left:100%;margin-left:5px;transform:translateY(50%)}.vditor-tooltipped__e:before{top:50%;right:-5px;bottom:50%;margin-top:-5px;border-right-color:#3b3e43}@media screen and (max-width:520px){.vditor-tooltipped:after,.vditor-tooltipped:before{content:none}}@-webkit-keyframes scale-in{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}@keyframes scale-in{0%{opacity:0;transform:scale(.5)}to{opacity:1;transform:scale(1)}}.vditor-panel{background-color:var(--panel-background-color);position:absolute;box-shadow:var(--panel-shadow);border-radius:3px;padding:5px;z-index:3;font-size:14px;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;max-width:320px;min-width:80px;-webkit-animation-duration:.15s;animation-duration:.15s;-webkit-animation-name:scale-in;animation-name:scale-in;-webkit-animation-timing-function:cubic-bezier(.2,0,.13,1.5);animation-timing-function:cubic-bezier(.2,0,.13,1.5);color:var(--toolbar-icon-color)}.vditor-panel--none{padding:0;-webkit-animation:none;animation:none;min-width:auto;max-width:none;white-space:nowrap;opacity:.86}.vditor-panel--arrow:before{position:absolute;width:0;height:0;pointer-events:none;content:" ";top:-14px;left:5px;border:7px solid transparent;border-bottom:7px solid var(--panel-background-color)}.vditor-panel--left{right:0}.vditor-panel--left.vditor-panel--arrow:before{right:5px;left:auto}.vditor-input{border:0;padding:3px 5px;background-color:var(--panel-background-color);font-size:12px;color:var(--textarea-text-color)}.vditor-input:focus{background-color:var(--toolbar-background-color);outline:none}.vditor-icon{color:var(--toolbar-icon-color);cursor:pointer;float:left;padding:4px 5px;height:21px;width:23px;background-color:transparent;border:0;box-sizing:border-box}.vditor-icon--current,.vditor-icon:hover{color:var(--toolbar-icon-hover-color);background-color:transparent}.vditor-icon:focus{outline:none}.vditor-icon svg{height:13px!important;width:13px!important;float:left;fill:currentColor;pointer-events:none}.vditor-toolbar{background-color:var(--toolbar-background-color);border-bottom:1px solid var(--border-color);padding:0 5px;line-height:1}.vditor-toolbar--pin{position:-webkit-sticky;position:sticky;top:0;z-index:1}.vditor-toolbar--hide{transition:all .15s ease-in-out;height:5px;overflow:hidden}.vditor-toolbar--hide:hover{background-color:var(--toolbar-background-color);height:auto;overflow:visible}.vditor-toolbar__item{float:left;position:relative}.vditor-toolbar__item .vditor-tooltipped{color:var(--toolbar-icon-color);border:0;padding:10px 5px;background-color:transparent;height:var(--toolbar-height);width:25px;box-sizing:border-box;font-size:0}.vditor-toolbar__item .vditor-tooltipped:focus{outline:none;cursor:pointer;color:var(--toolbar-icon-hover-color)}.vditor-toolbar__item svg{fill:currentColor;display:inline-block;stroke-width:0;stroke:currentColor;width:15px;height:15px}.vditor-toolbar__item input{position:absolute;width:25px;height:var(--toolbar-height);top:0;left:0;cursor:pointer;opacity:.001;overflow:hidden}.vditor-toolbar__divider{float:left;height:calc(var(--toolbar-height) - var(--toolbar-divider-margin-top)*2);border-left:1px solid var(--second-color);margin:var(--toolbar-divider-margin-top) 8px}.vditor-toolbar__br{width:100%;padding:0!important;height:0!important}.vditor-menu--current{color:var(--toolbar-icon-hover-color)!important}.vditor-menu--disabled{color:var(--second-color)!important;cursor:not-allowed!important}.vditor-emojis{display:inline-block;overflow:auto}.vditor-emojis::-webkit-scrollbar{display:none}.vditor-emojis__tip{flex:1;min-width:1px;width:200px;margin-right:10px;color:var(--toolbar-icon-color);white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.vditor-emojis__tail{margin-top:5px;font-size:12px;color:var(--toolbar-icon-color);display:flex}.vditor-emojis__tail a{text-decoration:none;color:var(--toolbar-icon-color)}.vditor-emojis__tail a:hover{color:var(--toolbar-icon-hover-color)}.vditor-emojis button{cursor:pointer;border-radius:3px;float:left;height:30px;width:30px;text-align:center;line-height:26px;padding:3px;box-sizing:border-box;font-size:16px;transition:all .15s ease-in-out;border:0;margin:0;background-color:transparent;overflow:hidden}.vditor-emojis button:focus{outline:none}.vditor-emojis button:hover .vditor-emojis__icon{display:inline-block;transform:scale(1.2)}.vditor-emojis img{height:20px;width:20px;float:left;margin:3px 0 0 3px}@media screen and (max-width:520px){.vditor-toolbar__item{padding:0 12px}.vditor-panel--left.vditor-panel--arrow:before{right:17px}}@media (hover:hover) and (pointer:fine){.vditor-toolbar__item .vditor-tooltipped:hover{color:var(--toolbar-icon-hover-color)}}@-webkit-keyframes slideInDown{0%{transform:translate3d(0,-100%,0);visibility:visible}to{transform:translateZ(0)}}@keyframes slideInDown{0%{transform:translate3d(0,-100%,0);visibility:visible}to{transform:translateZ(0)}}.vditor{display:flex;flex-direction:column;border:1px solid var(--border-color);border-radius:3px;box-sizing:border-box;font-family:Helvetica Neue,Luxi Sans,DejaVu Sans,Hiragino Sans GB,Microsoft Yahei,sans-serif,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols}.vditor .vditor-copy{z-index:auto}.vditor--fullscreen{position:fixed;top:0;width:100%!important;left:0;height:100vh!important;z-index:90;border-radius:0}.vditor-content{display:flex;min-height:60px;flex:1;min-width:1px;position:relative}.vditor-preview{flex:1;min-width:1px;overflow:auto;margin-left:-1px;border-left:1px solid var(--border-color);box-sizing:border-box;border-radius:0 0 3px 0;background-color:var(--textarea-background-color)}.vditor-preview::-webkit-scrollbar{display:none}.vditor-preview__action{text-align:center;padding:10px;background-color:var(--toolbar-background-color)}.vditor-preview__action button{background-color:var(--toolbar-background-color);color:var(--toolbar-icon-color);line-height:20px;border:0;margin:0 10px;cursor:pointer;padding:0 7px;font-size:12px}.vditor-preview__action button.vditor-preview__action--current,.vditor-preview__action button:hover{color:var(--toolbar-icon-hover-color);background-color:var(--toolbar-background-color)}.vditor-preview__action button:focus{outline:none}.vditor-preview__action button svg{fill:currentColor;height:15px;width:15px;vertical-align:middle}.vditor-preview>.vditor-reset{padding:10px;margin:0 auto}.vditor-devtools{display:none;background-color:var(--textarea-background-color);overflow:auto;flex:1;min-width:1px;box-shadow:inset 1px 0 var(--border-color);box-sizing:border-box;border-radius:0 0 3px 0;padding:10px}.vditor-counter{padding:3px;color:var(--toolbar-icon-color);background-color:var(--count-background-color);border-radius:3px;font-size:12px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;float:right;margin:8px 3px 0 0}.vditor-counter--error{color:#d23f31;background-color:rgba(210,63,49,.1)}.vditor-resize{padding:3px 0;cursor:row-resize;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;width:100%}.vditor-resize--top{top:-3px}.vditor-resize--bottom{bottom:-3px}.vditor-resize>div{height:3px;background-color:var(--resize-background-color);transition:all .15s ease-in-out}.vditor-resize--selected>div,.vditor-resize:hover>div{background-color:var(--resize-hover-background-color)}.vditor-resize--selected svg,.vditor-resize:hover svg{color:var(--resize-hover-icon-color)}.vditor-resize svg{fill:currentColor;stroke-width:0;stroke:currentColor;width:13px;height:3px;display:block;margin:0 auto;color:var(--resize-icon-color)}.vditor-upload{position:absolute;height:3px;left:0;top:-2px;transition:all .15s ease-in-out;background-color:#4285f4}.vditor-tip{position:absolute;font-size:12px;top:10px;-webkit-animation-duration:.15s;animation-duration:.15s;-webkit-animation-fill-mode:both;animation-fill-mode:both;left:50%;z-index:5}.vditor-tip--show{display:block;-webkit-animation-name:slideInDown;animation-name:slideInDown}.vditor-tip__content{text-align:left;display:inline-block;line-height:16px;padding:3px 10px;border-radius:3px;background:var(--toolbar-background-color);position:relative;margin-left:-50%;color:var(--toolbar-icon-color);max-width:100%;box-shadow:var(--panel-shadow)}.vditor-tip__content ul{margin:2px 0;padding:0 0 0 18px}.vditor-tip__content a{color:#4285f4}.vditor-tip__close{position:absolute;color:var(--toolbar-icon-color);top:-7px;right:-15px;font-weight:700;cursor:pointer}.vditor-tip__close:hover{color:var(--toolbar-icon-hover-color)}.vditor-img{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;z-index:3}.vditor-img__bar{border-bottom:1px solid var(--border-color);background-color:var(--toolbar-background-color);text-align:center;height:36px;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.vditor-img__btn{display:flex;align-items:center;cursor:pointer;margin-left:24px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:var(--toolbar-icon-color)}.vditor-img__btn:hover{color:var(--toolbar-icon-hover-color)}.vditor-img__btn svg{height:14px;width:14px;margin-right:8px;fill:currentColor}.vditor-img__img{flex:1;background-color:var(--textarea-background-color);overflow:auto;cursor:zoom-out}.vditor-img__img img{max-width:none}.vditor-hint{background-color:var(--panel-background-color);position:absolute;box-shadow:var(--panel-shadow);border-radius:3px;padding:5px 0;z-index:4;line-height:20px;list-style:none;font-size:12px;margin:0;max-width:250px;min-width:80px;display:none}.vditor-hint .vditor-hint{margin-top:-31px;left:100%;right:auto}.vditor-hint .vditor-hint.vditor-panel--left{right:100%;left:auto}.vditor-hint button{color:var(--toolbar-icon-color);display:block;padding:3px 10px;border:0;border-radius:0;line-height:20px;width:100%;box-sizing:border-box;text-align:left;margin:0;background-color:transparent;cursor:pointer;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.vditor-hint button:focus{outline:none}.vditor-hint--current,.vditor-hint button:not(.vditor-menu--disabled):hover{background-color:var(--toolbar-background-color)!important;color:var(--toolbar-icon-hover-color)!important}.vditor-hint__emoji{font-size:16px;float:left;margin-right:3px}.vditor-hint img{height:20px;width:20px;float:left;margin-right:3px}.vditor-reset{color:#24292e;font-variant-ligatures:no-common-ligatures;font-family:Helvetica Neue,Luxi Sans,DejaVu Sans,Hiragino Sans GB,Microsoft Yahei,sans-serif,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;word-wrap:break-word;overflow:auto;line-height:1.5;font-size:16px;word-break:break-word}.vditor-reset--anchor{padding-left:20px}.vditor-reset--error{color:#d23f31;font-size:12px;display:block;line-height:16px}.vditor-reset ul ul ul{list-style-type:square}.vditor-reset ul ul{list-style-type:circle}.vditor-reset ul{list-style-type:disc}.vditor-reset ol,.vditor-reset ul{padding-left:2em;margin-top:0;margin-bottom:16px}.vditor-reset li+li{margin-top:.25em}.vditor-reset audio{max-width:100%}.vditor-reset audio:focus{outline:none}.vditor-reset video{max-height:90vh;max-width:100%}.vditor-reset img{max-width:100%}.vditor-reset img.emoji{cursor:auto;max-width:20px;vertical-align:sub}.vditor-reset h1,.vditor-reset h2,.vditor-reset h3,.vditor-reset h4,.vditor-reset h5,.vditor-reset h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.vditor-reset h1:hover .vditor-anchor svg,.vditor-reset h2:hover .vditor-anchor svg,.vditor-reset h3:hover .vditor-anchor svg,.vditor-reset h4:hover .vditor-anchor svg,.vditor-reset h5:hover .vditor-anchor svg,.vditor-reset h6:hover .vditor-anchor svg{visibility:visible}.vditor-reset h1{font-size:1.75em}.vditor-reset h2{font-size:1.55em}.vditor-reset h3{font-size:1.38em}.vditor-reset h4{font-size:1.25em}.vditor-reset h5{font-size:1.13em}.vditor-reset h6{font-size:1em}.vditor-reset hr{height:2px;padding:0;margin:24px 0;background-color:#eaecef;border:0}.vditor-reset p{margin-top:0;margin-bottom:16px}.vditor-reset blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #eaecef;margin:0 0 16px}.vditor-reset blockquote>:first-child{margin-top:0}.vditor-reset blockquote>:last-child{margin-bottom:0}.vditor-reset ins>iframe{border:0}.vditor-reset iframe{border:1px solid #d1d5da;max-width:100%;box-sizing:border-box}.vditor-reset iframe.iframe__video{min-width:80%;min-height:36vh}.vditor-reset table{border-collapse:collapse;empty-cells:show;margin-bottom:16px;overflow:auto;border-spacing:0}.vditor-reset table tr{background-color:#fafbfc;border-top:1px solid #c6cbd1}.vditor-reset table td,.vditor-reset table th{padding:6px 13px;border:1px solid #dfe2e5;word-break:normal}.vditor-reset table th{font-weight:600}.vditor-reset table tbody tr:nth-child(2n){background-color:#fff}.vditor-reset code:not(.hljs):not(.highlight-chroma){padding:.2em .4em;margin:0;font-size:85%;border-radius:3px;font-family:mononoki,Consolas,Liberation Mono,Menlo,Courier,monospace,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;word-break:break-word;background-size:20px 20px;white-space:pre-wrap}.vditor-reset pre{margin:1em 0}.vditor-reset pre>code{margin:0;font-size:85%;padding:.5em;border-radius:5px;display:block;overflow:auto;white-space:pre;font-family:mononoki,Consolas,Liberation Mono,Menlo,Courier,monospace,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;background-size:20px 20px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AgMAAABHkjHhAAAACVBMVEWAgIBaWlo+Pj7rTFvWAAAAA3RSTlMHCAw+VhR4AAAA+klEQVQoz4WSMW7EQAhFPxKWNh2FCx+HkaZI6RRb5DYbyVfIJXLKDCFoMbaTKSw/8ZnPAPjaH2xgZcUNUDADD7D9LtDBCLZ45fbkvo/30K8yeI64pPwl6znd/3n/Oe93P3ho9qeh72btTFzqkz0rsJle8Zr81OLEwZ1dv/713uWqvu2pl+k0fy7MWtj9r/tN5q/02z89qa/L4Dc2LvM93kezPfXlME/O86EbY/V9GB9ePX8G1/6W+/9h1dq/HGfTfzT3j/xNo7522Bfnqe5jO/fvhVthlfk434v3iO9zG/UOphyPeinPl1J8Gtaa7xPTa/Dk+RIs4deMvwGvcGsmsCvJ0AAAAABJRU5ErkJggg==);word-break:normal;word-wrap:normal}.vditor-reset pre:hover div.vditor-copy{display:block}.vditor-reset .language-abc,.vditor-reset .language-echarts,.vditor-reset .language-flowchart,.vditor-reset .language-graphviz,.vditor-reset .language-math,.vditor-reset .language-mermaid,.vditor-reset .language-mindmap{margin-bottom:16px}.vditor-reset .language-math mjx-container:focus{outline:none;cursor:context-menu}.vditor-reset .language-echarts,.vditor-reset .language-mindmap{overflow:hidden;height:420px}.vditor-reset .language-flowchart,.vditor-reset .language-graphviz,.vditor-reset .language-mermaid{text-align:center}.vditor-reset .language-graphviz parsererror{overflow:auto}.vditor-reset kbd{display:inline-block;padding:3px 5px;font:11px Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:10px;color:#24292e;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.vditor-reset summary{cursor:pointer}.vditor-reset summary:focus{outline:none}.vditor-reset svg{height:auto;width:auto;stroke-width:initial}.vditor-reset blockquote:last-child,.vditor-reset hr:last-child,.vditor-reset ol:last-child,.vditor-reset p:last-child,.vditor-reset pre:last-child,.vditor-reset ul:last-child{margin-bottom:0}.vditor-comment{border-bottom:2px solid #f8e6ab}.vditor-comment--focus,.vditor-comment--hover{background-color:#faf1d1;border-bottom:2px solid #ffc60a}.vditor-comment--focus .vditor-comment,.vditor-comment--hover .vditor-comment{border-bottom:2px solid #ffc60a}.vditor-task{list-style:none!important;word-break:break-all}.vditor-task input{margin:0 .2em .25em -1.6em;font-size:12px;vertical-align:middle}.vditor-copy{position:relative;display:none;z-index:1}.vditor-copy textarea{position:absolute;left:-100000px;height:10px}.vditor-copy span{cursor:pointer;position:absolute;right:15px;top:.5em}.vditor-copy svg{color:#586069;height:14px;width:14px!important;display:block;fill:currentColor}.vditor-linenumber{padding-left:4em!important;position:relative}.vditor-linenumber__rows{position:absolute;pointer-events:none;top:.5em;left:0;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;counter-reset:linenumber}.vditor-linenumber__rows>span{pointer-events:none;display:block}.vditor-linenumber__rows>span:before{counter-increment:linenumber;content:counter(linenumber);color:hsla(0,4%,60.4%,.38);display:block;padding-right:1em;text-align:right}.vditor-speech{position:absolute;display:none;background-color:#f6f8fa;border:1px solid #d1d5da;border-radius:3px;padding:3px;cursor:pointer;color:#586069}.vditor-speech--current,.vditor-speech:hover{color:#4285f4}.vditor-speech svg{height:14px;width:14px;fill:currentColor;display:block;stroke-width:0;stroke:currentColor}.vditor-anchor{margin-left:5px}.vditor-anchor--left{float:left;padding-right:4px;margin-left:-20px}.vditor-anchor svg{visibility:hidden}.vditor-anchor:hover svg{visibility:visible}.vditor-anchor:focus{outline:none}.vditor-linkcard{margin:31px auto 16px;transition:all .15s ease-in-out;cursor:pointer;max-width:768px;padding:0 10px}.vditor-linkcard a{border-radius:3px;background-color:#f6f8fa;overflow:hidden;max-height:250px;display:flex;text-decoration:none;flex-wrap:wrap-reverse;box-shadow:0 1px 2px rgba(0,0,0,.2)}.vditor-linkcard a:hover{box-shadow:0 0 3px rgba(0,0,0,.13),0 3px 6px rgba(0,0,0,.26);text-decoration:none}.vditor-linkcard a:visited .vditor-linkcard__abstract{color:rgba(88,96,105,.36)}.vditor-linkcard__info{padding:10px;min-width:200px;box-sizing:border-box;flex:1}.vditor-linkcard__title{font-size:14px;font-weight:400;color:#24292e;display:flex;align-items:center}.vditor-linkcard__title img{cursor:pointer;height:20px;width:20px;border-radius:3px;flex-shrink:0;margin-right:5px}.vditor-linkcard__abstract{word-wrap:break-word;word-break:break-all;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;display:-webkit-box;font-size:13px;color:#586069;margin:5px 0}.vditor-linkcard__site{font-size:12px;color:#4285f4}.vditor-linkcard__image{background-size:cover;background-repeat:no-repeat;background-position:50%;max-width:250px;min-width:126px;cursor:pointer;background-color:rgba(88,96,105,.36)}.vditor-footnotes__goto-ref{text-decoration:none}.vditor-toc{margin-bottom:16px;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;color:#4285f4}.vditor-toc .vditor-outline__action{display:none}.vditor-toc ul{list-style:none!important;padding-left:1em}.vditor-toc>ul{padding-left:0}.vditor-toc span{cursor:pointer}.vditor-outline{width:250px;border-right:1px solid var(--border-color);background-color:var(--panel-background-color);display:none;overflow:auto}.vditor-outline--right{border-right:0;border-left:1px solid var(--border-color)}.vditor-outline::-webkit-scrollbar{display:none}.vditor-outline ul{list-style:none!important;padding-left:1em;margin:0}.vditor-outline__content>ul{padding-left:0}.vditor-outline li>span{display:flex;align-items:center;padding:5px 10px;cursor:pointer;color:var(--textarea-text-color)}.vditor-outline li>span svg{height:10px;width:10px}.vditor-outline li>span:hover{color:var(--toolbar-icon-hover-color)}.vditor-outline li>span span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vditor-outline__title{border-bottom:1px dashed var(--border-color);padding:5px 10px;color:var(--toolbar-icon-color);font-size:12px}.vditor-outline__action{transition:all .15s ease-in-out;fill:currentColor;margin-right:5px;flex-shrink:0}.vditor-outline__action--close{transform:rotate(-90deg)}.vditor-wysiwyg{box-sizing:border-box;flex:1;position:relative;width:100%;min-width:1px}.vditor-wysiwyg pre.vditor-reset{background-color:var(--panel-background-color);margin:0;white-space:pre-wrap;height:100%;box-sizing:border-box}.vditor-wysiwyg pre.vditor-reset[contenteditable=false]{opacity:.3;cursor:not-allowed}.vditor-wysiwyg pre.vditor-reset:empty:before{content:attr(placeholder);color:var(--second-color)}.vditor-wysiwyg pre.vditor-reset:focus{outline:none;background-color:var(--textarea-background-color)}.vditor-wysiwyg pre.vditor-reset:after{content:"";height:var(--editor-bottom);display:block}.vditor-wysiwyg blockquote:empty:before,.vditor-wysiwyg h1:empty:after,.vditor-wysiwyg h2:empty:after,.vditor-wysiwyg h3:empty:after,.vditor-wysiwyg h4:empty:after,.vditor-wysiwyg h5:empty:after,.vditor-wysiwyg h6:empty:after,.vditor-wysiwyg p:empty:before,.vditor-wysiwyg pre>code:empty:before{content:" "}.vditor-wysiwyg code[data-marker="\`"]{padding-left:0!important;padding-right:0!important}.vditor-wysiwyg__block pre:first-child{margin-bottom:-1em}.vditor-wysiwyg__block pre:first-child code{color:var(--textarea-text-color);height:auto;text-align:left}.vditor-wysiwyg__block pre:last-child{margin-bottom:1em}.vditor-wysiwyg__preview{cursor:pointer;white-space:normal;min-height:27px}.vditor-wysiwyg .vditor-toc:before,.vditor-wysiwyg>.vditor-reset>h1:before,.vditor-wysiwyg>.vditor-reset>h2:before,.vditor-wysiwyg>.vditor-reset>h3:before,.vditor-wysiwyg>.vditor-reset>h4:before,.vditor-wysiwyg>.vditor-reset>h5:before,.vditor-wysiwyg>.vditor-reset>h6:before,.vditor-wysiwyg div.vditor-wysiwyg__block:before,.vditor-wysiwyg div[data-type=footnotes-block]:before,.vditor-wysiwyg div[data-type=link-ref-defs-block]:before{float:left;padding-right:4px;margin-left:-29px;content:"H1";font-size:.85rem;font-weight:400;color:var(--second-color)}.vditor-wysiwyg>.vditor-reset>h2:before{content:"H2"}.vditor-wysiwyg>.vditor-reset>h3:before{content:"H3"}.vditor-wysiwyg>.vditor-reset>h4:before{content:"H4"}.vditor-wysiwyg>.vditor-reset>h5:before{content:"H5"}.vditor-wysiwyg>.vditor-reset>h6:before{content:"H6"}.vditor-wysiwyg div[data-type=link-ref-defs-block]:before{content:'"A"'}.vditor-wysiwyg div[data-type=footnotes-block]:before{content:"^F"}.vditor-wysiwyg div.vditor-wysiwyg__block:before{content:"</>"}.vditor-wysiwyg div.vditor-wysiwyg__block[data-type=yaml-front-matter]:before{content:"F"}.vditor-wysiwyg div.vditor-wysiwyg__block[data-type=math-block]:before{content:"$$"}.vditor-wysiwyg .vditor-toc:before{content:"ToC"}.vditor-wysiwyg hr{display:inline-block;margin:12px 0;width:100%}.vditor-wysiwyg details{white-space:normal}.vditor-wysiwyg span[data-type=backslash]>span{display:none;color:var(--second-color)}.vditor-wysiwyg span[data-type=link-ref],.vditor-wysiwyg sup[data-type=footnotes-ref]{color:#4285f4}.vditor-wysiwyg span[data-type=toc-h]{color:#4285f4;text-decoration:underline}.vditor-wysiwyg div[data-type=footnotes-block]{border-top:2px solid var(--heading-border-color);padding-top:24px;margin-top:24px}.vditor-wysiwyg div[data-type=link-ref-defs-block]{color:var(--blockquote-color)}@media screen and (max-width:520px){.vditor-wysiwyg .vditor-toc:before,.vditor-wysiwyg div.vditor-wysiwyg__block:before,.vditor-wysiwyg div[data-type=footnotes-block]:before,.vditor-wysiwyg div[data-type=link-ref-defs-block]:before,.vditor-wysiwyg h1:before,.vditor-wysiwyg h2:before,.vditor-wysiwyg h3:before,.vditor-wysiwyg h4:before,.vditor-wysiwyg h5:before,.vditor-wysiwyg h6:before{content:none}}.vditor-ir{box-sizing:border-box;flex:1;min-width:1px;position:relative;width:100%}.vditor-ir__node[data-type=code-block]:after,.vditor-ir__node[data-type=code-block]:before,.vditor-ir__node[data-type=math-block]:after,.vditor-ir__node[data-type=math-block]:before,.vditor-ir__node[data-type=yaml-front-matter]:after,.vditor-ir__node[data-type=yaml-front-matter]:before{content:" ";color:var(--second-color)}.vditor-ir__node:not(.vditor-ir__node--expand) .vditor-ir__marker{padding:0!important}.vditor-ir__node[data-type=footnotes-ref],.vditor-ir__node[data-type=link-ref]{color:#4285f4}.vditor-ir__node[data-type=html-block]{margin-bottom:1em}.vditor-ir__node .vditor-ir__marker{width:0;overflow:hidden;display:inline-block;height:0;transition:all .15s ease-in-out}.vditor-ir__node--hidden .vditor-ir__marker{visibility:hidden}.vditor-ir__node--expand .vditor-ir__marker{color:var(--second-color);display:inline;height:auto;width:auto}.vditor-ir__node--expand .vditor-ir__marker--hide{display:none}.vditor-ir__node--expand .vditor-ir__marker--heading{color:var(--ir-heading-color)}.vditor-ir__node--expand .vditor-ir__marker--bi{color:var(--ir-bi-color)}.vditor-ir__node--expand .vditor-ir__marker--link{color:var(--ir-link-color)}.vditor-ir__node--expand .vditor-ir__marker--title{color:var(--ir-title-color)}.vditor-ir__node--expand .vditor-ir__marker--bracket{color:var(--ir-bracket-color);text-decoration:underline}.vditor-ir__node--expand .vditor-ir__marker--paren{color:var(--ir-paren-color)}.vditor-ir__node--expand .vditor-ir__marker--info{color:var(--ir-heading-color)}.vditor-ir__node--expand .vditor-ir__marker--pre code{color:var(--textarea-text-color);height:auto;text-align:left}.vditor-ir__node--expand[data-type=code-block]:after,.vditor-ir__node--expand[data-type=code-block]:before{content:"\`\`\`"}.vditor-ir__node--expand[data-type=yaml-front-matter]:after,.vditor-ir__node--expand[data-type=yaml-front-matter]:before{content:"---"}.vditor-ir__node--expand[data-type=math-block]:after,.vditor-ir__node--expand[data-type=math-block]:before{content:"$$"}.vditor-ir__node span[data-type=code-block-close-marker],.vditor-ir__node span[data-type=code-block-open-marker],.vditor-ir__node span[data-type=math-block-close-marker],.vditor-ir__node span[data-type=math-block-open-marker],.vditor-ir__node span[data-type=yaml-front-matter-close-marker],.vditor-ir__node span[data-type=yaml-front-matter-open-marker]{display:none}.vditor-ir__preview{cursor:pointer;white-space:normal;min-height:27px}.vditor-ir__link{color:var(--ir-bracket-color);text-decoration:underline}.vditor-ir pre.vditor-reset{background-color:var(--panel-background-color);margin:0;white-space:pre-wrap;height:100%;box-sizing:border-box}.vditor-ir pre.vditor-reset[contenteditable=false]{opacity:.3;cursor:not-allowed}.vditor-ir pre.vditor-reset:empty:before{content:attr(placeholder);color:var(--second-color)}.vditor-ir pre.vditor-reset:focus{outline:none;background-color:var(--textarea-background-color)}.vditor-ir pre.vditor-reset:after{content:"";height:var(--editor-bottom);display:block}.vditor-ir pre.vditor-reset pre{margin:0}.vditor-ir hr{display:inline-block;margin:12px 0;width:100%}.vditor-ir blockquote:empty:before,.vditor-ir h1:empty:after,.vditor-ir h2:empty:after,.vditor-ir h3:empty:after,.vditor-ir h4:empty:after,.vditor-ir h5:empty:after,.vditor-ir h6:empty:after,.vditor-ir p:empty:before,.vditor-ir pre>code:empty:before{content:" "}.vditor-ir .vditor-reset>h1:before,.vditor-ir .vditor-reset>h2:before,.vditor-ir .vditor-reset>h3:before,.vditor-ir .vditor-reset>h4:before,.vditor-ir .vditor-reset>h5:before,.vditor-ir .vditor-reset>h6:before,.vditor-ir .vditor-toc:before,.vditor-ir div[data-type=footnotes-block]:before,.vditor-ir div[data-type=link-ref-defs-block]:before{float:left;padding-right:4px;margin-left:-29px;content:"H1";font-size:.85rem;font-weight:400;color:var(--second-color)}.vditor-ir .vditor-reset>h2:before{content:"H2"}.vditor-ir .vditor-reset>h3:before{content:"H3"}.vditor-ir .vditor-reset>h4:before{content:"H4"}.vditor-ir .vditor-reset>h5:before{content:"H5"}.vditor-ir .vditor-reset>h6:before{content:"H6"}.vditor-ir div[data-type=link-ref-defs-block]{color:var(--blockquote-color)}.vditor-ir div[data-type=link-ref-defs-block]:before{content:'"A"'}.vditor-ir div[data-type=footnotes-block]{border-top:2px solid var(--heading-border-color);padding-top:24px;margin-top:24px}.vditor-ir div[data-type=footnotes-block]:before{content:"^F"}.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>blockquote,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>hr,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>ol,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>p,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>pre,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>table,.vditor-ir div[data-type=footnotes-block]>div[data-type=footnotes-def]>ul{margin-left:8px}.vditor-ir .vditor-toc:before{content:"ToC"}.vditor-ir .vditor-toc span[data-type=toc-h]{color:#4285f4;text-decoration:underline}@media screen and (max-width:520px){.vditor-ir .vditor-toc:before,.vditor-ir div[data-type=footnotes-block]:before,.vditor-ir div[data-type=link-ref-defs-block]:before,.vditor-ir h1:before,.vditor-ir h2:before,.vditor-ir h3:before,.vditor-ir h4:before,.vditor-ir h5:before,.vditor-ir h6:before{content:none}}.vditor-sv{font-family:Helvetica Neue,Luxi Sans,DejaVu Sans,Hiragino Sans GB,Microsoft Yahei,sans-serif,Apple Color Emoji,Segoe UI Emoji,Noto Color Emoji,Segoe UI Symbol,Android Emoji,EmojiSymbols;margin:0 1px 0 0;overflow:auto;width:100%;flex:1;min-width:1px;border:0;resize:none;padding:10px 9px 10px 10px;box-sizing:border-box;background-color:var(--panel-background-color);outline:0 none;font-size:16px;line-height:22px;color:var(--textarea-text-color);border-radius:0 0 3px 3px;font-variant-ligatures:no-common-ligatures;white-space:pre-wrap;word-break:break-word;word-wrap:break-word}.vditor-sv[contenteditable=false]{opacity:.3;cursor:not-allowed}.vditor-sv:empty:before{content:attr(placeholder);color:var(--second-color)}.vditor-sv:focus{background-color:var(--textarea-background-color)}.vditor-sv:after{content:"";height:var(--editor-bottom);display:block}.vditor-sv span[data-type=newline]+span[data-type=text]:empty{display:inherit}.vditor-sv .sup{vertical-align:super;font-size:smaller}.vditor-sv .strong{font-weight:700}.vditor-sv .em{font-style:italic}.vditor-sv .s{text-decoration:line-through}.vditor-sv .mark:not(.vditor-sv__marker){background-color:#ff0;color:#000}.vditor-sv .h1{font-size:1.75em;line-height:44px}.vditor-sv .h2{font-size:1.55em;line-height:38px}.vditor-sv .h3{font-size:1.38em;line-height:27px}.vditor-sv .h4{font-size:1.25em;line-height:25px}.vditor-sv .h5{font-size:1.13em}.vditor-sv .h6{font-size:1em}.vditor-sv__marker{color:var(--second-color)}.vditor-sv__marker--heading{color:var(--ir-heading-color)}.vditor-sv__marker--bi{color:var(--ir-bi-color)}.vditor-sv__marker--link{color:var(--ir-link-color)}.vditor-sv__marker--title{color:var(--ir-title-color)}.vditor-sv__marker--bracket{color:var(--ir-bracket-color)}.vditor-sv__marker--paren{color:var(--ir-paren-color)}.vditor-sv__marker--info{color:var(--ir-heading-color)}.vditor-sv__marker--strong{font-weight:700}`,kn=Xr({inheritAttrs:!1,props:{height:wn.number.def(360),value:wn.string.def("")},emits:["change","get"],setup(Je,{attrs:mt,emit:re}){const H=ft(null),g=ft(null),l=ft(!1),u=oo(),s=ft(),{getLang:c}=to(),v=Yr(()=>{switch(nt(c)){case"en":s.value="en_US";break;case"ja":s.value="ja_JP";break;case"ko":s.value="ko_KR";break;default:s.value="zh_CN"}return s.value});function p(){const k=nt(H);if(!k)return;const b=Ze(Ze({},mt),Je);g.value=new ao(k,Ze(Ze({lang:nt(v),mode:"sv",preview:{actions:[]},input:C=>{re("change",C)},blur:()=>{var C;(C=nt(g))==null||C.setValue(Je.value)}},b),{cache:{enable:!1}})),l.value=!0}const f={getVditor:()=>g.value};return $r(()=>{Qr(()=>{p(),setTimeout(()=>{var k;(k=u==null?void 0:u.redoModalHeight)==null||k.call(u)},200)}),re("get",f)}),eo(()=>{var b;const k=nt(g);if(!!k)try{(b=k==null?void 0:k.destroy)==null||b.call(k)}catch(C){}}),Ze({wrapRef:H},f)}});const lo={ref:"wrapRef"};function so(Je,mt,re,H,g,l){return no(),ro("div",lo,null,512)}kn.render=so;export default kn;
